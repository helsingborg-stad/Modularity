/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./source/js/modularity-editor-modal.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./source/js/editor/autosave.js":
/*!**************************************!*\
  !*** ./source/js/editor/autosave.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  function Autosave() {}\n\n  Autosave.prototype.save = function (selector) {\n    $('#modularity-options #publishing-action .spinner').css('visibility', 'visible');\n    var request = $(selector).serializeObject();\n    request.id = window.modularity_post_id;\n    request.action = 'save_modules';\n    $.post(ajaxurl, request, function (response) {\n      $('#modularity-options #publishing-action .spinner').css('visibility', 'hidden');\n    });\n  };\n\n  return new Autosave();\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvZWRpdG9yL2F1dG9zYXZlLmpzPzA3MTkiXSwibmFtZXMiOlsiJCIsIkF1dG9zYXZlIiwicHJvdG90eXBlIiwic2F2ZSIsInNlbGVjdG9yIiwiY3NzIiwicmVxdWVzdCIsInNlcmlhbGl6ZU9iamVjdCIsImlkIiwid2luZG93IiwibW9kdWxhcml0eV9wb3N0X2lkIiwiYWN0aW9uIiwicG9zdCIsImFqYXh1cmwiLCJyZXNwb25zZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxnRUFBQyxVQUFVQSxDQUFWLEVBQWE7QUFFekIsV0FBU0MsUUFBVCxHQUFvQixDQUNuQjs7QUFFREEsVUFBUSxDQUFDQyxTQUFULENBQW1CQyxJQUFuQixHQUEwQixVQUFVQyxRQUFWLEVBQW9CO0FBQzFDSixLQUFDLENBQUMsaURBQUQsQ0FBRCxDQUFxREssR0FBckQsQ0FBeUQsWUFBekQsRUFBdUUsU0FBdkU7QUFDQSxRQUFJQyxPQUFPLEdBQUdOLENBQUMsQ0FBQ0ksUUFBRCxDQUFELENBQVlHLGVBQVosRUFBZDtBQUNBRCxXQUFPLENBQUNFLEVBQVIsR0FBYUMsTUFBTSxDQUFDQyxrQkFBcEI7QUFDQUosV0FBTyxDQUFDSyxNQUFSLEdBQWlCLGNBQWpCO0FBRUFYLEtBQUMsQ0FBQ1ksSUFBRixDQUFPQyxPQUFQLEVBQWdCUCxPQUFoQixFQUF5QixVQUFVUSxRQUFWLEVBQW9CO0FBQ3pDZCxPQUFDLENBQUMsaURBQUQsQ0FBRCxDQUFxREssR0FBckQsQ0FBeUQsWUFBekQsRUFBdUUsUUFBdkU7QUFDSCxLQUZEO0FBR0gsR0FURDs7QUFXQSxTQUFPLElBQUlKLFFBQUosRUFBUDtBQUVILENBbEJjLEVBa0JaYyxNQWxCWSxDQUFmIiwiZmlsZSI6Ii4vc291cmNlL2pzL2VkaXRvci9hdXRvc2F2ZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgZnVuY3Rpb24gQXV0b3NhdmUoKSB7XG4gICAgfVxuXG4gICAgQXV0b3NhdmUucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgJCgnI21vZHVsYXJpdHktb3B0aW9ucyAjcHVibGlzaGluZy1hY3Rpb24gLnNwaW5uZXInKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICB2YXIgcmVxdWVzdCA9ICQoc2VsZWN0b3IpLnNlcmlhbGl6ZU9iamVjdCgpO1xuICAgICAgICByZXF1ZXN0LmlkID0gd2luZG93Lm1vZHVsYXJpdHlfcG9zdF9pZDtcbiAgICAgICAgcmVxdWVzdC5hY3Rpb24gPSAnc2F2ZV9tb2R1bGVzJztcblxuICAgICAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1vcHRpb25zICNwdWJsaXNoaW5nLWFjdGlvbiAuc3Bpbm5lcicpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgQXV0b3NhdmUoKTtcblxufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./source/js/editor/autosave.js\n");

/***/ }),

/***/ "./source/js/editor/module.js":
/*!************************************!*\
  !*** ./source/js/editor/module.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _thickbox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./thickbox.js */ \"./source/js/editor/thickbox.js\");\n/* harmony import */ var _helpers_helpers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/helpers.js */ \"./source/js/helpers/helpers.js\");\n/* harmony import */ var _prompt_modal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../prompt/modal.js */ \"./source/js/prompt/modal.js\");\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  var initCompleted = false;\n  /**\n   * Object to create Thickbox querystring from\n   * @type {Object}\n   */\n\n  var thickboxOptions = {\n    is_thickbox: true\n  };\n  var editingModule = false;\n\n  function Module() {\n    $(function () {\n      if (typeof pagenow !== 'undefined' && pagenow == 'admin_page_modularity-editor') {\n        this.handleEvents();\n        this.loadModules(window.modularity_post_id);\n      }\n    }.bind(this));\n  }\n  /**\n   * Loads saved modules and adds them to the page\n   * @param  {integer} postId The post id to load modules from\n   * @return {void}\n   */\n\n\n  Module.prototype.loadModules = function (postId) {\n    var request = {\n      action: 'get_post_modules',\n      id: postId\n    };\n    $.post(ajaxurl, request, function (response) {\n      $.each(response, function (sidebar, modules) {\n        var sidebarElement = $('.modularity-sidebar-area[data-area-id=\"' + sidebar + '\"]');\n        $.each(modules.modules, function (key, data) {\n          if (data.hidden == 'true') {\n            data.hidden = true;\n          }\n\n          var incompability = typeof data.sidebar_incompability != 'undefined' && !$.isEmptyObject(data.sidebar_incompability) ? JSON.stringify(data.sidebar_incompability) : '';\n          this.addModule(sidebarElement, data.post_type, data.post_type_name, data.post_title, data.ID, data.hidden, data.columnWidth, data.isDeprecated, incompability);\n        }.bind(this));\n        sidebarElement.removeClass('modularity-spinner');\n      }.bind(this));\n      this.initCompleted = true;\n      $('.modularity-sidebar-area').removeClass('modularity-spinner');\n    }.bind(this), 'json');\n  };\n  /**\n   * Check editing module\n   * @return {boolean/string}\n   */\n\n\n  Module.prototype.isEditingModule = function () {\n    return editingModule;\n  };\n  /**\n   * Generates a thickbox url to open a thickbox in correct mode\n   * @param  {string} action Should be \"add\" or \"edit\"\n   * @param  {object} data   Should contain additional data (for now supports \"postId\" and \"postType\")\n   * @return {string}        Thickbox url\n   */\n\n\n  Module.prototype.getThickBoxUrl = function (action, data) {\n    var base = '';\n    var querystring = {};\n\n    switch (action) {\n      case 'add':\n        base = 'post-new.php';\n        break;\n\n      case 'edit':\n        base = 'post.php';\n        break;\n    }\n\n    if (typeof data.postId == 'number') {\n      querystring.post = data.postId;\n      querystring.action = 'edit';\n    }\n\n    if (typeof data.postType == 'string') {\n      querystring.post_type = data.postType;\n    }\n\n    return admin_url + base + '?' + $.param(querystring) + '&' + $.param(thickboxOptions);\n  };\n\n  Module.prototype.getImportUrl = function (data) {\n    var base = 'edit.php';\n    var querystring = {};\n    querystring.post_type = data.postType;\n    return admin_url + base + '?' + $.param(querystring) + '&' + $.param(thickboxOptions);\n  };\n  /**\n   * Adds a module \"row\" to the target placeholder\n   * @param {selector} target   The target selector\n   * @param {string} moduleId   The module id slug\n   * @param {string} moduleName The module name\n   */\n\n\n  Module.prototype.addModule = function (target, moduleId, moduleName, moduleTitle, postId, hidden, columnWidth, isDeprecated, incompability) {\n    moduleTitle = typeof moduleTitle != 'undefined' ? ': ' + moduleTitle : '';\n    postId = typeof postId != 'undefined' ? postId : '';\n    columnWidth = typeof columnWidth != 'undefined' ? columnWidth : '';\n    var deprecated = isDeprecated === true ? '<span class=\"modularity-deprecated\"' + ' style=\"color:#ff0000;\">(' + modularityAdminLanguage.deprecated + ')</span>' : '';\n    incompability = typeof incompability != 'undefined' ? incompability : ''; // Get thickbox url\n\n    var thickboxUrl = this.getThickBoxUrl('add', {\n      postType: moduleId\n    }); // Set thickbox action\n\n    _thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('add');\n\n    if (postId) {\n      thickboxUrl = this.getThickBoxUrl('edit', {\n        postId: postId\n      });\n      _thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('edit');\n    } // Get import url\n\n\n    var importUrl = this.getImportUrl({\n      postType: moduleId\n    }); // Check/uncheck hidden checkbox\n\n    var isHidden = '';\n\n    if (hidden === true) {\n      isHidden = 'checked';\n    }\n\n    var sidebarId = $(target).data('area-id');\n    var itemRowId = _helpers_helpers_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].uuid();\n    var html = '<li id=\"post-' + postId + '\" data-module-id=\"' + moduleId + '\" data-module-stored-width=\"' + columnWidth + '\" data-sidebar-incompability=\\'' + incompability + '\\'>\\\n                <span class=\"modularity-line-wrapper\">\\\n                    <span class=\"modularity-sortable-handle\"></span>\\\n                    <span class=\"modularity-module-name\">\\\n                        ' + moduleName + '\\\n                        ' + deprecated + '\\\n                        <span class=\"modularity-module-title\">' + moduleTitle + '</span>\\\n                        <label class=\"modularity-module-hide\">\\\n                            <input type=\"checkbox\" name=\"modularity_modules[' + sidebarId + '][' + itemRowId + '][hidden]\" value=\"hidden\" ' + isHidden + ' />\\\n                            ' + modularityAdminLanguage.langhide + '\\\n                        </label>\\\n                    </span>\\\n                    <span class=\"modularity-module-columns\">\\\n                        <label>' + modularityAdminLanguage.width + ':</label>\\\n                        <select name=\"modularity_modules[' + sidebarId + '][' + itemRowId + '][columnWidth]\">\\\n                            ' + modularityAdminLanguage.widthOptions + '\\\n                        </select>\\\n                    </span>\\\n                    <span class=\"modularity-module-actions\">\\\n                        <a href=\"' + thickboxUrl + '\" data-modularity-modal class=\"modularity-js-thickbox-open\"><span>' + modularityAdminLanguage.langedit + '</span></a>\\\n                        <a href=\"' + importUrl + '\" class=\"modularity-js-thickbox-import\"><span>' + modularityAdminLanguage.langimport + '</span></a>\\\n                        <a href=\"#remove\" class=\"modularity-module-remove\"><span>' + modularityAdminLanguage.langremove + '</span></a>\\\n                    </span>\\\n                    <input type=\"hidden\" name=\"modularity_modules[' + sidebarId + '][' + itemRowId + '][postid]\" class=\"modularity-js-module-id\" value=\"' + postId + '\" required>\\\n                </span>\\\n            </li>'; //Store\n\n    $(target).append(html); //Update width selector\n\n    $('.modularity-sidebar-area > li').each(function (index, item) {\n      $('.modularity-module-columns select', $(item)).val($(item).attr('data-module-stored-width'));\n    }); //Refresh\n\n    $('.modularity-js-sortable').sortable('refresh');\n  };\n  /**\n   * Updates a module \"row\" after editing the module post\n   * @param  {DOM} module    Module dom element\n   * @param  {object} data   The data\n   * @return {void}\n   */\n\n\n  Module.prototype.updateModule = function (module, data) {\n    // Href\n    module.find('a.modularity-js-thickbox-open').attr('href', this.getThickBoxUrl('edit', {\n      postId: data.post_id\n    })); // Post id input\n\n    module.find('input.modularity-js-module-id').val(data.post_id).change(); // Post title\n\n    module.find('.modularity-module-title').text(': ' + data.title);\n  };\n  /**\n   * Removes a module \"row\" from the placeholder\n   * @param  {DOM Element} module The (to be removed) module's dom element\n   * @return {void}\n   */\n\n\n  Module.prototype.removeModule = function (module) {\n    if (confirm(modularityAdminLanguage.actionRemove)) {\n      module.remove();\n    }\n  };\n  /**\n   * Handle events\n   * @return {void}\n   */\n\n\n  Module.prototype.handleEvents = function () {\n    // Trash icon\n    $(document).on('click', '.modularity-module-remove', function (e) {\n      e.preventDefault();\n      var target = $(e.target).closest('li');\n      this.removeModule(target);\n    }.bind(this)); //Import\n\n    $(document).on('click', '.modularity-js-thickbox-import', function (e) {\n      e.preventDefault();\n      var el = $(e.target).closest('a');\n      editingModule = $(e.target).closest('li');\n      _thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('import');\n      _prompt_modal_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].open($(e.target).closest('a').attr('href'));\n    }); // Edit\n\n    $(document).on('click', '.modularity-js-thickbox-open', function (e) {\n      e.preventDefault();\n      var el = $(e.target).closest('a');\n\n      if (el.attr('href').indexOf('post.php') > -1) {\n        _thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('edit');\n      }\n\n      editingModule = $(e.target).closest('li');\n      _prompt_modal_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].open($(e.target).closest('a').attr('href'));\n    }.bind(this));\n  };\n\n  return new Module();\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvZWRpdG9yL21vZHVsZS5qcz8wODRlIl0sIm5hbWVzIjpbIiQiLCJpbml0Q29tcGxldGVkIiwidGhpY2tib3hPcHRpb25zIiwiaXNfdGhpY2tib3giLCJlZGl0aW5nTW9kdWxlIiwiTW9kdWxlIiwicGFnZW5vdyIsImhhbmRsZUV2ZW50cyIsImxvYWRNb2R1bGVzIiwid2luZG93IiwibW9kdWxhcml0eV9wb3N0X2lkIiwiYmluZCIsInByb3RvdHlwZSIsInBvc3RJZCIsInJlcXVlc3QiLCJhY3Rpb24iLCJpZCIsInBvc3QiLCJhamF4dXJsIiwicmVzcG9uc2UiLCJlYWNoIiwic2lkZWJhciIsIm1vZHVsZXMiLCJzaWRlYmFyRWxlbWVudCIsImtleSIsImRhdGEiLCJoaWRkZW4iLCJpbmNvbXBhYmlsaXR5Iiwic2lkZWJhcl9pbmNvbXBhYmlsaXR5IiwiaXNFbXB0eU9iamVjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRNb2R1bGUiLCJwb3N0X3R5cGUiLCJwb3N0X3R5cGVfbmFtZSIsInBvc3RfdGl0bGUiLCJJRCIsImNvbHVtbldpZHRoIiwiaXNEZXByZWNhdGVkIiwicmVtb3ZlQ2xhc3MiLCJpc0VkaXRpbmdNb2R1bGUiLCJnZXRUaGlja0JveFVybCIsImJhc2UiLCJxdWVyeXN0cmluZyIsInBvc3RUeXBlIiwiYWRtaW5fdXJsIiwicGFyYW0iLCJnZXRJbXBvcnRVcmwiLCJ0YXJnZXQiLCJtb2R1bGVJZCIsIm1vZHVsZU5hbWUiLCJtb2R1bGVUaXRsZSIsImRlcHJlY2F0ZWQiLCJtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZSIsInRoaWNrYm94VXJsIiwiVGhpY2tib3giLCJzZXRQb3N0QWN0aW9uIiwiaW1wb3J0VXJsIiwiaXNIaWRkZW4iLCJzaWRlYmFySWQiLCJpdGVtUm93SWQiLCJIZWxwZXJzIiwidXVpZCIsImh0bWwiLCJsYW5naGlkZSIsIndpZHRoIiwid2lkdGhPcHRpb25zIiwibGFuZ2VkaXQiLCJsYW5naW1wb3J0IiwibGFuZ3JlbW92ZSIsImFwcGVuZCIsImluZGV4IiwiaXRlbSIsInZhbCIsImF0dHIiLCJzb3J0YWJsZSIsInVwZGF0ZU1vZHVsZSIsIm1vZHVsZSIsImZpbmQiLCJwb3N0X2lkIiwiY2hhbmdlIiwidGV4dCIsInRpdGxlIiwicmVtb3ZlTW9kdWxlIiwiY29uZmlybSIsImFjdGlvblJlbW92ZSIsInJlbW92ZSIsImRvY3VtZW50Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJjbG9zZXN0IiwiZWwiLCJNb2RhbCIsIm9wZW4iLCJpbmRleE9mIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVlLGdFQUFDLFVBQVVBLENBQVYsRUFBYTtBQUV6QixNQUFJQyxhQUFhLEdBQUcsS0FBcEI7QUFFQTs7Ozs7QUFJQSxNQUFJQyxlQUFlLEdBQUc7QUFDbEJDLGVBQVcsRUFBRTtBQURLLEdBQXRCO0FBSUEsTUFBSUMsYUFBYSxHQUFHLEtBQXBCOztBQUVBLFdBQVNDLE1BQVQsR0FBa0I7QUFDZEwsS0FBQyxDQUFDLFlBQVU7QUFDUixVQUFJLE9BQU9NLE9BQVAsS0FBbUIsV0FBbkIsSUFBa0NBLE9BQU8sSUFBSSw4QkFBakQsRUFBaUY7QUFDN0UsYUFBS0MsWUFBTDtBQUNBLGFBQUtDLFdBQUwsQ0FBaUJDLE1BQU0sQ0FBQ0Msa0JBQXhCO0FBQ0g7QUFDSixLQUxDLENBS0FDLElBTEEsQ0FLSyxJQUxMLENBQUQsQ0FBRDtBQU1IO0FBRUQ7Ozs7Ozs7QUFLQU4sUUFBTSxDQUFDTyxTQUFQLENBQWlCSixXQUFqQixHQUErQixVQUFVSyxNQUFWLEVBQWtCO0FBQzdDLFFBQUlDLE9BQU8sR0FBRztBQUNWQyxZQUFNLEVBQUUsa0JBREU7QUFFVkMsUUFBRSxFQUFFSDtBQUZNLEtBQWQ7QUFLQWIsS0FBQyxDQUFDaUIsSUFBRixDQUFPQyxPQUFQLEVBQWdCSixPQUFoQixFQUF5QixVQUFVSyxRQUFWLEVBQW9CO0FBQ3pDbkIsT0FBQyxDQUFD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LENBQWYiLCJmaWxlIjoiLi9zb3VyY2UvanMvZWRpdG9yL21vZHVsZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUaGlja2JveCBmcm9tICcuL3RoaWNrYm94LmpzJztcbmltcG9ydCBIZWxwZXJzIGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5qcyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vcHJvbXB0L21vZGFsLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgkKSB7XG5cbiAgICBsZXQgaW5pdENvbXBsZXRlZCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogT2JqZWN0IHRvIGNyZWF0ZSBUaGlja2JveCBxdWVyeXN0cmluZyBmcm9tXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBsZXQgdGhpY2tib3hPcHRpb25zID0ge1xuICAgICAgICBpc190aGlja2JveDogdHJ1ZSxcbiAgICB9O1xuXG4gICAgbGV0IGVkaXRpbmdNb2R1bGUgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIE1vZHVsZSgpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYWdlbm93ICE9PSAndW5kZWZpbmVkJyAmJiBwYWdlbm93ID09ICdhZG1pbl9wYWdlX21vZHVsYXJpdHktZWRpdG9yJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTW9kdWxlcyh3aW5kb3cubW9kdWxhcml0eV9wb3N0X2lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBzYXZlZCBtb2R1bGVzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIHBhZ2VcbiAgICAgKiBAcGFyYW0gIHtpbnRlZ2VyfSBwb3N0SWQgVGhlIHBvc3QgaWQgdG8gbG9hZCBtb2R1bGVzIGZyb21cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUubG9hZE1vZHVsZXMgPSBmdW5jdGlvbiAocG9zdElkKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgYWN0aW9uOiAnZ2V0X3Bvc3RfbW9kdWxlcycsXG4gICAgICAgICAgICBpZDogcG9zdElkXG4gICAgICAgIH07XG5cbiAgICAgICAgJC5wb3N0KGFqYXh1cmwsIHJlcXVlc3QsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJC5lYWNoKHJlc3BvbnNlLCBmdW5jdGlvbiAoc2lkZWJhciwgbW9kdWxlcykge1xuICAgICAgICAgICAgICAgIHZhciBzaWRlYmFyRWxlbWVudCA9ICQoJy5tb2R1bGFyaXR5LXNpZGViYXItYXJlYVtkYXRhLWFyZWEtaWQ9XCInICsgc2lkZWJhciArICdcIl0nKTtcblxuICAgICAgICAgICAgICAgICQuZWFjaChtb2R1bGVzLm1vZHVsZXMsIGZ1bmN0aW9uIChrZXksIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaGlkZGVuID09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluY29tcGFiaWxpdHkgPSAodHlwZW9mIGRhdGEuc2lkZWJhcl9pbmNvbXBhYmlsaXR5ICE9ICd1bmRlZmluZWQnICYmICEkLmlzRW1wdHlPYmplY3QoZGF0YS5zaWRlYmFyX2luY29tcGFiaWxpdHkpKSA/IEpTT04uc3RyaW5naWZ5KGRhdGEuc2lkZWJhcl9pbmNvbXBhYmlsaXR5KSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1vZHVsZShzaWRlYmFyRWxlbWVudCwgZGF0YS5wb3N0X3R5cGUsIGRhdGEucG9zdF90eXBlX25hbWUsIGRhdGEucG9zdF90aXRsZSwgZGF0YS5JRCwgZGF0YS5oaWRkZW4sIGRhdGEuY29sdW1uV2lkdGgsIGRhdGEuaXNEZXByZWNhdGVkLCBpbmNvbXBhYmlsaXR5KTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICAgICAgc2lkZWJhckVsZW1lbnQucmVtb3ZlQ2xhc3MoJ21vZHVsYXJpdHktc3Bpbm5lcicpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0Q29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICQoJy5tb2R1bGFyaXR5LXNpZGViYXItYXJlYScpLnJlbW92ZUNsYXNzKCdtb2R1bGFyaXR5LXNwaW5uZXInKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCAnanNvbicpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBlZGl0aW5nIG1vZHVsZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW4vc3RyaW5nfVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUuaXNFZGl0aW5nTW9kdWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZWRpdGluZ01vZHVsZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgdGhpY2tib3ggdXJsIHRvIG9wZW4gYSB0aGlja2JveCBpbiBjb3JyZWN0IG1vZGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGFjdGlvbiBTaG91bGQgYmUgXCJhZGRcIiBvciBcImVkaXRcIlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZGF0YSAgIFNob3VsZCBjb250YWluIGFkZGl0aW9uYWwgZGF0YSAoZm9yIG5vdyBzdXBwb3J0cyBcInBvc3RJZFwiIGFuZCBcInBvc3RUeXBlXCIpXG4gICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgVGhpY2tib3ggdXJsXG4gICAgICovXG4gICAgTW9kdWxlLnByb3RvdHlwZS5nZXRUaGlja0JveFVybCA9IGZ1bmN0aW9uIChhY3Rpb24sIGRhdGEpIHtcbiAgICAgICAgdmFyIGJhc2UgPSAnJztcbiAgICAgICAgdmFyIHF1ZXJ5c3RyaW5nID0ge307XG5cbiAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgYmFzZSA9ICdwb3N0LW5ldy5waHAnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgICAgICAgICBiYXNlID0gJ3Bvc3QucGhwJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5wb3N0SWQgPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHF1ZXJ5c3RyaW5nLnBvc3QgPSBkYXRhLnBvc3RJZDtcbiAgICAgICAgICAgIHF1ZXJ5c3RyaW5nLmFjdGlvbiA9ICdlZGl0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5wb3N0VHlwZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcXVlcnlzdHJpbmcucG9zdF90eXBlID0gZGF0YS5wb3N0VHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhZG1pbl91cmwgKyBiYXNlICsgJz8nICsgJC5wYXJhbShxdWVyeXN0cmluZykgKyAnJicgKyAkLnBhcmFtKHRoaWNrYm94T3B0aW9ucyk7XG4gICAgfTtcblxuICAgIE1vZHVsZS5wcm90b3R5cGUuZ2V0SW1wb3J0VXJsID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIGJhc2UgPSAnZWRpdC5waHAnO1xuICAgICAgICB2YXIgcXVlcnlzdHJpbmcgPSB7fTtcblxuICAgICAgICBxdWVyeXN0cmluZy5wb3N0X3R5cGUgPSBkYXRhLnBvc3RUeXBlO1xuXG4gICAgICAgIHJldHVybiBhZG1pbl91cmwgKyBiYXNlICsgJz8nICsgJC5wYXJhbShxdWVyeXN0cmluZykgKyAnJicgKyAkLnBhcmFtKHRoaWNrYm94T3B0aW9ucyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBtb2R1bGUgXCJyb3dcIiB0byB0aGUgdGFyZ2V0IHBsYWNlaG9sZGVyXG4gICAgICogQHBhcmFtIHtzZWxlY3Rvcn0gdGFyZ2V0ICAgVGhlIHRhcmdldCBzZWxlY3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZCAgIFRoZSBtb2R1bGUgaWQgc2x1Z1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVOYW1lIFRoZSBtb2R1bGUgbmFtZVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUuYWRkTW9kdWxlID0gZnVuY3Rpb24gKHRhcmdldCwgbW9kdWxlSWQsIG1vZHVsZU5hbWUsIG1vZHVsZVRpdGxlLCBwb3N0SWQsIGhpZGRlbiwgY29sdW1uV2lkdGgsIGlzRGVwcmVjYXRlZCwgaW5jb21wYWJpbGl0eSkge1xuICAgICAgICBtb2R1bGVUaXRsZSA9ICh0eXBlb2YgbW9kdWxlVGl0bGUgIT0gJ3VuZGVmaW5lZCcpID8gJzogJyArIG1vZHVsZVRpdGxlIDogJyc7XG4gICAgICAgIHBvc3RJZCA9ICh0eXBlb2YgcG9zdElkICE9ICd1bmRlZmluZWQnKSA/IHBvc3RJZCA6ICcnO1xuICAgICAgICBjb2x1bW5XaWR0aCA9ICh0eXBlb2YgY29sdW1uV2lkdGggIT0gJ3VuZGVmaW5lZCcpID8gY29sdW1uV2lkdGggOiAnJztcbiAgICAgICAgY29uc3QgZGVwcmVjYXRlZCA9IChpc0RlcHJlY2F0ZWQgPT09IHRydWUpID8gJzxzcGFuIGNsYXNzPVwibW9kdWxhcml0eS1kZXByZWNhdGVkXCInICtcbiAgICAgICAgICAgICcgc3R5bGU9XCJjb2xvcjojZmYwMDAwO1wiPignICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UuZGVwcmVjYXRlZCArICcpPC9zcGFuPicgOiAnJztcbiAgICAgICAgaW5jb21wYWJpbGl0eSA9ICh0eXBlb2YgaW5jb21wYWJpbGl0eSAhPSAndW5kZWZpbmVkJykgPyBpbmNvbXBhYmlsaXR5IDogJyc7XG5cbiAgICAgICAgLy8gR2V0IHRoaWNrYm94IHVybFxuICAgICAgICB2YXIgdGhpY2tib3hVcmwgPSB0aGlzLmdldFRoaWNrQm94VXJsKCdhZGQnLCB7XG4gICAgICAgICAgICBwb3N0VHlwZTogbW9kdWxlSWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2V0IHRoaWNrYm94IGFjdGlvblxuICAgICAgICBUaGlja2JveC5zZXRQb3N0QWN0aW9uKCdhZGQnKTtcblxuICAgICAgICBpZiAocG9zdElkKSB7XG4gICAgICAgICAgICB0aGlja2JveFVybCA9IHRoaXMuZ2V0VGhpY2tCb3hVcmwoJ2VkaXQnLCB7XG4gICAgICAgICAgICAgICAgcG9zdElkOiBwb3N0SWRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBUaGlja2JveC5zZXRQb3N0QWN0aW9uKCdlZGl0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgaW1wb3J0IHVybFxuICAgICAgICB2YXIgaW1wb3J0VXJsID0gdGhpcy5nZXRJbXBvcnRVcmwoe1xuICAgICAgICAgICAgcG9zdFR5cGU6IG1vZHVsZUlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrL3VuY2hlY2sgaGlkZGVuIGNoZWNrYm94XG4gICAgICAgIHZhciBpc0hpZGRlbiA9ICcnO1xuICAgICAgICBpZiAoaGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpc0hpZGRlbiA9ICdjaGVja2VkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaWRlYmFySWQgPSAkKHRhcmdldCkuZGF0YSgnYXJlYS1pZCcpO1xuICAgICAgICB2YXIgaXRlbVJvd0lkID0gSGVscGVycy51dWlkKCk7XG5cbiAgICAgICAgdmFyIGh0bWwgPSAnPGxpIGlkPVwicG9zdC0nICsgcG9zdElkICsgJ1wiIGRhdGEtbW9kdWxlLWlkPVwiJyArIG1vZHVsZUlkICsgJ1wiIGRhdGEtbW9kdWxlLXN0b3JlZC13aWR0aD1cIicgKyBjb2x1bW5XaWR0aCArICdcIiBkYXRhLXNpZGViYXItaW5jb21wYWJpbGl0eT1cXCcnICsgaW5jb21wYWJpbGl0eSArICdcXCc+XFxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbGluZS13cmFwcGVyXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LXNvcnRhYmxlLWhhbmRsZVwiPjwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLW5hbWVcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgJyArIG1vZHVsZU5hbWUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKyBkZXByZWNhdGVkICsgJ1xcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLXRpdGxlXCI+JyArIG1vZHVsZVRpdGxlICsgJzwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtaGlkZVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtoaWRkZW5dXCIgdmFsdWU9XCJoaWRkZW5cIiAnICsgaXNIaWRkZW4gKyAnIC8+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2hpZGUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtY29sdW1uc1wiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+JyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLndpZHRoICsgJzo8L2xhYmVsPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtjb2x1bW5XaWR0aF1cIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS53aWR0aE9wdGlvbnMgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLWFjdGlvbnNcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyB0aGlja2JveFVybCArICdcIiBkYXRhLW1vZHVsYXJpdHktbW9kYWwgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LW9wZW5cIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2VkaXQgKyAnPC9zcGFuPjwvYT5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyBpbXBvcnRVcmwgKyAnXCIgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LWltcG9ydFwiPjxzcGFuPicgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS5sYW5naW1wb3J0ICsgJzwvc3Bhbj48L2E+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcmVtb3ZlXCIgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZHVsZS1yZW1vdmVcIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ3JlbW92ZSArICc8L3NwYW4+PC9hPlxcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtwb3N0aWRdXCIgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLW1vZHVsZS1pZFwiIHZhbHVlPVwiJyArIHBvc3RJZCArICdcIiByZXF1aXJlZD5cXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgPC9saT4nO1xuXG4gICAgICAgIC8vU3RvcmVcbiAgICAgICAgJCh0YXJnZXQpLmFwcGVuZChodG1sKTtcblxuICAgICAgICAvL1VwZGF0ZSB3aWR0aCBzZWxlY3RvclxuICAgICAgICAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWEgPiBsaScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgICQoJy5tb2R1bGFyaXR5LW1vZHVsZS1jb2x1bW5zIHNlbGVjdCcsICQoaXRlbSkpLnZhbCgkKGl0ZW0pLmF0dHIoJ2RhdGEtbW9kdWxlLXN0b3JlZC13aWR0aCcpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9SZWZyZXNoXG4gICAgICAgICQoJy5tb2R1bGFyaXR5LWpzLXNvcnRhYmxlJykuc29ydGFibGUoJ3JlZnJlc2gnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIG1vZHVsZSBcInJvd1wiIGFmdGVyIGVkaXRpbmcgdGhlIG1vZHVsZSBwb3N0XG4gICAgICogQHBhcmFtICB7RE9NfSBtb2R1bGUgICAgTW9kdWxlIGRvbSBlbGVtZW50XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBkYXRhICAgVGhlIGRhdGFcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUudXBkYXRlTW9kdWxlID0gZnVuY3Rpb24gKG1vZHVsZSwgZGF0YSkge1xuXG4gICAgICAgIC8vIEhyZWZcbiAgICAgICAgbW9kdWxlLmZpbmQoJ2EubW9kdWxhcml0eS1qcy10aGlja2JveC1vcGVuJykuYXR0cignaHJlZicsIHRoaXMuZ2V0VGhpY2tCb3hVcmwoJ2VkaXQnLCB7XG4gICAgICAgICAgICBwb3N0SWQ6IGRhdGEucG9zdF9pZFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gUG9zdCBpZCBpbnB1dFxuICAgICAgICBtb2R1bGUuZmluZCgnaW5wdXQubW9kdWxhcml0eS1qcy1tb2R1bGUtaWQnKS52YWwoZGF0YS5wb3N0X2lkKS5jaGFuZ2UoKTtcblxuICAgICAgICAvLyBQb3N0IHRpdGxlXG4gICAgICAgIG1vZHVsZS5maW5kKCcubW9kdWxhcml0eS1tb2R1bGUtdGl0bGUnKS50ZXh0KCc6ICcgKyBkYXRhLnRpdGxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIG1vZHVsZSBcInJvd1wiIGZyb20gdGhlIHBsYWNlaG9sZGVyXG4gICAgICogQHBhcmFtICB7RE9NIEVsZW1lbnR9IG1vZHVsZSBUaGUgKHRvIGJlIHJlbW92ZWQpIG1vZHVsZSdzIGRvbSBlbGVtZW50XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLnJlbW92ZU1vZHVsZSA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgICAgaWYgKGNvbmZpcm0obW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UuYWN0aW9uUmVtb3ZlKSkge1xuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBldmVudHNcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUuaGFuZGxlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIFRyYXNoIGljb25cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2R1bGFyaXR5LW1vZHVsZS1yZW1vdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU1vZHVsZSh0YXJnZXQpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgIC8vSW1wb3J0XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC1pbXBvcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgZWwgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBlZGl0aW5nTW9kdWxlID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKTtcblxuICAgICAgICAgICAgVGhpY2tib3guc2V0UG9zdEFjdGlvbignaW1wb3J0Jyk7XG4gICAgICAgICAgICBNb2RhbC5vcGVuKCQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKS5hdHRyKCdocmVmJykpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFZGl0XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC1vcGVuJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpO1xuICAgICAgICAgICAgaWYgKGVsLmF0dHIoJ2hyZWYnKS5pbmRleE9mKCdwb3N0LnBocCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBUaGlja2JveC5zZXRQb3N0QWN0aW9uKCdlZGl0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgTW9kYWwub3BlbigkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IE1vZHVsZSgpO1xuXG59KShqUXVlcnkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./source/js/editor/module.js\n");

/***/ }),

/***/ "./source/js/editor/thickbox.js":
/*!**************************************!*\
  !*** ./source/js/editor/thickbox.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./module.js */ \"./source/js/editor/module.js\");\n/* harmony import */ var _prompt_modal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt/modal.js */ \"./source/js/prompt/modal.js\");\n/* harmony import */ var _autosave_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./autosave.js */ \"./source/js/editor/autosave.js\");\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  /**\n   * Attention: This variable should not be set manually\n   *\n   * Indicates if we are adding a new post or editing old one\n   * @type {String}\n   */\n  window.postAction = 'add';\n\n  function Thickbox() {}\n\n  Thickbox.prototype.getPostAction = function () {\n    console.log(\"Retrived post action: \" + window.postAction);\n    return window.postAction;\n  };\n\n  Thickbox.prototype.setPostAction = function (newPostAction) {\n    window.postAction = newPostAction;\n    console.log(\"Set post action: \" + window.postAction + \"(\" + newPostAction + \")\");\n  };\n\n  Thickbox.prototype.modulePostCreated = function (postId) {\n    _prompt_modal_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].close();\n    var module = _module_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEditingModule();\n    var request = {\n      action: 'get_post',\n      id: postId\n    };\n    $.post(ajaxurl, request, function (response) {\n      var data = {\n        post_id: response.ID,\n        title: response.post_title\n      };\n      _module_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateModule(module, data);\n      _autosave_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].save('form');\n    }, 'json');\n  };\n\n  return new Thickbox();\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvZWRpdG9yL3RoaWNrYm94LmpzP2VjYWQiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsInBvc3RBY3Rpb24iLCJUaGlja2JveCIsInByb3RvdHlwZSIsImdldFBvc3RBY3Rpb24iLCJjb25zb2xlIiwibG9nIiwic2V0UG9zdEFjdGlvbiIsIm5ld1Bvc3RBY3Rpb24iLCJtb2R1bGVQb3N0Q3JlYXRlZCIsInBvc3RJZCIsIk1vZGFsIiwiY2xvc2UiLCJtb2R1bGUiLCJNb2R1bGUiLCJpc0VkaXRpbmdNb2R1bGUiLCJyZXF1ZXN0IiwiYWN0aW9uIiwiaWQiLCJwb3N0IiwiYWpheHVybCIsInJlc3BvbnNlIiwiZGF0YSIsInBvc3RfaWQiLCJJRCIsInRpdGxlIiwicG9zdF90aXRsZSIsInVwZGF0ZU1vZHVsZSIsIkF1dG9zYXZlIiwic2F2ZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFZ0IsZ0VBQUMsVUFBVUEsQ0FBVixFQUFhO0FBRTFCOzs7Ozs7QUFNQUMsUUFBTSxDQUFDQyxVQUFQLEdBQW9CLEtBQXBCOztBQUVBLFdBQVNDLFFBQVQsR0FBb0IsQ0FFbkI7O0FBRURBLFVBQVEsQ0FBQ0MsU0FBVCxDQUFtQkMsYUFBbkIsR0FBbUMsWUFBWTtBQUUzQ0MsV0FBTyxDQUFDQyxHQUFSLENBQVksMkJBQTJCTixNQUFNLENBQUNDLFVBQTlDO0FBRUEsV0FBT0QsTUFBTSxDQUFDQyxVQUFkO0FBQ0gsR0FMRDs7QUFNQUMsVUFBUSxDQUFDQyxTQUFULENBQW1CSSxhQUFuQixHQUFtQyxVQUFVQyxhQUFWLEVBQXlCO0FBRXhEUixVQUFNLENBQUNDLFVBQVAsR0FBb0JPLGFBQXBCO0FBRUFILFdBQU8sQ0FBQ0MsR0FBUixDQUFZLHNCQUFzQk4sTUFBTSxDQUFDQyxVQUE3QixHQUEwQyxHQUExQyxHQUFnRE8sYUFBaEQsR0FBZ0UsR0FBNUU7QUFDSCxHQUxEOztBQU9BTixVQUFRLENBQUNDLFNBQVQsQ0FBbUJNLGlCQUFuQixHQUF1QyxVQUFVQyxNQUFWLEVBQWtCO0FBQ3JEQyw0REFBSyxDQUFDQyxLQUFOO0FBRUEsUUFBSUMsTUFBTSxHQUFHQyxrREFBTSxDQUFDQyxlQUFQLEVBQWI7QUFFQSxRQUFJQyxPQUFPLEdBQUc7QUFDVkMsWUFBTSxFQUFFLFVBREU7QUFFVkMsUUFBRSxFQUFFUjtBQUZNLEtBQWQ7QUFLQVgsS0FBQyxDQUFDb0IsSUFBRixDQUFPQyxPQUFQLEVBQWdCSixPQUFoQixFQUF5QixVQUFVSyxRQUFWLEVBQW9CO0FBQ3pDLFVBQUlDLElBQUksR0FBRztBQUNQQyxlQUFPLEVBQUVGLFFBQVEsQ0FBQ0csRUFEWDtBQUVQQyxhQUFLLEVBQUVKLFFBQVEsQ0FBQ0s7QUFGVCxPQUFYO0FBS0FaLHdEQUFNLENBQUNhLFlBQVAsQ0FBb0JkLE1BQXBCLEVBQTRCUyxJQUE1QjtBQUNBTSwwREFBUSxDQUFDQyxJQUFULENBQWMsTUFBZDtBQUNILEtBUkQsRUFRRyxNQVJIO0FBU0gsR0FuQkQ7O0FBcUJBLFNBQU8sSUFBSTNCLFFBQUosRUFBUDtBQUVILENBbERlLEVBa0RiNEIsTUFsRGEsQ0FBZiIsImZpbGUiOiIuL3NvdXJjZS9qcy9lZGl0b3IvdGhpY2tib3guanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTW9kdWxlIGZyb20gJy4vbW9kdWxlLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9wcm9tcHQvbW9kYWwuanMnO1xuaW1wb3J0IEF1dG9zYXZlIGZyb20gJy4vYXV0b3NhdmUuanMnO1xuXG4gZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgkKSB7XG5cbiAgICAvKipcbiAgICAgKiBBdHRlbnRpb246IFRoaXMgdmFyaWFibGUgc2hvdWxkIG5vdCBiZSBzZXQgbWFudWFsbHlcbiAgICAgKlxuICAgICAqIEluZGljYXRlcyBpZiB3ZSBhcmUgYWRkaW5nIGEgbmV3IHBvc3Qgb3IgZWRpdGluZyBvbGQgb25lXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICB3aW5kb3cucG9zdEFjdGlvbiA9ICdhZGQnO1xuXG4gICAgZnVuY3Rpb24gVGhpY2tib3goKSB7XG5cbiAgICB9XG5cbiAgICBUaGlja2JveC5wcm90b3R5cGUuZ2V0UG9zdEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIlJldHJpdmVkIHBvc3QgYWN0aW9uOiBcIiArIHdpbmRvdy5wb3N0QWN0aW9uKTsgXG5cbiAgICAgICAgcmV0dXJuIHdpbmRvdy5wb3N0QWN0aW9uOyBcbiAgICB9XG4gICAgVGhpY2tib3gucHJvdG90eXBlLnNldFBvc3RBY3Rpb24gPSBmdW5jdGlvbiAobmV3UG9zdEFjdGlvbikge1xuXG4gICAgICAgIHdpbmRvdy5wb3N0QWN0aW9uID0gbmV3UG9zdEFjdGlvbjsgXG5cbiAgICAgICAgY29uc29sZS5sb2coXCJTZXQgcG9zdCBhY3Rpb246IFwiICsgd2luZG93LnBvc3RBY3Rpb24gKyBcIihcIiArIG5ld1Bvc3RBY3Rpb24gKyBcIilcIilcbiAgICB9XG5cbiAgICBUaGlja2JveC5wcm90b3R5cGUubW9kdWxlUG9zdENyZWF0ZWQgPSBmdW5jdGlvbiAocG9zdElkKSB7XG4gICAgICAgIE1vZGFsLmNsb3NlKCk7XG5cbiAgICAgICAgdmFyIG1vZHVsZSA9IE1vZHVsZS5pc0VkaXRpbmdNb2R1bGUoKTtcblxuICAgICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2dldF9wb3N0JyxcbiAgICAgICAgICAgIGlkOiBwb3N0SWRcbiAgICAgICAgfTtcblxuICAgICAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwb3N0X2lkOiByZXNwb25zZS5JRCxcbiAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UucG9zdF90aXRsZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgTW9kdWxlLnVwZGF0ZU1vZHVsZShtb2R1bGUsIGRhdGEpO1xuICAgICAgICAgICAgQXV0b3NhdmUuc2F2ZSgnZm9ybScpO1xuICAgICAgICB9LCAnanNvbicpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFRoaWNrYm94KCk7XG5cbn0pKGpRdWVyeSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./source/js/editor/thickbox.js\n");

/***/ }),

/***/ "./source/js/helpers/helpers.js":
/*!**************************************!*\
  !*** ./source/js/helpers/helpers.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  function Helpers() {\n    $(function () {}.bind(this));\n  }\n\n  Helpers.prototype.uuid = function (separator) {\n    return Math.random().toString(36).substr(2, 9);\n  };\n\n  return new Helpers();\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvaGVscGVycy9oZWxwZXJzLmpzP2NjYTkiXSwibmFtZXMiOlsiJCIsIkhlbHBlcnMiLCJiaW5kIiwicHJvdG90eXBlIiwidXVpZCIsInNlcGFyYXRvciIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxnRUFBQyxVQUFVQSxDQUFWLEVBQWE7QUFFekIsV0FBU0MsT0FBVCxHQUFtQjtBQUNmRCxLQUFDLENBQUMsWUFBVSxDQUNYLENBREMsQ0FDQUUsSUFEQSxDQUNLLElBREwsQ0FBRCxDQUFEO0FBRUg7O0FBRURELFNBQU8sQ0FBQ0UsU0FBUixDQUFrQkMsSUFBbEIsR0FBeUIsVUFBVUMsU0FBVixFQUFxQjtBQUMxQyxXQUFPQyxJQUFJLENBQUNDLE1BQUwsR0FBY0MsUUFBZCxDQUF1QixFQUF2QixFQUEyQkMsTUFBM0IsQ0FBa0MsQ0FBbEMsRUFBcUMsQ0FBckMsQ0FBUDtBQUNILEdBRkQ7O0FBSUEsU0FBTyxJQUFJUixPQUFKLEVBQVA7QUFFSCxDQWJjLEVBYVpTLE1BYlksQ0FBZiIsImZpbGUiOiIuL3NvdXJjZS9qcy9oZWxwZXJzL2hlbHBlcnMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcblxuICAgIGZ1bmN0aW9uIEhlbHBlcnMoKSB7XG4gICAgICAgICQoZnVuY3Rpb24oKXtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBIZWxwZXJzLnByb3RvdHlwZS51dWlkID0gZnVuY3Rpb24gKHNlcGFyYXRvcikge1xuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IEhlbHBlcnMoKTtcblxufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./source/js/helpers/helpers.js\n");

/***/ }),

/***/ "./source/js/helpers/widget.js":
/*!*************************************!*\
  !*** ./source/js/helpers/widget.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../editor/thickbox.js */ \"./source/js/editor/thickbox.js\");\n/* harmony import */ var _editor_module_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../editor/module.js */ \"./source/js/editor/module.js\");\n/* harmony import */ var _prompt_modal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../prompt/modal.js */ \"./source/js/prompt/modal.js\");\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  var editingWidget = false;\n\n  function Widget() {\n    $(function () {\n      /* Import */\n      $(document).on('click', '.modularity-js-thickbox-widget-import-widget', function (e) {\n        e.preventDefault();\n        editingWidget = $(e.target).parents('.widget-inside');\n        var importUrl = _editor_module_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getImportUrl({\n          postType: $(e.target).parents('.widget-inside').find('.modularity-widget-module-type select').val()\n        });\n        _editor_module_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].editingModule = $(e.target).closest('.widget-inside');\n        _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('import-widget');\n        _prompt_modal_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].open(importUrl);\n      });\n      /* Edit */\n\n      $(document).on('click', '.modularity-js-thickbox-open-widget', function (e) {\n        e.preventDefault();\n        var el = $(e.target).closest('a');\n\n        if (el.attr('href').indexOf('post.php') > -1) {\n          _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('edit');\n        }\n\n        var editingModule = $(e.target).closest('li');\n        _prompt_modal_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].open($(e.target).closest('a').attr('href'));\n      }.bind(this));\n    }.bind(this));\n  }\n\n  Widget.prototype.isEditingWidget = function () {\n    return editingWidget;\n  };\n\n  Widget.prototype.updateWidget = function (widget, data) {\n    $(widget).find('.modularity-widget-module-id-span').html(data.post_id);\n    $(widget).find('.modularity-widget-module-id').val(data.post_id);\n    $(widget).find('.modularity-widget-module-edit').attr('href', 'post.php?post=' + data.post_id + '&action=edit&is_thickbox=true').removeClass('hidden');\n    $(widget).find('.modularity-widget-module-title-span').html(data.title);\n    $(widget).find('.modularity-widget-module-title').val(data.title);\n  };\n\n  return new Widget();\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvaGVscGVycy93aWRnZXQuanM/MjNlNCJdLCJuYW1lcyI6WyIkIiwiZWRpdGluZ1dpZGdldCIsIldpZGdldCIsImRvY3VtZW50Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJwYXJlbnRzIiwiaW1wb3J0VXJsIiwiTW9kdWxlIiwiZ2V0SW1wb3J0VXJsIiwicG9zdFR5cGUiLCJmaW5kIiwidmFsIiwiZWRpdGluZ01vZHVsZSIsImNsb3Nlc3QiLCJUaGlja2JveCIsInNldFBvc3RBY3Rpb24iLCJNb2RhbCIsIm9wZW4iLCJlbCIsImF0dHIiLCJpbmRleE9mIiwiYmluZCIsInByb3RvdHlwZSIsImlzRWRpdGluZ1dpZGdldCIsInVwZGF0ZVdpZGdldCIsIndpZGdldCIsImRhdGEiLCJodG1sIiwicG9zdF9pZCIsInJlbW92ZUNsYXNzIiwidGl0bGUiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR2UsZ0VBQUMsVUFBVUEsQ0FBVixFQUFhO0FBRXpCLE1BQUlDLGFBQWEsR0FBRyxLQUFwQjs7QUFFQSxXQUFTQyxNQUFULEdBQWtCO0FBQ2RGLEtBQUMsQ0FBQyxZQUFVO0FBRVI7QUFDQUEsT0FBQyxDQUFDRyxRQUFELENBQUQsQ0FBWUMsRUFBWixDQUFlLE9BQWYsRUFBd0IsOENBQXhCLEVBQXdFLFVBQVVDLENBQVYsRUFBYTtBQUNqRkEsU0FBQyxDQUFDQyxjQUFGO0FBRUFMLHFCQUFhLEdBQUdELENBQUMsQ0FBQ0ssQ0FBQyxDQUFDRSxNQUFILENBQUQsQ0FBWUMsT0FBWixDQUFvQixnQkFBcEIsQ0FBaEI7QUFFQSxZQUFJQyxTQUFTLEdBQUdDLHlEQUFNLENBQUNDLFlBQVAsQ0FBb0I7QUFDaENDLGtCQUFRLEVBQUVaLENBQUMsQ0FBQ0ssQ0FBQyxDQUFDRSxNQUFILENBQUQsQ0FBWUMsT0FBWixDQUFvQixnQkFBcEIsRUFBc0NLLElBQXRDLENBQTJDLHVDQUEzQyxFQUFvRkMsR0FBcEY7QUFEc0IsU0FBcEIsQ0FBaEI7QUFJQUosaUVBQU0sQ0FBQ0ssYUFBUCxHQUF1QmYsQ0FBQyxDQUFDSyxDQUFDLENBQUNFLE1BQUgsQ0FBRCxDQUFZUyxPQUFaLENBQW9CLGdCQUFwQixDQUF2QjtBQUVBQyxtRUFBUSxDQUFDQyxhQUFULENBQXVCLGVBQXZCO0FBQ0FDLGdFQUFLLENBQUNDLElBQU4sQ0FBV1gsU0FBWDtBQUNILE9BYkQ7QUFnQkE7O0FBQ0FULE9BQUMsQ0FBQ0csUUFBRCxDQUFELENBQVlDLEVBQVosQ0FBZSxPQUFmLEVBQXdCLHFDQUF4QixFQUErRCxVQUFVQyxDQUFWLEVBQWE7QUFDeEVBLFNBQUMsQ0FBQ0MsY0FBRjtBQUVBLFlBQUllLEVBQUUsR0FBR3JCLENBQUMsQ0FBQ0ssQ0FBQyxDQUFDRSxNQUFILENBQUQsQ0FBWVMsT0FBWixDQUFvQixHQUFwQixDQUFUOztBQUNBLFlBQUlLLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRLE1BQVIsRUFBZ0JDLE9BQWhCLENBQXdCLFVBQXhCLElBQXNDLENBQUMsQ0FBM0MsRUFBOEM7QUFDMUNOLHFFQUFRLENBQUNDLGFBQVQsQ0FBdUIsTUFBdkI7QUFDSDs7QUFFRCxZQUFNSCxhQUFhLEdBQUdmLENBQUMsQ0FBQ0ssQ0FBQyxDQUFDRSxNQUFILENBQUQsQ0FBWVMsT0FBWixDQUFvQixJQUFwQixDQUF0QjtBQUVBRyxnRUFBSyxDQUFDQyxJQUFOLENBQVdwQixDQUFDLENBQUNLLENBQUMsQ0FBQ0UsTUFBSCxDQUFELENBQVlTLE9BQVosQ0FBb0IsR0FBcEIsRUFBeUJNLElBQXpCLENBQThCLE1BQTlCLENBQVg7QUFDSCxPQVg4RCxDQVc3REUsSUFYNkQsQ0FXeEQsSUFYd0QsQ0FBL0Q7QUFjSCxLQWxDQyxDQWtDQUEsSUFsQ0EsQ0FrQ0ssSUFsQ0wsQ0FBRCxDQUFEO0FBbUNIOztBQUVEdEIsUUFBTSxDQUFDdUIsU0FBUCxDQUFpQkMsZUFBakIsR0FBbUMsWUFBWTtBQUMzQyxXQUFPekIsYUFBUDtBQUNILEdBRkQ7O0FBSUFDLFFBQU0sQ0FBQ3VCLFNBQVAsQ0FBaUJFLFlBQWpCLEdBQWdDLFVBQVVDLE1BQVYsRUFBa0JDLElBQWxCLEVBQXdCO0FBQ3BEN0IsS0FBQyxDQUFDNEIsTUFBRCxDQUFELENBQVVmLElBQVYsQ0FBZSxtQ0FBZixFQUFvRGlCLElBQXBELENBQXlERCxJQUFJLENBQUNFLE9BQTlEO0FBQ0EvQixLQUFDLENBQUM0QixNQUFELENBQUQsQ0FBVWYsSUFBVixDQUFlLDhCQUFmLEVBQStDQyxHQUEvQyxDQUFtRGUsSUFBSSxDQUFDRSxPQUF4RDtBQUNBL0IsS0FBQyxDQUFDNEIsTUFBRCxDQUFELENBQVVmLElBQVYsQ0FBZSxnQ0FBZixFQUFpRFMsSUFBakQsQ0FBc0QsTUFBdEQsRUFBNkQsbUJBQW1CTyxJQUFJLENBQUNFLE9BQXhCLEdBQWtDLCtCQUEvRixFQUFnSUMsV0FBaEksQ0FBNEksUUFBNUk7QUFDQWhDLEtBQUMsQ0FBQzRCLE1BQUQsQ0FBRCxDQUFVZixJQUFWLENBQWUsc0NBQWYsRUFBdURpQixJQUF2RCxDQUE0REQsSUFBSSxDQUFDSSxLQUFqRTtBQUNBakMsS0FBQyxDQUFDNEIsTUFBRCxDQUFELENBQVVmLElBQVYsQ0FBZSxpQ0FBZixFQUFrREMsR0FBbEQsQ0FBc0RlLElBQUksQ0FBQ0ksS0FBM0Q7QUFDSCxHQU5EOztBQVFBLFNBQU8sSUFBSS9CLE1BQUosRUFBUDtBQUVILENBeERjLEVBd0RaZ0MsTUF4RFksQ0FBZiIsImZpbGUiOiIuL3NvdXJjZS9qcy9oZWxwZXJzL3dpZGdldC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUaGlja2JveCBmcm9tICcuLi9lZGl0b3IvdGhpY2tib3guanMnO1xuaW1wb3J0IE1vZHVsZSBmcm9tICcuLi9lZGl0b3IvbW9kdWxlLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9wcm9tcHQvbW9kYWwuanMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIGVkaXRpbmdXaWRnZXQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIFdpZGdldCgpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAvKiBJbXBvcnQgKi9cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC13aWRnZXQtaW1wb3J0LXdpZGdldCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgZWRpdGluZ1dpZGdldCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy53aWRnZXQtaW5zaWRlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0VXJsID0gTW9kdWxlLmdldEltcG9ydFVybCh7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RUeXBlOiAkKGUudGFyZ2V0KS5wYXJlbnRzKCcud2lkZ2V0LWluc2lkZScpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdHlwZSBzZWxlY3QnKS52YWwoKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgTW9kdWxlLmVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcud2lkZ2V0LWluc2lkZScpO1xuXG4gICAgICAgICAgICAgICAgVGhpY2tib3guc2V0UG9zdEFjdGlvbignaW1wb3J0LXdpZGdldCcpO1xuICAgICAgICAgICAgICAgIE1vZGFsLm9wZW4oaW1wb3J0VXJsKTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIC8qIEVkaXQgKi9cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC1vcGVuLXdpZGdldCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpO1xuICAgICAgICAgICAgICAgIGlmIChlbC5hdHRyKCdocmVmJykuaW5kZXhPZigncG9zdC5waHAnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIFRoaWNrYm94LnNldFBvc3RBY3Rpb24oJ2VkaXQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBlZGl0aW5nTW9kdWxlID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKTtcblxuICAgICAgICAgICAgICAgIE1vZGFsLm9wZW4oJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuXG5cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBXaWRnZXQucHJvdG90eXBlLmlzRWRpdGluZ1dpZGdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGVkaXRpbmdXaWRnZXQ7XG4gICAgfTtcblxuICAgIFdpZGdldC5wcm90b3R5cGUudXBkYXRlV2lkZ2V0ID0gZnVuY3Rpb24gKHdpZGdldCwgZGF0YSkge1xuICAgICAgICAkKHdpZGdldCkuZmluZCgnLm1vZHVsYXJpdHktd2lkZ2V0LW1vZHVsZS1pZC1zcGFuJykuaHRtbChkYXRhLnBvc3RfaWQpO1xuICAgICAgICAkKHdpZGdldCkuZmluZCgnLm1vZHVsYXJpdHktd2lkZ2V0LW1vZHVsZS1pZCcpLnZhbChkYXRhLnBvc3RfaWQpO1xuICAgICAgICAkKHdpZGdldCkuZmluZCgnLm1vZHVsYXJpdHktd2lkZ2V0LW1vZHVsZS1lZGl0JykuYXR0cignaHJlZicsJ3Bvc3QucGhwP3Bvc3Q9JyArIGRhdGEucG9zdF9pZCArICcmYWN0aW9uPWVkaXQmaXNfdGhpY2tib3g9dHJ1ZScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJCh3aWRnZXQpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdGl0bGUtc3BhbicpLmh0bWwoZGF0YS50aXRsZSk7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLXRpdGxlJykudmFsKGRhdGEudGl0bGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFdpZGdldCgpO1xuXG59KShqUXVlcnkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./source/js/helpers/widget.js\n");

/***/ }),

/***/ "./source/js/modularity-editor-modal.js":
/*!**********************************************!*\
  !*** ./source/js/modularity-editor-modal.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./editor/thickbox.js */ \"./source/js/editor/thickbox.js\");\n/* harmony import */ var _editor_module_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editor/module.js */ \"./source/js/editor/module.js\");\n/* harmony import */ var _editor_autosave_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./editor/autosave.js */ \"./source/js/editor/autosave.js\");\n/* harmony import */ var _prompt_modal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./prompt/modal.js */ \"./source/js/prompt/modal.js\");\n/* harmony import */ var _helpers_widget_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers/widget.js */ \"./source/js/helpers/widget.js\");\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  /**\n   * Add new post callback\n   */\n  if (_editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPostAction() == 'add' && window.modularity_post_action == '') {\n    _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].modulePostCreated(window.modularity_post_id);\n  }\n\n  if (_editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPostAction() == 'edit-inline-saved') {\n    parent.location.reload();\n  }\n  /**\n   * Edit post callback\n   */\n\n\n  if (_editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPostAction() == 'edit' && window.modularity_post_action == '') {\n    jQuery(document).on('click', '#publish', function (e) {\n      _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('add');\n    });\n  }\n  /**\n   * Edit post callback\n   */\n\n\n  if (_editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPostAction() == 'edit-inline-not-saved') {\n    jQuery(document).on('click', '#publish', function (e) {\n      _editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setPostAction('edit-inline-saved');\n    });\n  }\n  /**\n   * Import post modifications and callback\n   */\n\n\n  if (_editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPostAction() == 'import') {\n    $('.check-column input[type=\"checkbox\"]').remove();\n    $('.wp-list-table').addClass('modularity-wp-list-table');\n    $('tbody .check-column').addClass('modularity-import-column').append('<button class=\"button modularity-import-button\" data-modularity-action=\"import\">Import</button>');\n    $('#posts-filter').append('<input type=\"hidden\" name=\"is_thickbox\" value=\"true\">');\n    $(document).on('click', '[data-modularity-action=\"import\"]', function (e) {\n      e.preventDefault();\n      var postId = $(e.target).closest('tr').attr('id');\n      postId = postId.split('-')[1];\n      var module = _editor_module_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isEditingModule();\n      var request = {\n        action: 'get_post',\n        id: postId\n      };\n      $('body').addClass('modularity-loader-takeover');\n      $.post(ajaxurl, request, function (response) {\n        var data = {\n          post_id: response.ID,\n          title: response.post_title\n        };\n        _editor_module_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateModule(module, data);\n        _editor_autosave_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].save('form');\n        _prompt_modal_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].close();\n      }, 'json');\n    });\n  }\n  /**\n   * Import post modifications and callback\n   */\n\n\n  if (_editor_thickbox_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPostAction() == 'import-widget') {\n    $('.check-column input[type=\"checkbox\"]').remove();\n    $('.wp-list-table').addClass('modularity-wp-list-table');\n    $('tbody .check-column').addClass('modularity-import-column').append('<button class=\"button modularity-import-button\" data-modularity-action=\"import\">Import</button>');\n    $(document).on('click', '[data-modularity-action=\"import\"]', function (e) {\n      e.preventDefault();\n      var postId = $(e.target).closest('tr').attr('id');\n      postId = postId.split('-')[1];\n      var widget = _helpers_widget_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isEditingWidget();\n      var request = {\n        action: 'get_post',\n        id: postId\n      };\n      $('body').addClass('modularity-loader-takeover');\n      $.post(ajaxurl, request, function (response) {\n        var data = {\n          post_id: response.ID,\n          title: response.post_title\n        };\n        _helpers_widget_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].updateWidget(widget, data);\n        _prompt_modal_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].close();\n      }, 'json');\n    });\n  }\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvbW9kdWxhcml0eS1lZGl0b3ItbW9kYWwuanM/ODBjNSJdLCJuYW1lcyI6WyIkIiwiVGhpY2tib3giLCJnZXRQb3N0QWN0aW9uIiwid2luZG93IiwibW9kdWxhcml0eV9wb3N0X2FjdGlvbiIsIm1vZHVsZVBvc3RDcmVhdGVkIiwibW9kdWxhcml0eV9wb3N0X2lkIiwicGFyZW50IiwibG9jYXRpb24iLCJyZWxvYWQiLCJqUXVlcnkiLCJkb2N1bWVudCIsIm9uIiwiZSIsInNldFBvc3RBY3Rpb24iLCJyZW1vdmUiLCJhZGRDbGFzcyIsImFwcGVuZCIsInByZXZlbnREZWZhdWx0IiwicG9zdElkIiwidGFyZ2V0IiwiY2xvc2VzdCIsImF0dHIiLCJzcGxpdCIsIm1vZHVsZSIsIk1vZHVsZSIsImlzRWRpdGluZ01vZHVsZSIsInJlcXVlc3QiLCJhY3Rpb24iLCJpZCIsInBvc3QiLCJhamF4dXJsIiwicmVzcG9uc2UiLCJkYXRhIiwicG9zdF9pZCIsIklEIiwidGl0bGUiLCJwb3N0X3RpdGxlIiwidXBkYXRlTW9kdWxlIiwiQXV0b3NhdmUiLCJzYXZlIiwiTW9kYWwiLCJjbG9zZSIsIndpZGdldCIsIldpZGdldCIsImlzRWRpdGluZ1dpZGdldCIsInVwZGF0ZVdpZGdldCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVlLGdFQUFDLFVBQVVBLENBQVYsRUFBYTtBQUV6Qjs7O0FBR0EsTUFBSUMsMkRBQVEsQ0FBQ0MsYUFBVCxNQUE0QixLQUE1QixJQUFxQ0MsTUFBTSxDQUFDQyxzQkFBUCxJQUFpQyxFQUExRSxFQUE4RTtBQUMxRUgsK0RBQVEsQ0FBQ0ksaUJBQVQsQ0FBMkJGLE1BQU0sQ0FBQ0csa0JBQWxDO0FBQ0g7O0FBRUQsTUFBSUwsMkRBQVEsQ0FBQ0MsYUFBVCxNQUE0QixtQkFBaEMsRUFBcUQ7QUFDakRLLFVBQU0sQ0FBQ0MsUUFB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QUFDLENBQUNLLGNBQUY7QUFFQSxVQUFJQyxNQUFNLEdBQUduQixDQUFDLENBQUNhLENBQUMsQ0FBQ08sTUFBSCxDQUFELENBQVlDLE9BQVosQ0FBb0IsSUFBcEIsRUFBMEJDLElBQTFCLENBQStCLElBQS9CLENBQWI7QUFDQUgsWUFBTSxHQUFHQSxNQUFNLENBQUNJLEtBQVAsQ0FBYSxHQUFiLEVBQWtCLENBQWxCLENBQVQ7QUFFQSxVQUFJb0IsTUFBTSxHQUFHQywwREFBTSxDQUFDQyxlQUFQLEVBQWI7QUFFQSxVQUFJbEIsT0FBTyxHQUFHO0FBQ1ZDLGNBQU0sRUFBRSxVQURFO0FBRVZDLFVBQUUsRUFBRVY7QUFGTSxPQUFkO0FBS0FuQixPQUFDLENBQUMsTUFBRCxDQUFELENBQVVnQixRQUFWLENBQW1CLDRCQUFuQjtBQUVBaEIsT0FBQyxDQUFDOEIsSUFBRixDQUFPQyxPQUFQLEVBQWdCSixPQUFoQixFQUF5QixVQUFVSyxRQUFWLEVBQW9CO0FBQ3pDLFlBQUlDLElBQUksR0FBRztBQUNQQyxpQkFBTyxFQUFFRixRQUFRLENBQUNHLEVBRFg7QUFFUEMsZUFBSyxFQUFFSixRQUFRLENBQUNLO0FBRlQsU0FBWDtBQUtBTyxrRUFBTSxDQUFDRSxZQUFQLENBQW9CSCxNQUFwQixFQUE0QlYsSUFBNUI7QUFDQVEsZ0VBQUssQ0FBQ0MsS0FBTjtBQUVILE9BVEQsRUFTRyxNQVRIO0FBVUgsS0F6QkQ7QUEwQkg7QUFFSixDQXhHYyxFQXdHWmhDLE1BeEdZLENBQWYiLCJmaWxlIjoiLi9zb3VyY2UvanMvbW9kdWxhcml0eS1lZGl0b3ItbW9kYWwuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGhpY2tib3ggZnJvbSAnLi9lZGl0b3IvdGhpY2tib3guanMnO1xuaW1wb3J0IE1vZHVsZSBmcm9tICcuL2VkaXRvci9tb2R1bGUuanMnO1xuaW1wb3J0IEF1dG9zYXZlIGZyb20gJy4vZWRpdG9yL2F1dG9zYXZlLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuL3Byb21wdC9tb2RhbC5qcyc7XG5pbXBvcnQgV2lkZ2V0IGZyb20gJy4vaGVscGVycy93aWRnZXQuanMnO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcblxuICAgIC8qKlxuICAgICAqIEFkZCBuZXcgcG9zdCBjYWxsYmFja1xuICAgICAqL1xuICAgIGlmIChUaGlja2JveC5nZXRQb3N0QWN0aW9uKCkgPT0gJ2FkZCcgJiYgd2luZG93Lm1vZHVsYXJpdHlfcG9zdF9hY3Rpb24gPT0gJycpIHtcbiAgICAgICAgVGhpY2tib3gubW9kdWxlUG9zdENyZWF0ZWQod2luZG93Lm1vZHVsYXJpdHlfcG9zdF9pZCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChUaGlja2JveC5nZXRQb3N0QWN0aW9uKCkgPT0gJ2VkaXQtaW5saW5lLXNhdmVkJykge1xuICAgICAgICBwYXJlbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEVkaXQgcG9zdCBjYWxsYmFja1xuICAgICAqL1xuICAgIGlmIChUaGlja2JveC5nZXRQb3N0QWN0aW9uKCkgPT0gJ2VkaXQnICYmIHdpbmRvdy5tb2R1bGFyaXR5X3Bvc3RfYWN0aW9uID09ICcnKSB7XG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwdWJsaXNoJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIFRoaWNrYm94LnNldFBvc3RBY3Rpb24oJ2FkZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRWRpdCBwb3N0IGNhbGxiYWNrXG4gICAgICovXG4gICAgaWYgKFRoaWNrYm94LmdldFBvc3RBY3Rpb24oKSA9PSAnZWRpdC1pbmxpbmUtbm90LXNhdmVkJykge1xuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcHVibGlzaCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBUaGlja2JveC5zZXRQb3N0QWN0aW9uKCdlZGl0LWlubGluZS1zYXZlZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogSW1wb3J0IHBvc3QgbW9kaWZpY2F0aW9ucyBhbmQgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBpZiAoVGhpY2tib3guZ2V0UG9zdEFjdGlvbigpID09ICdpbXBvcnQnKSB7XG4gICAgICAgICQoJy5jaGVjay1jb2x1bW4gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykucmVtb3ZlKCk7XG4gICAgICAgICQoJy53cC1saXN0LXRhYmxlJykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktd3AtbGlzdC10YWJsZScpO1xuICAgICAgICAkKCd0Ym9keSAuY2hlY2stY29sdW1uJykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktaW1wb3J0LWNvbHVtbicpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBtb2R1bGFyaXR5LWltcG9ydC1idXR0b25cIiBkYXRhLW1vZHVsYXJpdHktYWN0aW9uPVwiaW1wb3J0XCI+SW1wb3J0PC9idXR0b24+Jyk7XG4gICAgICAgICQoJyNwb3N0cy1maWx0ZXInKS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImlzX3RoaWNrYm94XCIgdmFsdWU9XCJ0cnVlXCI+Jyk7XG4gICAgICAgIFxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtbW9kdWxhcml0eS1hY3Rpb249XCJpbXBvcnRcIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcG9zdElkID0gJChlLnRhcmdldCkuY2xvc2VzdCgndHInKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgcG9zdElkID0gcG9zdElkLnNwbGl0KCctJylbMV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBNb2R1bGUuaXNFZGl0aW5nTW9kdWxlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2dldF9wb3N0JyxcbiAgICAgICAgICAgICAgICBpZDogcG9zdElkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktbG9hZGVyLXRha2VvdmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQucG9zdChhamF4dXJsLCByZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdF9pZDogcmVzcG9uc2UuSUQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5wb3N0X3RpdGxlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBNb2R1bGUudXBkYXRlTW9kdWxlKG1vZHVsZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgQXV0b3NhdmUuc2F2ZSgnZm9ybScpO1xuICAgICAgICAgICAgICAgIE1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB9LCAnanNvbicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogSW1wb3J0IHBvc3QgbW9kaWZpY2F0aW9ucyBhbmQgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBpZiAoVGhpY2tib3guZ2V0UG9zdEFjdGlvbigpID09ICdpbXBvcnQtd2lkZ2V0Jykge1xuICAgICAgICAkKCcuY2hlY2stY29sdW1uIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLnJlbW92ZSgpO1xuICAgICAgICAkKCcud3AtbGlzdC10YWJsZScpLmFkZENsYXNzKCdtb2R1bGFyaXR5LXdwLWxpc3QtdGFibGUnKTtcbiAgICAgICAgJCgndGJvZHkgLmNoZWNrLWNvbHVtbicpLmFkZENsYXNzKCdtb2R1bGFyaXR5LWltcG9ydC1jb2x1bW4nKS5hcHBlbmQoJzxidXR0b24gY2xhc3M9XCJidXR0b24gbW9kdWxhcml0eS1pbXBvcnQtYnV0dG9uXCIgZGF0YS1tb2R1bGFyaXR5LWFjdGlvbj1cImltcG9ydFwiPkltcG9ydDwvYnV0dG9uPicpO1xuICAgICAgICBcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLW1vZHVsYXJpdHktYWN0aW9uPVwiaW1wb3J0XCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHBvc3RJZCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ3RyJykuYXR0cignaWQnKTtcbiAgICAgICAgICAgIHBvc3RJZCA9IHBvc3RJZC5zcGxpdCgnLScpWzFdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgd2lkZ2V0ID0gV2lkZ2V0LmlzRWRpdGluZ1dpZGdldCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdnZXRfcG9zdCcsXG4gICAgICAgICAgICAgICAgaWQ6IHBvc3RJZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdtb2R1bGFyaXR5LWxvYWRlci10YWtlb3ZlcicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RfaWQ6IHJlc3BvbnNlLklELFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UucG9zdF90aXRsZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgV2lkZ2V0LnVwZGF0ZVdpZGdldCh3aWRnZXQsIGRhdGEpO1xuICAgICAgICAgICAgICAgIE1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LCAnanNvbicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG59KShqUXVlcnkpO1xuXG5cblxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./source/js/modularity-editor-modal.js\n");

/***/ }),

/***/ "./source/js/prompt/modal.js":
/*!***********************************!*\
  !*** ./source/js/prompt/modal.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function ($) {\n  var isOpen = false;\n\n  function Modal() {\n    this.handleEvents();\n  }\n\n  Modal.prototype.open = function (url) {\n    $('body').addClass('modularity-modal-open').append('\\\n            <div id=\"modularity-modal\">\\\n                <div class=\"modularity-modal-wrapper\">\\\n                    <button class=\"modularity-modal-close\" data-modularity-modal-action=\"close\">&times; ' + modularityAdminLanguage.close + '</button>\\\n                    <div class=\"modularity-modal-spinner-container\" id=\"modularity-iframe-loader\"><span class=\"modularity-modal-spinner\"></span></div>\\\n                    <iframe class=\"modularity-modal-iframe\" src=\"' + url + '\" frameborder=\"0\" onload=\"document.getElementById(\\'modularity-iframe-loader\\').style.display=\\'none\\';\" allowtransparency></iframe>\\\n                </div>\\\n            </div>\\\n        ');\n    isOpen = true;\n  };\n\n  Modal.prototype.close = function () {\n    $('body').removeClass('modularity-modal-open');\n    $('#modularity-modal').remove();\n    isOpen = false;\n  };\n\n  Modal.prototype.handleEvents = function () {\n    $(document).on('click', '[data-modularity-modal-action=\"close\"]', function (e) {\n      e.preventDefault();\n      this.close();\n    }.bind(this));\n  };\n\n  return new Modal();\n})(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvcHJvbXB0L21vZGFsLmpzPzA5MzkiXSwibmFtZXMiOlsiJCIsImlzT3BlbiIsIk1vZGFsIiwiaGFuZGxlRXZlbnRzIiwicHJvdG90eXBlIiwib3BlbiIsInVybCIsImFkZENsYXNzIiwiYXBwZW5kIiwibW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UiLCJjbG9zZSIsInJlbW92ZUNsYXNzIiwicmVtb3ZlIiwiZG9jdW1lbnQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImJpbmQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJBQUFBO0FBQWdCLGdFQUFDLFVBQVVBLENBQVYsRUFBYTtBQUUxQixNQUFJQyxNQUFNLEdBQUcsS0FBYjs7QUFFQSxXQUFTQyxLQUFULEdBQWlCO0FBQ2IsU0FBS0MsWUFBTDtBQUNIOztBQUVERCxPQUFLLENBQUNFLFNBQU4sQ0FBZ0JDLElBQWhCLEdBQXVCLFVBQVVDLEdBQVYsRUFBZTtBQUNsQ04sS0FBQyxDQUFDLE1BQUQsQ0FBRCxDQUFVTyxRQUFWLENBQW1CLHVCQUFuQixFQUE0Q0MsTUFBNUMsQ0FBbUQ7Ozt5R0FBQSxHQUdpREMsdUJBQXVCLENBQUNDLEtBSHpFLEdBR2lGOztrRUFIakYsR0FLVUosR0FMVixHQUtnQjs7O1NBTG5FO0FBVUFMLFVBQU0sR0FBRyxJQUFUO0FBQ0gsR0FaRDs7QUFjQUMsT0FBSyxDQUFDRSxTQUFOLENBQWdCTSxLQUFoQixHQUF3QixZQUFZO0FBQ2hDVixLQUFDLENBQUMsTUFBRCxDQUFELENBQVVXLFdBQVYsQ0FBc0IsdUJBQXRCO0FBQ0FYLEtBQUMsQ0FBQyxtQkFBRCxDQUFELENBQXVCWSxNQUF2QjtBQUNBWCxVQUFNLEdBQUcsS0FBVDtBQUNILEdBSkQ7O0FBTUFDLE9BQUssQ0FBQ0UsU0FBTixDQUFnQkQsWUFBaEIsR0FBK0IsWUFBWTtBQUN2Q0gsS0FBQyxDQUFDYSxRQUFELENBQUQsQ0FBWUMsRUFBWixDQUFlLE9BQWYsRUFBd0Isd0NBQXhCLEVBQWtFLFVBQVVDLENBQVYsRUFBYTtBQUMzRUEsT0FBQyxDQUFDQyxjQUFGO0FBQ0EsV0FBS04sS0FBTDtBQUNILEtBSGlFLENBR2hFTyxJQUhnRSxDQUczRCxJQUgyRCxDQUFsRTtBQUlILEdBTEQ7O0FBT0EsU0FBTyxJQUFJZixLQUFKLEVBQVA7QUFFSCxDQXJDZSxFQXFDYmdCLE1BckNhLENBQWhCIiwiZmlsZSI6Ii4vc291cmNlL2pzL3Byb21wdC9tb2RhbC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0ICAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBpc09wZW4gPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIE1vZGFsKCkge1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50cygpO1xuICAgIH1cblxuICAgIE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktbW9kYWwtb3BlbicpLmFwcGVuZCgnXFxcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtb2R1bGFyaXR5LW1vZGFsXCI+XFxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kdWxhcml0eS1tb2RhbC13cmFwcGVyXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtY2xvc2VcIiBkYXRhLW1vZHVsYXJpdHktbW9kYWwtYWN0aW9uPVwiY2xvc2VcIj4mdGltZXM7ICcgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS5jbG9zZSArICc8L2J1dHRvbj5cXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kdWxhcml0eS1tb2RhbC1zcGlubmVyLWNvbnRhaW5lclwiIGlkPVwibW9kdWxhcml0eS1pZnJhbWUtbG9hZGVyXCI+PHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLXNwaW5uZXJcIj48L3NwYW4+PC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgPGlmcmFtZSBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtaWZyYW1lXCIgc3JjPVwiJyArIHVybCArICdcIiBmcmFtZWJvcmRlcj1cIjBcIiBvbmxvYWQ9XCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXCdtb2R1bGFyaXR5LWlmcmFtZS1sb2FkZXJcXCcpLnN0eWxlLmRpc3BsYXk9XFwnbm9uZVxcJztcIiBhbGxvd3RyYW5zcGFyZW5jeT48L2lmcmFtZT5cXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICA8L2Rpdj5cXFxuICAgICAgICAnKTtcblxuICAgICAgICBpc09wZW4gPSB0cnVlO1xuICAgIH07XG5cbiAgICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kdWxhcml0eS1tb2RhbC1vcGVuJyk7XG4gICAgICAgICQoJyNtb2R1bGFyaXR5LW1vZGFsJykucmVtb3ZlKCk7XG4gICAgICAgIGlzT3BlbiA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBNb2RhbC5wcm90b3R5cGUuaGFuZGxlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtbW9kdWxhcml0eS1tb2RhbC1hY3Rpb249XCJjbG9zZVwiXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgTW9kYWwoKTtcblxufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./source/js/prompt/modal.js\n");

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EseUNBQXlDLGlDQUFpQztRQUMxRSxnSEFBZ0gsbUJBQW1CLEVBQUU7UUFDckk7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7UUFDQTs7O1FBR0E7UUFDQSIsImZpbGUiOiJqcy9tb2R1bGFyaXR5LWVkaXRvci1tb2RhbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NvdXJjZS9qcy9tb2R1bGFyaXR5LWVkaXRvci1tb2RhbC5qc1wiKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=