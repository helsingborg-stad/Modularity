!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=12)}({12:function(t,e){var o=o||{};o.Posts=o.Posts||{},o.Posts.LoadMoreButton=function(t){function e(){this.init()}return e.prototype.init=function(){t(document).on("click",".js-mod-posts-load-more",function(e){var o=t(e.target).closest(".js-mod-posts-load-more"),r=JSON.parse(window.atob(o.attr("data-mod-posts-load-more")));if(this.attributesExists(["postsPerPage","offset","target","ajaxUrl","nonce","bladeTemplate"],Object.keys(r))){var n=t(r.target)[0];if(void 0===n)throw'Error: Could not find target "'+r.target+'"';this.toggleLoader(o),this.loadMorePosts(o,n,r)}}.bind(this))},e.prototype.toggleLoader=function(t){if(t.hasClass("hidden"))return t.removeClass("hidden"),void this.removeLoader(t);t.addClass("hidden"),t.after('<div class="loading"><div></div><div></div><div></div><div></div></div>')},e.prototype.loadMorePosts=function(e,o,r){var n=r;n.action="mod_posts_load_more",t.ajax({type:"post",url:n.ajaxUrl,data:n,dataType:"html",success:function(n,i){return"success"===i?(t(o).append(JSON.parse(n)),r.postsPerPage>n.length?(this.removeLoader(e),void e.remove()):(this.toggleLoader(e),r.offset=parseInt(r.offset)+parseInt(r.postsPerPage),void e.attr("data-mod-posts-load-more",window.btoa(JSON.stringify(r))))):"nocontent"===i?(this.removeLoader(e),e.after("<p>No more posts to showâ€¦</p>"),void e.remove()):void 0}.bind(this),error:function(t,e,o){console.log(o)}})},e.prototype.removeLoader=function(e){t(e.next()).hasClass("loading")&&e.next().remove()},e.prototype.attributesExists=function(t,e){var o=!0;return t.forEach((function(t){if(!e.includes(t))throw o=!1,'ValidationError: Missing required data-attribute key "'+t+'"'})),o},new e}(jQuery)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3BocC9Nb2R1bGUvUG9zdHMvYXNzZXRzL21vZC1wb3N0cy1sb2FkLW1vcmUtYnV0dG9uLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTW9kdWxhcml0eSIsIlBvc3RzIiwiTG9hZE1vcmVCdXR0b24iLCIkIiwidGhpcyIsImluaXQiLCJkb2N1bWVudCIsIm9uIiwiZSIsImJ1dHRvbiIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyaWJ1dGVzIiwiSlNPTiIsInBhcnNlIiwid2luZG93IiwiYXRvYiIsImF0dHIiLCJhdHRyaWJ1dGVzRXhpc3RzIiwia2V5cyIsInRvZ2dsZUxvYWRlciIsImxvYWRNb3JlUG9zdHMiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwicmVtb3ZlTG9hZGVyIiwiYWRkQ2xhc3MiLCJhZnRlciIsImRhdGEiLCJhY3Rpb24iLCJhamF4IiwidHlwZSIsInVybCIsImFqYXhVcmwiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJwb3N0cyIsInN0YXR1cyIsImFwcGVuZCIsInBvc3RzUGVyUGFnZSIsImxlbmd0aCIsInJlbW92ZSIsIm9mZnNldCIsInBhcnNlSW50IiwiYnRvYSIsInN0cmluZ2lmeSIsImVycm9yIiwianFYSFIiLCJjb25zb2xlIiwibG9nIiwibmV4dCIsInJlcXVpcmVkS2V5cyIsImF0dHJpYnV0ZUtleXMiLCJleGlzdHMiLCJmb3JFYWNoIiwiaW5jbHVkZXMiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVks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RyxTQUFTL0QsR0FHeEIsTUFGQTZELEdBQVMsRUFFSCx5REFBMkQ3RCxFQUFNLE9BSXhFNkQsR0FHSixJQUFJbEQsRUF2SG9CLENBeUhoQ3FEIiwiZmlsZSI6ImpzL1Bvc3RzL2Fzc2V0cy9tb2QtcG9zdHMtbG9hZC1tb3JlLWJ1dHRvbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTIpO1xuIiwidmFyIE1vZHVsYXJpdHkgPSBNb2R1bGFyaXR5IHx8IHt9O1xuTW9kdWxhcml0eS5Qb3N0cyA9IE1vZHVsYXJpdHkuUG9zdHMgfHwge307XG5cbk1vZHVsYXJpdHkuUG9zdHMuTG9hZE1vcmVCdXR0b24gPSAoZnVuY3Rpb24gKCQpIHtcbiAgICBmdW5jdGlvbiBMb2FkTW9yZUJ1dHRvbigpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgTG9hZE1vcmVCdXR0b24ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy1tb2QtcG9zdHMtbG9hZC1tb3JlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5qcy1tb2QtcG9zdHMtbG9hZC1tb3JlJyk7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5hdG9iKGJ1dHRvbi5hdHRyKCdkYXRhLW1vZC1wb3N0cy1sb2FkLW1vcmUnKSkpO1xuICAgICAgICAgICAgLy9NYWtlIHN1cmUgcmVxdWlyZWQgYXR0cmlidXRlcyBleGlzdHNcbiAgICAgICAgICAgIHZhciByZXF1aXJlZEtleXMgPSBbJ3Bvc3RzUGVyUGFnZScsICdvZmZzZXQnLCAndGFyZ2V0JywgJ2FqYXhVcmwnLCAnbm9uY2UnLCAnYmxhZGVUZW1wbGF0ZSddO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF0dHJpYnV0ZXNFeGlzdHMocmVxdWlyZWRLZXlzLCBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vTWFrZSBzdXJlIHRhcmdldCBleGlzdHNcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGF0dHJpYnV0ZXMudGFyZ2V0KVswXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YodGFyZ2V0KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnRXJyb3I6IENvdWxkIG5vdCBmaW5kIHRhcmdldCBcIicgKyBhdHRyaWJ1dGVzLnRhcmdldCArICdcIic7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRlcihidXR0b24pO1xuICAgICAgICAgICAgdGhpcy5sb2FkTW9yZVBvc3RzKGJ1dHRvbiwgdGFyZ2V0LCBhdHRyaWJ1dGVzKTtcblxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG5cbiAgICBMb2FkTW9yZUJ1dHRvbi5wcm90b3R5cGUudG9nZ2xlTG9hZGVyID0gZnVuY3Rpb24oYnV0dG9uKVxuICAgIHtcbiAgICAgICAgaWYgKGJ1dHRvbi5oYXNDbGFzcygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTG9hZGVyKGJ1dHRvbik7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgLy9DcmVhdGUgbG9hZGVyXG4gICAgICAgIGJ1dHRvbi5hZnRlcignPGRpdiBjbGFzcz1cImxvYWRpbmdcIj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PicpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogTG9hZCBtb3JlIHBvc3RzXG4gICAgICogQHBhcmFtIGJ1dHRvblxuICAgICAqIEBwYXJhbSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gYXR0cmlidXRlc1xuICAgICAqIEBwYXJhbSByYXdkYXRhXG4gICAgICovXG4gICAgTG9hZE1vcmVCdXR0b24ucHJvdG90eXBlLmxvYWRNb3JlUG9zdHMgPSBmdW5jdGlvbihidXR0b24sIHRhcmdldCwgYXR0cmlidXRlcylcbiAgICB7XG5cbiAgICAgICAgdmFyIGRhdGEgPSBhdHRyaWJ1dGVzO1xuICAgICAgICBkYXRhLmFjdGlvbiA9ICdtb2RfcG9zdHNfbG9hZF9tb3JlJztcbiAgICAgICAgXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlIDogXCJwb3N0XCIsXG4gICAgICAgICAgICB1cmwgOiBkYXRhLmFqYXhVcmwsXG4gICAgICAgICAgICBkYXRhIDogZGF0YSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgICAgICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbihwb3N0cywgc3RhdHVzKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vQXBwZW5kIHBvc3RzXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hcHBlbmQoSlNPTi5wYXJzZShwb3N0cykpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIGJ1dHRvbiBpZiBudW1iZXIgb2YgcG9zdHMgaXMgbGVzcyB0aGVuIHF1ZXJpZWQgcG9zdCBjb3VudFxuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5wb3N0c1BlclBhZ2UgPiBwb3N0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTG9hZGVyKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRlcihidXR0b24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSW5jcmVtZW50IG9mZnNldFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLm9mZnNldCA9IHBhcnNlSW50KGF0dHJpYnV0ZXMub2Zmc2V0KSArIHBhcnNlSW50KGF0dHJpYnV0ZXMucG9zdHNQZXJQYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmF0dHIoJ2RhdGEtbW9kLXBvc3RzLWxvYWQtbW9yZScsIHdpbmRvdy5idG9hKEpTT04uc3RyaW5naWZ5KGF0dHJpYnV0ZXMpKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzICA9PT0gJ25vY29udGVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMb2FkZXIoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFmdGVyKCc8cD5ObyBtb3JlIHBvc3RzIHRvIHNob3figKY8L3A+Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgZXJyb3IgOiBmdW5jdGlvbihqcVhIUiwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgTG9hZE1vcmVCdXR0b24ucHJvdG90eXBlLnJlbW92ZUxvYWRlciA9IGZ1bmN0aW9uKGJ1dHRvbikge1xuICAgICAgICBpZiAoJChidXR0b24ubmV4dCgpKS5oYXNDbGFzcygnbG9hZGluZycpKSB7XG4gICAgICAgICAgICBidXR0b24ubmV4dCgpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIExvYWRNb3JlQnV0dG9uLnByb3RvdHlwZS5hdHRyaWJ1dGVzRXhpc3RzID0gZnVuY3Rpb24ocmVxdWlyZWRLZXlzLCBhdHRyaWJ1dGVLZXlzKSB7XG4gICAgICAgIHZhciBleGlzdHMgPSB0cnVlO1xuXG4gICAgICAgIHJlcXVpcmVkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBleGlzdHMgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRocm93ICdWYWxpZGF0aW9uRXJyb3I6IE1pc3NpbmcgcmVxdWlyZWQgZGF0YS1hdHRyaWJ1dGUga2V5IFwiJyArIGtleSArICdcIic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBleGlzdHM7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgTG9hZE1vcmVCdXR0b24oKTtcblxufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=