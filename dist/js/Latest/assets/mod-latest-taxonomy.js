jQuery(document).ready(function(l){function t(t){0===l('#modularity-sorted-by select optgroup[label="Post fields"]').length&&l("#modularity-sorted-by select").prepend('<optgroup label="Post fields">').append("</optgroup>"),l.post(ajaxurl,t,function(o){l('#modularity-sorted-by select option[value^="_metakey_"], #modularity-sorted-by select optgroup[label="Post meta"]').remove(),0<o.meta_keys.length&&(l("#modularity-sorted-by select").append('<optgroup label="Post meta">'),l.each(o.meta_keys,function(t,e){var a="";null!==o.curr&&(a=e.meta_key==o.curr.replace("_metakey_","")?"selected":""),l("#modularity-sorted-by select").append('<option value="_metakey_'+e.meta_key+'" '+a+">"+e.meta_key+"</option>")}),l("#modularity-sorted-by select").append("</optgroup>"))},"json")}function e(t){l("#modularity-latest-taxonomy select").empty(),l("#modularity-latest-taxonomy .acf-label label").prepend('<span class="spinner" style="visibility: visible; float: none; margin: 0 5px 0 0;"></span>'),l.post(ajaxurl,t,function(o){0!==o.types.length?(l.each(o.types,function(t,e){var a="";null!==o.curr&&(a=e.name==o.curr?"selected":""),l("#modularity-latest-taxonomy select").append('<option value="'+e.name+'" '+a+">"+e.label+"</option>")}),l("#modularity-latest-taxonomy .acf-label label .spinner").remove(),a({action:"get_taxonomy_values",tax:l("#modularity-latest-taxonomy select").val(),post:modularity_current_post_id})):l("#modularity-latest-taxonomy .acf-label label .spinner").remove()},"json")}function a(t){l("#modularity-latest-taxonomy-value select").empty(),l("#modularity-latest-taxonomy-value .acf-label label").prepend('<span class="spinner" style="visibility: visible; float: none; margin: 0 5px 0 0;"></span>'),l.post(ajaxurl,t,function(o){l.each(o.tax,function(t,e){var a=-1<l.inArray(e.name.replace("&amp;","&"),o.curr)?"selected":"";l("#modularity-latest-taxonomy-value select").append('<option value="'+e.name+'" '+a+">"+e.name+"</option>")}),l("#modularity-latest-taxonomy-value .acf-label label .spinner").remove()},"json")}t({action:"get_sortable_meta_keys",posttype:l("#modularity-latest-post-type select").val(),post:modularity_current_post_id}),l("#modularity-latest-post-type select").on("change",function(){t({action:"get_sortable_meta_keys",posttype:l(this).val(),post:modularity_current_post_id})}),e({action:"get_taxonomy_types",posttype:l("#modularity-latest-post-type select").val(),post:modularity_current_post_id}),l("#modularity-latest-post-type select").on("change",function(){e({action:"get_taxonomy_types",posttype:l(this).val(),post:modularity_current_post_id})}),l("#modularity-latest-taxonomy select").on("change",function(){a({action:"get_taxonomy_values",tax:l(this).val(),post:modularity_current_post_id})})});