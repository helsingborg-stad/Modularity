!function(t){var e={};function o(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=9)}({9:function(t,e,o){"use strict";o.r(e);function i(t){t,$(function(){}.bind(this))}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}$=jQuery,i.prototype.save=function(t){$("#modularity-options #publishing-action .spinner").css("visibility","visible");var e=$(t).serializeObject();e.id=modularity_post_id,e.action="save_modules",$.post(ajaxurl,e,(function(t){$("#modularity-options #publishing-action .spinner").css("visibility","hidden")}))},jQuery.fn.serializeObject=function(){var t={},e=this.serializeArray();return jQuery.each(e,(function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t};var r=null;function n(t){r=t,$(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"==pagenow&&this.init()}.bind(this))}$=jQuery,n.prototype.init=function(){this.setupDraggable(),this.setupDroppable(),this.setupSortable()},n.prototype.setupSortable=function(){$(".modularity-js-sortable").sortable({handle:".modularity-sortable-handle",connectWith:".modularity-js-sortable",placeholder:"ui-sortable-placeholder",start:function(t,e){try{var o=jQuery(e.item).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===a(o)&&jQuery(".modularity-sidebar-area").each((function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")}))}catch(t){console.log("Incompability information not defined - "+t)}},stop:function(t,e){var o=e.item.parents("ul").data("area-id");e.item.find('input[name^="modularity_modules"]').each((function(t,e){var i=$(this).attr("name").replace(/\[(.*?)\]/i,"["+o+"]");$(this).attr("name",i)})),jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}}).bind(this)},n.prototype.setupDraggable=function(){$(".modularity-js-draggable").draggable({appendTo:"body",containment:"document",scroll:!1,helper:"clone",revert:"invalid",revertDuration:200,start:function(t,e){try{var o=jQuery(this).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===a(o)&&jQuery(".modularity-sidebar-area").each((function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")}))}catch(t){console.log("Incompability information not defined - "+t)}},stop:function(t,e){jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}})},n.prototype.setupDroppable=function(){$(".modularity-js-droppable").droppable({accept:".modularity-js-draggable",hoverClass:"modularity-state-droppable",drop:function(t,e){this.appendModule(t,e)}.bind(this)}).bind(this)},n.prototype.appendModule=function(t,e){var o=e.draggable,i=o.find(".modularity-module-name").text(),a=o.data("module-id"),n=o.attr("data-sidebar-incompability");r.Editor.Module.addModule(t.target,a,i,void 0,void 0,void 0,void 0,void 0,n)};var d=null;$=jQuery;var l={is_thickbox:!0},s=!1;function u(t){d=t,$(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"==pagenow&&(this.handleEvents(),this.loadModules(modularity_post_id))}.bind(this))}u.prototype.loadModules=function(t){var e={action:"get_post_modules",id:t};$.post(ajaxurl,e,function(t){$.each(t,function(t,e){var o=$('.modularity-sidebar-area[data-area-id="'+t+'"]');$.each(e.modules,function(t,e){"true"==e.hidden&&(e.hidden=!0);var i=void 0===e.sidebar_incompability||$.isEmptyObject(e.sidebar_incompability)?"":JSON.stringify(e.sidebar_incompability);this.addModule(o,e.post_type,e.post_type_name,e.post_title,e.ID,e.hidden,e.columnWidth,e.isDeprecated,i)}.bind(this)),o.removeClass("modularity-spinner")}.bind(this)),!0,$(".modularity-sidebar-area").removeClass("modularity-spinner")}.bind(this),"json")},u.prototype.isEditingModule=function(){return s},u.prototype.getThickBoxUrl=function(t,e){var o="",i={};switch(t){case"add":o="post-new.php";break;case"edit":o="post.php"}return"number"==typeof e.postId&&(i.post=e.postId,i.action="edit"),"string"==typeof e.postType&&(i.post_type=e.postType),admin_url+o+"?"+$.param(i)+"&"+$.param(l)},u.prototype.getImportUrl=function(t){var e={};return e.post_type=t.postType,admin_url+"edit.php?"+$.param(e)+"&"+$.param(l)},u.prototype.addModule=function(t,e,o,i,a,r,n,l,s){i=void 0!==i?": "+i:"",a=void 0!==a?a:"",n=void 0!==n?n:"";var u=!0===l?'<span class="modularity-deprecated" style="color:#ff0000;">('+modularityAdminLanguage.deprecated+")</span>":"";s=void 0!==s?s:"";var p=this.getThickBoxUrl("add",{postType:e});d.Editor.Thickbox.postAction="add",a&&(p=this.getThickBoxUrl("edit",{postId:a}),d.Editor.Thickbox.postAction="edit");var c=this.getImportUrl({postType:e}),m="";!0===r&&(m="checked");var y=$(t).data("area-id"),f=Math.random().toString(36).substr(2,9),h='<li id="post-'+a+'" data-module-id="'+e+'" data-module-stored-width="'+n+"\" data-sidebar-incompability='"+s+'\'>            <span class="modularity-line-wrapper">                <span class="modularity-sortable-handle"></span>                <span class="modularity-module-name">                    '+o+"                    "+u+'                    <span class="modularity-module-title">'+i+'</span>                    <label class="modularity-module-hide">                        <input type="checkbox" name="modularity_modules['+y+"]["+f+'][hidden]" value="hidden" '+m+" />                        "+modularityAdminLanguage.langhide+'                    </label>                </span>                <span class="modularity-module-columns">                    <label>'+modularityAdminLanguage.width+':</label>                    <select name="modularity_modules['+y+"]["+f+'][columnWidth]">                        '+modularityAdminLanguage.widthOptions+'                    </select>                </span>                <span class="modularity-module-actions">                    <a href="'+p+'" data-modularity-modal class="modularity-js-thickbox-open"><span>'+modularityAdminLanguage.langedit+'</span></a>                    <a href="'+c+'" class="modularity-js-thickbox-import"><span>'+modularityAdminLanguage.langimport+'</span></a>                    <a href="#remove" class="modularity-module-remove"><span>'+modularityAdminLanguage.langremove+'</span></a>                </span>                <input type="hidden" name="modularity_modules['+y+"]["+f+'][postid]" class="modularity-js-module-id" value="'+a+'" required>            </span>        </li>';$(t).append(h),$(".modularity-sidebar-area > li").each((function(t,e){$(".modularity-module-columns select",$(e)).val($(e).attr("data-module-stored-width"))})),$(".modularity-js-sortable").sortable("refresh")},u.prototype.updateModule=function(t,e){t.find("a.modularity-js-thickbox-open").attr("href",this.getThickBoxUrl("edit",{postId:e.post_id})),t.find("input.modularity-js-module-id").val(e.post_id).change(),t.find(".modularity-module-title").text(": "+e.title)},u.prototype.removeModule=function(t){confirm(modularityAdminLanguage.actionRemove)&&t.remove()},u.prototype.handleEvents=function(){$(document).on("click",".modularity-module-remove",function(t){t.preventDefault();var e=$(t.target).closest("li");this.removeModule(e)}.bind(this)),$(document).on("click",".modularity-js-thickbox-import",(function(t){t.preventDefault();$(t.target).closest("a");s=$(t.target).closest("li"),d.Editor.Thickbox.postAction="import",d.Prompt.Modal.open($(t.target).closest("a").attr("href"))})),$(document).on("click",".modularity-js-thickbox-open",function(t){t.preventDefault(),$(t.target).closest("a").attr("href").indexOf("post.php")>-1&&(d.Editor.Thickbox.postAction="edit"),s=$(t.target).closest("li"),d.Prompt.Modal.open($(t.target).closest("a").attr("href"))}.bind(this))};var p=null;function c(t){p=t}$=jQuery,c.prototype.modulePostCreated=function(t){p.Prompt.Modal.close();var e=parent.Modularity.Editor.Module.isEditingModule(),o={action:"get_post",id:t};$.post(ajaxurl,o,(function(t){var o={post_id:t.ID,title:t.post_title};p.Editor.Module.updateModule(e,o),p.Editor.Autosave.save("form")}),"json")};$=jQuery;var m=!1;function y(t){t,this.handleEvents()}y.prototype.run=function(){m=!1,this.checkRequired()},y.prototype.checkRequired=function(){var t=$("[required]");t.removeClass("validation-error"),t.each(function(t,e){0===$(e).val().length&&($(e).parents("li").addClass("validation-error"),$(e).one("change",(function(t){$(t.target).parents("li").removeClass("validation-error")})),m=!0)}.bind(this))},y.prototype.handleEvents=function(){$(document).on("click","#modularity-mb-editor-publish #publish",function(t){return this.run(),!m||($("#modularity-mb-editor-publish .spinner").css("visibility","hidden"),!1)}.bind(this))};function f(t){t,$(function(){}.bind(this))}$=jQuery,f.prototype.uuid=function(t){return Math.random().toString(36).substr(2,9)};var h=!1;function b(t){$(function(){t,$(document).on("click",".modularity-js-thickbox-widget-import-widget",(function(e){e.preventDefault(),h=$(e.target).parents(".widget-inside");var o=t.Editor.Module.getImportUrl({postType:$(e.target).parents(".widget-inside").find(".modularity-widget-module-type select").val()});t.Editor.Module.editingModule=$(e.target).closest(".widget-inside"),t.Editor.Thickbox.postAction="import-widget",t.Prompt.Modal.open(o)})),$(document).on("click",".modularity-js-thickbox-open-widget",function(e){e.preventDefault(),$(e.target).closest("a").attr("href").indexOf("post.php")>-1&&(t.Editor.Thickbox.postAction="edit"),editingModule=$(e.target).closest("li"),t.Prompt.Modal.open($(e.target).closest("a").attr("href"))}.bind(this))}.bind(this))}$=jQuery,b.prototype.isEditingWidget=function(){return h},b.prototype.updateWidget=function(t,e){$(t).find(".modularity-widget-module-id-span").html(e.post_id),$(t).find(".modularity-widget-module-id").val(e.post_id),$(t).find(".modularity-widget-module-edit").attr("href","post.php?post="+e.post_id+"&action=edit&is_thickbox=true").removeClass("hidden"),$(t).find(".modularity-widget-module-title-span").html(e.title),$(t).find(".modularity-widget-module-title").val(e.title)};function v(t){t,this.handleEvents()}if($=jQuery,v.prototype.open=function(t){$("body").addClass("modularity-modal-open").append('        <div id="modularity-modal">            <div class="modularity-modal-wrapper">                <button class="modularity-modal-close" data-modularity-modal-action="close">&times; '+modularityAdminLanguage.close+'</button>                <div class="modularity-modal-spinner-container" id="modularity-iframe-loader"><span class="modularity-modal-spinner"></span></div>                <iframe class="modularity-modal-iframe" src="'+t+'" frameborder="0" onload="document.getElementById(\'modularity-iframe-loader\').style.display=\'none\';" allowtransparency></iframe>            </div>        </div>    '),!0},v.prototype.close=function(){$("body").removeClass("modularity-modal-open"),$("#modularity-modal").remove(),!1},v.prototype.handleEvents=function(){$(document).on("click",'[data-modularity-modal-action="close"]',function(t){t.preventDefault(),this.close()}.bind(this))},!parent.Modularity){var g=parent.Modularity||{};g.Editor=g.Editor||{},g.Editor.Autosave=new i(g),g.Editor.DragAndDrop=new n(g),g.Editor.Module=new u(g),g.Editor.Thickbox=new c(g),g.Editor.Validate=new y(g),g.Helpers=g.Helpers||{},g.Helpers.Helpers=new f(g),g.Helpers.Widget=new b(g),g.Prompt=g.Prompt||{},g.Prompt.Modal=new v(g),parent.Modularity=g,function(t){t('input[type="checkbox"].sidebar-area-activator').on("click",(function(e){var o=t(this).is(":checked"),i=t(this).attr("value");e.shiftKey&&(o?t('input.sidebar-area-activator[type="checkbox"][value="'+i+'"]').attr("checked",!0):t('input.sidebar-area-activator[type="checkbox"][value="'+i+'"]').attr("checked",!1))}))}(jQuery),function(t){t("#modularity-options #publish").on("click",(function(){t(this).siblings(".spinner").css("visibility","visible")})),t('a.wp-first-item[href="admin.php?page=modularity"]').parent("li").remove(),t("#modularity-tabs a").on("click",(function(e){return wp.autosave&&(t(window).unbind(),wp.autosave.server.triggerSave(),t(document).ajaxComplete((function(){return!0}))),!0}))}(jQuery),jQuery(document).ready((function(t){if(t("#modularity-mb-modules").length){var e=t("#modularity-mb-modules").offset();t(document).scroll((function(){t(window).scrollTop()+50>e.top&&!t("#modularity-mb-modules").hasClass("is-fixed")?t("#modularity-mb-modules").addClass("is-fixed"):t(window).scrollTop()+50<e.top&&t("#modularity-mb-modules").hasClass("is-fixed")&&t("#modularity-mb-modules").removeClass("is-fixed")}))}t(".modularity-edit-module a").on("click",(function(e){e.preventDefault(),g.Editor.Thickbox.postAction="edit-inline-not-saved",g.Prompt.Modal.open(t(e.target).closest("a").attr("href"))}))})),jQuery(document).ready((function(t){t(".frontend-filter").hide(),"post"!==t("#modularity-latest-post-type select").val()&&"page"!==t("#modularity-latest-post-type select").val()||t(".frontend-filter").show(),t("body").on("change","#modularity-latest-post-type select",(function(){"post"===t("#modularity-latest-post-type select").val()||"page"===t("#modularity-latest-post-type select").val()?t(".frontend-filter").show():t(".frontend-filter").hide()})).trigger("change")}))}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2VkaXRvci9hdXRvc2F2ZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvZWRpdG9yL2RyYWdBbmREcm9wLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvdGhpY2tib3guanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2VkaXRvci92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvaGVscGVycy9oZWxwZXJzLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9oZWxwZXJzL3dpZGdldC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvcHJvbXB0L21vZGFsLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9tb2R1bGFyaXR5LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQXV0b3NhdmUiLCJNb2R1bGFyaXR5IiwiJCIsInRoaXMiLCJqUXVlcnkiLCJzYXZlIiwic2VsZWN0b3IiLCJjc3MiLCJyZXF1ZXN0Iiwic2VyaWFsaXplT2JqZWN0IiwiaWQiLCJtb2R1bGFyaXR5X3Bvc3RfaWQiLCJhY3Rpb24iLCJwb3N0IiwiYWpheHVybCIsInJlc3BvbnNlIiwiZm4iLCJhIiwic2VyaWFsaXplQXJyYXkiLCJlYWNoIiwidW5kZWZpbmVkIiwicHVzaCIsImxNb2R1bGFyaXR5IiwiRHJhZ0FuZERyb3AiLCJwYWdlbm93IiwiaW5pdCIsInNldHVwRHJhZ2dhYmxlIiwic2V0dXBEcm9wcGFibGUiLCJzZXR1cFNvcnRhYmxlIiwic29ydGFibGUiLCJoYW5kbGUiLCJjb25uZWN0V2l0aCIsInBsYWNlaG9sZGVyIiwic3RhcnQiLCJlIiwidWkiLCJ2YWxpZFRhcmdldEFyZWFzIiwiaXRlbSIsImF0dHIiLCJKU09OIiwicGFyc2UiLCJpbmRleCIsInNpZGViYXIiLCJpbmNsdWRlcyIsInBhcmVudCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzdG9wIiwic2lkZWJhcklkIiwicGFyZW50cyIsImRhdGEiLCJmaW5kIiwiZWxlbWVudCIsIm5ld05hbWUiLCJyZXBsYWNlIiwiZHJhZ2dhYmxlIiwiYXBwZW5kVG8iLCJjb250YWlubWVudCIsInNjcm9sbCIsImhlbHBlciIsInJldmVydCIsInJldmVydER1cmF0aW9uIiwiZXZlbnQiLCJkcm9wcGFibGUiLCJhY2NlcHQiLCJob3ZlckNsYXNzIiwiZHJvcCIsImFwcGVuZE1vZHVsZSIsIm1vZHVsZU5hbWUiLCJ0ZXh0IiwiaW5jb21wYWJpbGl0eSIsIkVkaXRvciIsIk1vZHVsZSIsImFkZE1vZHVsZSIsInRhcmdldCIsInRoaWNrYm94T3B0aW9ucyIsImlzX3RoaWNrYm94IiwiZWRpdGluZ01vZHVsZSIsImhhbmRsZUV2ZW50cyIsImxvYWRNb2R1bGVzIiwicG9zdElkIiwic2lkZWJhckVsZW1lbnQiLCJoaWRkZW4iLCJzaWRlYmFyX2luY29tcGFiaWxpdHkiLCJpc0VtcHR5T2JqZWN0Iiwic3RyaW5naWZ5IiwicG9zdF90eXBlIiwicG9zdF90eXBlX25hbWUiLCJwb3N0X3RpdGxlIiwiSUQiLCJjb2x1bW5XaWR0aCIsImlzRGVwcmVjYXRlZCIsImlzRWRpdGluZ01vZHVsZSIsImdldFRoaWNrQm94VXJsIiwiYmFzZSIsInF1ZXJ5c3RyaW5nIiwicG9zdFR5cGUiLCJhZG1pbl91cmwiLCJwYXJhbSIsImdldEltcG9ydFVybCIsIm1vZHVsZVRpdGxlIiwiZGVwcmVjYXRlZCIsIm1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlIiwidGhpY2tib3hVcmwiLCJUaGlja2JveCIsInBvc3RBY3Rpb24iLCJpbXBvcnRVcmwiLCJpc0hpZGRlbiIsIml0ZW1Sb3dJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImh0bWwiLCJsYW5naGlkZSIsIndpZHRoIiwid2lkdGhPcHRpb25zIiwibGFuZ2VkaXQiLCJsYW5naW1wb3J0IiwibGFuZ3JlbW92ZSIsImFwcGVuZCIsInZhbCIsInVwZGF0ZU1vZHVsZSIsInBvc3RfaWQiLCJjaGFuZ2UiLCJ0aXRsZSIsInJlbW92ZU1vZHVsZSIsImNvbmZpcm0iLCJhY3Rpb25SZW1vdmUiLCJyZW1vdmUiLCJkb2N1bWVudCIsIm9uIiwicHJldmVudERlZmF1bHQiLCJjbG9zZXN0IiwiUHJvbXB0IiwiTW9kYWwiLCJvcGVuIiwiaW5kZXhPZiIsIm1vZHVsZVBvc3RDcmVhdGVkIiwiY2xvc2UiLCJoYXNFcnJvcnMiLCJWYWxpZGF0ZSIsInJ1biIsImNoZWNrUmVxdWlyZWQiLCJyZXF1aXJlZCIsImxlbmd0aCIsIm9uZSIsIkhlbHBlcnMiLCJ1dWlkIiwic2VwYXJhdG9yIiwiZWRpdGluZ1dpZGdldCIsIldpZGdldCIsImlzRWRpdGluZ1dpZGdldCIsInVwZGF0ZVdpZGdldCIsIndpZGdldCIsInVybCIsImlzQ2hlY2tlZCIsImlzIiwic2hpZnRLZXkiLCJzaWJsaW5ncyIsIndwIiwiYXV0b3NhdmUiLCJ3aW5kb3ciLCJ1bmJpbmQiLCJzZXJ2ZXIiLCJ0cmlnZ2VyU2F2ZSIsImFqYXhDb21wbGV0ZSIsInJlYWR5Iiwib2Zmc2V0Iiwic2Nyb2xsVG9wIiwidG9wIiwiaGFzQ2xhc3MiLCJoaWRl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QUVGdEksRUFBV3lFLE9BQU9pQyxTQUFTQyxXQUFhLHdCQUN4QzNHLEVBQVd3SSxPQUFPQyxNQUFNQyxLQUFLekksRUFBRWdDLEVBQUUyQyxRQUFRMkQsUUFBUSxLQUFLbEcsS0FBSyxlQUtuRWxDLE9BQU9pSSxVQUFVcUMsT0FBTSxTQUFVeEssR0FDN0JBLEVBQUUsb0JBQW9CNkssT0FFaUMsU0FBbkQ3SyxFQUFFLHVDQUF1QzBILE9BQ1UsU0FBbkQxSCxFQUFFLHVDQUF1QzBILE9BQ3pDMUgsRUFBRSxvQkFBb0I4SyxPQUUxQjlLLEVBQUUsUUFBUW9JLEdBQUcsU0FBVSx1Q0FBdUMsV0FDSCxTQUFuRHBJLEVBQUUsdUNBQXVDMEgsT0FDYSxTQUFuRDFILEVBQUUsdUNBQXVDMEgsTUFDNUMxSCxFQUFFLG9CQUFvQjhLLE9BRXRCOUssRUFBRSxvQkFBb0I2SyxVQUUzQkUsUUFBUSIsImZpbGUiOiJqcy9tb2R1bGFyaXR5Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA5KTtcbiIsImxldCBsTW9kdWxhcml0eSA9IG51bGw7XG4kID0galF1ZXJ5O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBdXRvc2F2ZShNb2R1bGFyaXR5KSB7XG4gICAgbE1vZHVsYXJpdHkgPSBNb2R1bGFyaXR5O1xuICAgICQoZnVuY3Rpb24oKXtcbiAgICAgICAgLy90aGlzLmhhbmRsZUV2ZW50cygpO1xuICAgIH0uYmluZCh0aGlzKSk7XG59XG5cbkF1dG9zYXZlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgJCgnI21vZHVsYXJpdHktb3B0aW9ucyAjcHVibGlzaGluZy1hY3Rpb24gLnNwaW5uZXInKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgIHZhciByZXF1ZXN0ID0gJChzZWxlY3Rvcikuc2VyaWFsaXplT2JqZWN0KCk7XG4gICAgcmVxdWVzdC5pZCA9IG1vZHVsYXJpdHlfcG9zdF9pZDtcbiAgICByZXF1ZXN0LmFjdGlvbiA9ICdzYXZlX21vZHVsZXMnO1xuXG4gICAgJC5wb3N0KGFqYXh1cmwsIHJlcXVlc3QsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAkKCcjbW9kdWxhcml0eS1vcHRpb25zICNwdWJsaXNoaW5nLWFjdGlvbiAuc3Bpbm5lcicpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICB9KTtcbn07XG5cbmpRdWVyeS5mbi5zZXJpYWxpemVPYmplY3QgPSBmdW5jdGlvbigpXG57XG4gICAgdmFyIG8gPSB7fTtcbiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTtcbiAgICBqUXVlcnkuZWFjaChhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXS5wdXNoKSB7XG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IHRoaXMudmFsdWUgfHwgJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbztcbn07IiwidmFyIHNvcnRhYmxlSW47XG5sZXQgbE1vZHVsYXJpdHkgPSBudWxsXG4kID0galF1ZXJ5O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEcmFnQW5kRHJvcChNb2R1bGFyaXR5KSB7XG4gICAgbE1vZHVsYXJpdHkgPSBNb2R1bGFyaXR5O1xuXG4gICAgJChmdW5jdGlvbigpe1xuXG4gICAgICAgIGlmICh0eXBlb2YgcGFnZW5vdyAhPT0gJ3VuZGVmaW5lZCcgJiYgcGFnZW5vdyA9PSAnYWRtaW5fcGFnZV9tb2R1bGFyaXR5LWVkaXRvcicpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICB9LmJpbmQodGhpcykpO1xufVxuXG4vKipcbiAqIEluaXRpYWxpemVcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbkRyYWdBbmREcm9wLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0dXBEcmFnZ2FibGUoKTtcbiAgICB0aGlzLnNldHVwRHJvcHBhYmxlKCk7XG4gICAgdGhpcy5zZXR1cFNvcnRhYmxlKCk7XG59O1xuXG5EcmFnQW5kRHJvcC5wcm90b3R5cGUuc2V0dXBTb3J0YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAkKCcubW9kdWxhcml0eS1qcy1zb3J0YWJsZScpLnNvcnRhYmxlKHtcbiAgICAgICAgaGFuZGxlOiAnLm1vZHVsYXJpdHktc29ydGFibGUtaGFuZGxlJyxcbiAgICAgICAgY29ubmVjdFdpdGg6ICcubW9kdWxhcml0eS1qcy1zb3J0YWJsZScsXG4gICAgICAgIHBsYWNlaG9sZGVyOiAndWktc29ydGFibGUtcGxhY2Vob2xkZXInLFxuICAgICAgICBzdGFydDogIGZ1bmN0aW9uKGUsIHVpKSB7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkVGFyZ2V0QXJlYXMgPSBqUXVlcnkodWkuaXRlbSkuYXR0cignZGF0YS1zaWRlYmFyLWluY29tcGFiaWxpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRUYXJnZXRBcmVhcyA9IEpTT04ucGFyc2UodmFsaWRUYXJnZXRBcmVhcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZFRhcmdldEFyZWFzICYmIHR5cGVvZiB2YWxpZFRhcmdldEFyZWFzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIubW9kdWxhcml0eS1zaWRlYmFyLWFyZWFcIikuZWFjaChmdW5jdGlvbihpbmRleCwgc2lkZWJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF2YWxpZFRhcmdldEFyZWFzLmluY2x1ZGVzKGpRdWVyeSh0aGlzKS5hdHRyKCdkYXRhLWFyZWEtaWQnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwibW9kdWxhcml0eS1pbmNvbXBhdGlibGUtYXJlYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5jb21wYWJpbGl0eSBpbmZvcm1hdGlvbiBub3QgZGVmaW5lZCAtIFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoZSwgdWkpIHtcbiAgICAgICAgICAgIHZhciBzaWRlYmFySWQgPSB1aS5pdGVtLnBhcmVudHMoJ3VsJykuZGF0YSgnYXJlYS1pZCcpO1xuICAgICAgICAgICAgdWkuaXRlbS5maW5kKCdpbnB1dFtuYW1lXj1cIm1vZHVsYXJpdHlfbW9kdWxlc1wiXScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld05hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKS5yZXBsYWNlKC9cXFsoLio/KVxcXS9pLCAnWycgKyBzaWRlYmFySWQgKyAnXScpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignbmFtZScsIG5ld05hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBqUXVlcnkoXCJbaWRePW1vZHVsYXJpdHktbWItXVwiKS5yZW1vdmVDbGFzcyhcIm1vZHVsYXJpdHktaW5jb21wYXRpYmxlLWFyZWFcIik7XG4gICAgICAgIH1cbiAgICB9KS5iaW5kKHRoaXMpO1xufTtcblxuLyoqXG4gKiBTZXR1cCBkcmFnZ2FibGUgZnVuY3Rpb25hbGxpdHlcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbkRyYWdBbmREcm9wLnByb3RvdHlwZS5zZXR1cERyYWdnYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAkKCcubW9kdWxhcml0eS1qcy1kcmFnZ2FibGUnKS5kcmFnZ2FibGUoe1xuICAgICAgICBhcHBlbmRUbzogJ2JvZHknLFxuICAgICAgICBjb250YWlubWVudDogJ2RvY3VtZW50JyxcbiAgICAgICAgc2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgaGVscGVyOiAnY2xvbmUnLFxuICAgICAgICByZXZlcnQ6ICdpbnZhbGlkJyxcbiAgICAgICAgcmV2ZXJ0RHVyYXRpb246IDIwMCxcbiAgICAgICAgc3RhcnQ6ICBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB2YWxpZFRhcmdldEFyZWFzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2RhdGEtc2lkZWJhci1pbmNvbXBhYmlsaXR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkVGFyZ2V0QXJlYXMgPSBKU09OLnBhcnNlKHZhbGlkVGFyZ2V0QXJlYXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZFRhcmdldEFyZWFzICYmIHR5cGVvZiB2YWxpZFRhcmdldEFyZWFzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIubW9kdWxhcml0eS1zaWRlYmFyLWFyZWFcIikuZWFjaChmdW5jdGlvbihpbmRleCwgc2lkZWJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF2YWxpZFRhcmdldEFyZWFzLmluY2x1ZGVzKGpRdWVyeSh0aGlzKS5hdHRyKCdkYXRhLWFyZWEtaWQnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwibW9kdWxhcml0eS1pbmNvbXBhdGlibGUtYXJlYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5jb21wYWJpbGl0eSBpbmZvcm1hdGlvbiBub3QgZGVmaW5lZCAtIFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuICAgICAgICAgICAgalF1ZXJ5KFwiW2lkXj1tb2R1bGFyaXR5LW1iLV1cIikucmVtb3ZlQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICB9LFxuICAgIH0pO1xufTtcblxuLyoqXG4gKiBTZXR1cCBkcm9wcGFibGUgZnVuY3Rpb25hbGxpdHlcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbkRyYWdBbmREcm9wLnByb3RvdHlwZS5zZXR1cERyb3BwYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAkKCcubW9kdWxhcml0eS1qcy1kcm9wcGFibGUnKS5kcm9wcGFibGUoe1xuICAgICAgICBhY2NlcHQ6ICcubW9kdWxhcml0eS1qcy1kcmFnZ2FibGUnLFxuICAgICAgICBob3ZlckNsYXNzOiAnbW9kdWxhcml0eS1zdGF0ZS1kcm9wcGFibGUnLFxuICAgICAgICBkcm9wOiBmdW5jdGlvbiAoZSwgdWkpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kTW9kdWxlKGUsIHVpKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSkuYmluZCh0aGlzKTtcbn07XG5cbi8qKlxuICogQXBwZW5kcyBhIG1vZHVsZSB0byB0aGUgdGFyZ2V0IHdoZW4gZHJvcHBlZFxuICogQHBhcmFtICB7b2JqZWN0fSBlICBFdmVudFxuICogQHBhcmFtICB7b2JqZWN0fSB1aSBVSVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuRHJhZ0FuZERyb3AucHJvdG90eXBlLmFwcGVuZE1vZHVsZSA9IGZ1bmN0aW9uIChlLCB1aSkge1xuICAgIHZhciBtb2R1bGUgPSB1aS5kcmFnZ2FibGU7XG4gICAgdmFyIG1vZHVsZU5hbWUgPSBtb2R1bGUuZmluZCgnLm1vZHVsYXJpdHktbW9kdWxlLW5hbWUnKS50ZXh0KCk7XG4gICAgdmFyIG1vZHVsZUlkID0gbW9kdWxlLmRhdGEoJ21vZHVsZS1pZCcpO1xuICAgIHZhciBpbmNvbXBhYmlsaXR5ID0gbW9kdWxlLmF0dHIoJ2RhdGEtc2lkZWJhci1pbmNvbXBhYmlsaXR5Jyk7XG5cbiAgICBsTW9kdWxhcml0eS5FZGl0b3IuTW9kdWxlLmFkZE1vZHVsZShlLnRhcmdldCwgbW9kdWxlSWQsIG1vZHVsZU5hbWUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBpbmNvbXBhYmlsaXR5KTtcbn07IiwibGV0IGxNb2R1bGFyaXR5ID0gbnVsbFxuJCA9IGpRdWVyeTtcbnZhciBpbml0Q29tcGxldGVkID0gZmFsc2U7XG5cbi8qKlxuICogT2JqZWN0IHRvIGNyZWF0ZSBUaGlja2JveCBxdWVyeXN0cmluZyBmcm9tXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG52YXIgdGhpY2tib3hPcHRpb25zID0ge1xuICAgIGlzX3RoaWNrYm94OiB0cnVlLFxufTtcblxudmFyIGVkaXRpbmdNb2R1bGUgPSBmYWxzZTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTW9kdWxlKE1vZHVsYXJpdHkpIHtcbiAgICBsTW9kdWxhcml0eSA9IE1vZHVsYXJpdHk7XG5cbiAgICAkKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICh0eXBlb2YgcGFnZW5vdyAhPT0gJ3VuZGVmaW5lZCcgJiYgcGFnZW5vdyA9PSAnYWRtaW5fcGFnZV9tb2R1bGFyaXR5LWVkaXRvcicpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRNb2R1bGVzKG1vZHVsYXJpdHlfcG9zdF9pZCk7XG4gICAgICAgIH1cbiAgICB9LmJpbmQodGhpcykpO1xufVxuXG4vKipcbiAqIExvYWRzIHNhdmVkIG1vZHVsZXMgYW5kIGFkZHMgdGhlbSB0byB0aGUgcGFnZVxuICogQHBhcmFtICB7aW50ZWdlcn0gcG9zdElkIFRoZSBwb3N0IGlkIHRvIGxvYWQgbW9kdWxlcyBmcm9tXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5Nb2R1bGUucHJvdG90eXBlLmxvYWRNb2R1bGVzID0gZnVuY3Rpb24gKHBvc3RJZCkge1xuICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICBhY3Rpb246ICdnZXRfcG9zdF9tb2R1bGVzJyxcbiAgICAgICAgaWQ6IHBvc3RJZFxuICAgIH07XG5cbiAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICQuZWFjaChyZXNwb25zZSwgZnVuY3Rpb24gKHNpZGViYXIsIG1vZHVsZXMpIHtcbiAgICAgICAgICAgIHZhciBzaWRlYmFyRWxlbWVudCA9ICQoJy5tb2R1bGFyaXR5LXNpZGViYXItYXJlYVtkYXRhLWFyZWEtaWQ9XCInICsgc2lkZWJhciArICdcIl0nKTtcblxuICAgICAgICAgICAgJC5lYWNoKG1vZHVsZXMubW9kdWxlcywgZnVuY3Rpb24gKGtleSwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmhpZGRlbiA9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBpbmNvbXBhYmlsaXR5ID0gKHR5cGVvZiBkYXRhLnNpZGViYXJfaW5jb21wYWJpbGl0eSAhPSAndW5kZWZpbmVkJyAmJiAhJC5pc0VtcHR5T2JqZWN0KGRhdGEuc2lkZWJhcl9pbmNvbXBhYmlsaXR5KSkgPyBKU09OLnN0cmluZ2lmeShkYXRhLnNpZGViYXJfaW5jb21wYWJpbGl0eSkgOiAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE1vZHVsZShzaWRlYmFyRWxlbWVudCwgZGF0YS5wb3N0X3R5cGUsIGRhdGEucG9zdF90eXBlX25hbWUsIGRhdGEucG9zdF90aXRsZSwgZGF0YS5JRCwgZGF0YS5oaWRkZW4sIGRhdGEuY29sdW1uV2lkdGgsIGRhdGEuaXNEZXByZWNhdGVkLCBpbmNvbXBhYmlsaXR5KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIHNpZGViYXJFbGVtZW50LnJlbW92ZUNsYXNzKCdtb2R1bGFyaXR5LXNwaW5uZXInKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICBpbml0Q29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgJCgnLm1vZHVsYXJpdHktc2lkZWJhci1hcmVhJykucmVtb3ZlQ2xhc3MoJ21vZHVsYXJpdHktc3Bpbm5lcicpO1xuICAgIH0uYmluZCh0aGlzKSwgJ2pzb24nKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgZWRpdGluZyBtb2R1bGVcbiAqIEByZXR1cm4ge2Jvb2xlYW4vc3RyaW5nfVxuICovXG5Nb2R1bGUucHJvdG90eXBlLmlzRWRpdGluZ01vZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBlZGl0aW5nTW9kdWxlO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB0aGlja2JveCB1cmwgdG8gb3BlbiBhIHRoaWNrYm94IGluIGNvcnJlY3QgbW9kZVxuICogQHBhcmFtICB7c3RyaW5nfSBhY3Rpb24gU2hvdWxkIGJlIFwiYWRkXCIgb3IgXCJlZGl0XCJcbiAqIEBwYXJhbSAge29iamVjdH0gZGF0YSAgIFNob3VsZCBjb250YWluIGFkZGl0aW9uYWwgZGF0YSAoZm9yIG5vdyBzdXBwb3J0cyBcInBvc3RJZFwiIGFuZCBcInBvc3RUeXBlXCIpXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICBUaGlja2JveCB1cmxcbiAqL1xuTW9kdWxlLnByb3RvdHlwZS5nZXRUaGlja0JveFVybCA9IGZ1bmN0aW9uIChhY3Rpb24sIGRhdGEpIHtcbiAgICB2YXIgYmFzZSA9ICcnO1xuICAgIHZhciBxdWVyeXN0cmluZyA9IHt9O1xuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgICAgIGJhc2UgPSAncG9zdC1uZXcucGhwJztcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICAgICAgYmFzZSA9ICdwb3N0LnBocCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEucG9zdElkID09ICdudW1iZXInKSB7XG4gICAgICAgIHF1ZXJ5c3RyaW5nLnBvc3QgPSBkYXRhLnBvc3RJZDtcbiAgICAgICAgcXVlcnlzdHJpbmcuYWN0aW9uID0gJ2VkaXQnO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YS5wb3N0VHlwZSA9PSAnc3RyaW5nJykge1xuICAgICAgICBxdWVyeXN0cmluZy5wb3N0X3R5cGUgPSBkYXRhLnBvc3RUeXBlO1xuICAgIH1cblxuICAgIHJldHVybiBhZG1pbl91cmwgKyBiYXNlICsgJz8nICsgJC5wYXJhbShxdWVyeXN0cmluZykgKyAnJicgKyAkLnBhcmFtKHRoaWNrYm94T3B0aW9ucyk7XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmdldEltcG9ydFVybCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdmFyIGJhc2UgPSAnZWRpdC5waHAnO1xuICAgIHZhciBxdWVyeXN0cmluZyA9IHt9O1xuXG4gICAgcXVlcnlzdHJpbmcucG9zdF90eXBlID0gZGF0YS5wb3N0VHlwZTtcblxuICAgIHJldHVybiBhZG1pbl91cmwgKyBiYXNlICsgJz8nICsgJC5wYXJhbShxdWVyeXN0cmluZykgKyAnJicgKyAkLnBhcmFtKHRoaWNrYm94T3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBtb2R1bGUgXCJyb3dcIiB0byB0aGUgdGFyZ2V0IHBsYWNlaG9sZGVyXG4gKiBAcGFyYW0ge3NlbGVjdG9yfSB0YXJnZXQgICBUaGUgdGFyZ2V0IHNlbGVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlSWQgICBUaGUgbW9kdWxlIGlkIHNsdWdcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVOYW1lIFRoZSBtb2R1bGUgbmFtZVxuICovXG5Nb2R1bGUucHJvdG90eXBlLmFkZE1vZHVsZSA9IGZ1bmN0aW9uICh0YXJnZXQsIG1vZHVsZUlkLCBtb2R1bGVOYW1lLCBtb2R1bGVUaXRsZSwgcG9zdElkLCBoaWRkZW4sIGNvbHVtbldpZHRoLCBpc0RlcHJlY2F0ZWQsIGluY29tcGFiaWxpdHkpIHtcbiAgICBtb2R1bGVUaXRsZSA9ICh0eXBlb2YgbW9kdWxlVGl0bGUgIT0gJ3VuZGVmaW5lZCcpID8gJzogJyArIG1vZHVsZVRpdGxlIDogJyc7XG4gICAgcG9zdElkID0gKHR5cGVvZiBwb3N0SWQgIT0gJ3VuZGVmaW5lZCcpID8gcG9zdElkIDogJyc7XG4gICAgY29sdW1uV2lkdGggPSAodHlwZW9mIGNvbHVtbldpZHRoICE9ICd1bmRlZmluZWQnKSA/IGNvbHVtbldpZHRoIDogJyc7XG4gICAgdmFyIGRlcHJlY2F0ZWQgPSAoaXNEZXByZWNhdGVkID09PSB0cnVlKSA/ICc8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktZGVwcmVjYXRlZFwiIHN0eWxlPVwiY29sb3I6I2ZmMDAwMDtcIj4oJyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmRlcHJlY2F0ZWQgKyAnKTwvc3Bhbj4nIDogJyc7XG4gICAgaW5jb21wYWJpbGl0eSA9ICh0eXBlb2YgaW5jb21wYWJpbGl0eSAhPSAndW5kZWZpbmVkJykgPyBpbmNvbXBhYmlsaXR5IDogJyc7XG5cbiAgICAvLyBHZXQgdGhpY2tib3ggdXJsXG4gICAgdmFyIHRoaWNrYm94VXJsID0gdGhpcy5nZXRUaGlja0JveFVybCgnYWRkJywge1xuICAgICAgICBwb3N0VHlwZTogbW9kdWxlSWRcbiAgICB9KTtcblxuICAgIC8vIFNldCB0aGlja2JveCBhY3Rpb25cbiAgICBsTW9kdWxhcml0eS5FZGl0b3IuVGhpY2tib3gucG9zdEFjdGlvbiA9ICdhZGQnO1xuXG4gICAgaWYgKHBvc3RJZCkge1xuICAgICAgICB0aGlja2JveFVybCA9IHRoaXMuZ2V0VGhpY2tCb3hVcmwoJ2VkaXQnLCB7XG4gICAgICAgICAgICBwb3N0SWQ6IHBvc3RJZFxuICAgICAgICB9KTtcblxuICAgICAgICBsTW9kdWxhcml0eS5FZGl0b3IuVGhpY2tib3gucG9zdEFjdGlvbiA9ICdlZGl0JztcbiAgICB9XG5cbiAgICAvLyBHZXQgaW1wb3J0IHVybFxuICAgIHZhciBpbXBvcnRVcmwgPSB0aGlzLmdldEltcG9ydFVybCh7XG4gICAgICAgIHBvc3RUeXBlOiBtb2R1bGVJZFxuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2svdW5jaGVjayBoaWRkZW4gY2hlY2tib3hcbiAgICB2YXIgaXNIaWRkZW4gPSAnJztcbiAgICBpZiAoaGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgIGlzSGlkZGVuID0gJ2NoZWNrZWQnO1xuICAgIH1cblxuICAgIHZhciBzaWRlYmFySWQgPSAkKHRhcmdldCkuZGF0YSgnYXJlYS1pZCcpO1xuICAgIHZhciBpdGVtUm93SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7IC8vIFRvRE86IEZpeCB1dWlkIGhlbHBlciBsTW9kdWxhcml0eS5IZWxwZXJzLnV1aWQoKTtcblxuICAgIHZhciBodG1sID0gJzxsaSBpZD1cInBvc3QtJyArIHBvc3RJZCArICdcIiBkYXRhLW1vZHVsZS1pZD1cIicgKyBtb2R1bGVJZCArICdcIiBkYXRhLW1vZHVsZS1zdG9yZWQtd2lkdGg9XCInICsgY29sdW1uV2lkdGggKyAnXCIgZGF0YS1zaWRlYmFyLWluY29tcGFiaWxpdHk9XFwnJyArIGluY29tcGFiaWxpdHkgKyAnXFwnPlxcXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbGluZS13cmFwcGVyXCI+XFxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktc29ydGFibGUtaGFuZGxlXCI+PC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LW1vZHVsZS1uYW1lXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgJyArIG1vZHVsZU5hbWUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgJyArIGRlcHJlY2F0ZWQgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LW1vZHVsZS10aXRsZVwiPicgKyBtb2R1bGVUaXRsZSArICc8L3NwYW4+XFxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtaGlkZVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIm1vZHVsYXJpdHlfbW9kdWxlc1snICsgc2lkZWJhcklkICsgJ11bJyArIGl0ZW1Sb3dJZCArICddW2hpZGRlbl1cIiB2YWx1ZT1cImhpZGRlblwiICcgKyBpc0hpZGRlbiArICcgLz5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgJyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmxhbmdoaWRlICsgJ1xcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxcbiAgICAgICAgICAgICAgICA8L3NwYW4+XFxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLWNvbHVtbnNcIj5cXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+JyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLndpZHRoICsgJzo8L2xhYmVsPlxcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cIm1vZHVsYXJpdHlfbW9kdWxlc1snICsgc2lkZWJhcklkICsgJ11bJyArIGl0ZW1Sb3dJZCArICddW2NvbHVtbldpZHRoXVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAnICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2Uud2lkdGhPcHRpb25zICsgJ1xcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LW1vZHVsZS1hY3Rpb25zXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyB0aGlja2JveFVybCArICdcIiBkYXRhLW1vZHVsYXJpdHktbW9kYWwgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LW9wZW5cIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2VkaXQgKyAnPC9zcGFuPjwvYT5cXFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJyArIGltcG9ydFVybCArICdcIiBjbGFzcz1cIm1vZHVsYXJpdHktanMtdGhpY2tib3gtaW1wb3J0XCI+PHNwYW4+JyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmxhbmdpbXBvcnQgKyAnPC9zcGFuPjwvYT5cXFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI3JlbW92ZVwiIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtcmVtb3ZlXCI+PHNwYW4+JyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmxhbmdyZW1vdmUgKyAnPC9zcGFuPjwvYT5cXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIm1vZHVsYXJpdHlfbW9kdWxlc1snICsgc2lkZWJhcklkICsgJ11bJyArIGl0ZW1Sb3dJZCArICddW3Bvc3RpZF1cIiBjbGFzcz1cIm1vZHVsYXJpdHktanMtbW9kdWxlLWlkXCIgdmFsdWU9XCInICsgcG9zdElkICsgJ1wiIHJlcXVpcmVkPlxcXG4gICAgICAgICAgICA8L3NwYW4+XFxcbiAgICAgICAgPC9saT4nO1xuXG4gICAgLy9TdG9yZVxuICAgICQodGFyZ2V0KS5hcHBlbmQoaHRtbCk7XG5cbiAgICAvL1VwZGF0ZSB3aWR0aCBzZWxlY3RvclxuICAgICQoJy5tb2R1bGFyaXR5LXNpZGViYXItYXJlYSA+IGxpJykuZWFjaChmdW5jdGlvbihpbmRleCwgaXRlbSkge1xuICAgICAgICAkKCcubW9kdWxhcml0eS1tb2R1bGUtY29sdW1ucyBzZWxlY3QnLCAkKGl0ZW0pKS52YWwoJChpdGVtKS5hdHRyKCdkYXRhLW1vZHVsZS1zdG9yZWQtd2lkdGgnKSk7XG4gICAgfSk7XG5cbiAgICAvL1JlZnJlc2hcbiAgICAkKCcubW9kdWxhcml0eS1qcy1zb3J0YWJsZScpLnNvcnRhYmxlKCdyZWZyZXNoJyk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgYSBtb2R1bGUgXCJyb3dcIiBhZnRlciBlZGl0aW5nIHRoZSBtb2R1bGUgcG9zdFxuICogQHBhcmFtICB7RE9NfSBtb2R1bGUgICAgTW9kdWxlIGRvbSBlbGVtZW50XG4gKiBAcGFyYW0gIHtvYmplY3R9IGRhdGEgICBUaGUgZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuTW9kdWxlLnByb3RvdHlwZS51cGRhdGVNb2R1bGUgPSBmdW5jdGlvbiAobW9kdWxlLCBkYXRhKSB7XG4gICAgLy8gSHJlZlxuICAgIG1vZHVsZS5maW5kKCdhLm1vZHVsYXJpdHktanMtdGhpY2tib3gtb3BlbicpLmF0dHIoJ2hyZWYnLCB0aGlzLmdldFRoaWNrQm94VXJsKCdlZGl0Jywge1xuICAgICAgICBwb3N0SWQ6IGRhdGEucG9zdF9pZFxuICAgIH0pKTtcblxuICAgIC8vIFBvc3QgaWQgaW5wdXRcbiAgICBtb2R1bGUuZmluZCgnaW5wdXQubW9kdWxhcml0eS1qcy1tb2R1bGUtaWQnKS52YWwoZGF0YS5wb3N0X2lkKS5jaGFuZ2UoKTtcblxuICAgIC8vIFBvc3QgdGl0bGVcbiAgICBtb2R1bGUuZmluZCgnLm1vZHVsYXJpdHktbW9kdWxlLXRpdGxlJykudGV4dCgnOiAnICsgZGF0YS50aXRsZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBtb2R1bGUgXCJyb3dcIiBmcm9tIHRoZSBwbGFjZWhvbGRlclxuICogQHBhcmFtICB7RE9NIEVsZW1lbnR9IG1vZHVsZSBUaGUgKHRvIGJlIHJlbW92ZWQpIG1vZHVsZSdzIGRvbSBlbGVtZW50XG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5Nb2R1bGUucHJvdG90eXBlLnJlbW92ZU1vZHVsZSA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgIGlmIChjb25maXJtKG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmFjdGlvblJlbW92ZSkpIHtcbiAgICAgICAgbW9kdWxlLnJlbW92ZSgpO1xuICAgIH1cbn07XG5cbi8qKlxuICogSGFuZGxlIGV2ZW50c1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuTW9kdWxlLnByb3RvdHlwZS5oYW5kbGVFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIFRyYXNoIGljb25cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1vZHVsYXJpdHktbW9kdWxlLXJlbW92ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgIHRoaXMucmVtb3ZlTW9kdWxlKHRhcmdldCk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vSW1wb3J0XG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2R1bGFyaXR5LWpzLXRoaWNrYm94LWltcG9ydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgZWwgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJyk7XG4gICAgICAgIGVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuXG4gICAgICAgIGxNb2R1bGFyaXR5LkVkaXRvci5UaGlja2JveC5wb3N0QWN0aW9uID0gJ2ltcG9ydCc7XG4gICAgICAgIGxNb2R1bGFyaXR5LlByb21wdC5Nb2RhbC5vcGVuKCQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKS5hdHRyKCdocmVmJykpO1xuICAgIH0pO1xuXG4gICAgLy8gRWRpdFxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC1vcGVuJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBlbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgaWYgKGVsLmF0dHIoJ2hyZWYnKS5pbmRleE9mKCdwb3N0LnBocCcpID4gLTEpIHtcbiAgICAgICAgICAgIGxNb2R1bGFyaXR5LkVkaXRvci5UaGlja2JveC5wb3N0QWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICB9XG5cbiAgICAgICAgZWRpdGluZ01vZHVsZSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG5cbiAgICAgICAgbE1vZHVsYXJpdHkuUHJvbXB0Lk1vZGFsLm9wZW4oJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2hyZWYnKSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn07IiwiLyoqXG4gKiBBdHRlbnRpb246IFRoaXMgdmFyaWFibGUgc2hvdWxkIG5vdCBiZSBzZXQgbWFudWFsbHlcbiAqXG4gKiBJbmRpY2F0ZXMgaWYgd2UgYXJlIGFkZGluZyBhIG5ldyBwb3N0IG9yIGVkaXRpbmcgb2xkIG9uZVxuICogQHR5cGUge1N0cmluZ31cbiAqL1xudmFyIHBvc3RBY3Rpb24gPSAnYWRkJztcbmxldCBsTW9kdWxhcml0eSA9IG51bGxcbiQgPSBqUXVlcnk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRoaWNrYm94KE1vZHVsYXJpdHkpIHtcbiAgICBsTW9kdWxhcml0eSA9IE1vZHVsYXJpdHk7XG59XG5cblRoaWNrYm94LnByb3RvdHlwZS5tb2R1bGVQb3N0Q3JlYXRlZCA9IGZ1bmN0aW9uIChwb3N0SWQpIHtcbiAgICBsTW9kdWxhcml0eS5Qcm9tcHQuTW9kYWwuY2xvc2UoKTtcblxuICAgIHZhciBtb2R1bGUgPSBwYXJlbnQuTW9kdWxhcml0eS5FZGl0b3IuTW9kdWxlLmlzRWRpdGluZ01vZHVsZSgpO1xuXG4gICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgIGFjdGlvbjogJ2dldF9wb3N0JyxcbiAgICAgICAgaWQ6IHBvc3RJZFxuICAgIH07XG5cbiAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcG9zdF9pZDogcmVzcG9uc2UuSUQsXG4gICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UucG9zdF90aXRsZVxuICAgICAgICB9O1xuXG4gICAgICAgIGxNb2R1bGFyaXR5LkVkaXRvci5Nb2R1bGUudXBkYXRlTW9kdWxlKG1vZHVsZSwgZGF0YSk7XG4gICAgICAgIGxNb2R1bGFyaXR5LkVkaXRvci5BdXRvc2F2ZS5zYXZlKCdmb3JtJyk7XG4gICAgfSwgJ2pzb24nKTtcbn07IiwibGV0IGxNb2R1bGFyaXR5ID0gbnVsbFxuJCA9IGpRdWVyeTtcbnZhciBoYXNFcnJvcnMgPSBmYWxzZTtcbnZhciBlcnJvckNsYXNzID0gJ3ZhbGlkYXRpb24tZXJyb3InO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWYWxpZGF0ZShNb2R1bGFyaXR5KSB7XG4gICAgbE1vZHVsYXJpdHkgPSBNb2R1bGFyaXR5O1xuICAgIFxuICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XG59XG5cbi8qKlxuICogUnVuIHZhbGlkYXRpb24gbWV0aG9kc1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuVmFsaWRhdGUucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICBoYXNFcnJvcnMgPSBmYWxzZTtcbiAgICB0aGlzLmNoZWNrUmVxdWlyZWQoKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgcmVxdWlyZWQgZmlsZWRzIGlzIG5vdCBlbXB0eVxuICogQHJldHVybiB2b2lkXG4gKi9cblZhbGlkYXRlLnByb3RvdHlwZS5jaGVja1JlcXVpcmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXF1aXJlZCA9ICQoJ1tyZXF1aXJlZF0nKTtcbiAgICByZXF1aXJlZC5yZW1vdmVDbGFzcyhlcnJvckNsYXNzKTtcblxuICAgIHJlcXVpcmVkLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgIGlmICgkKGVsZW1lbnQpLnZhbCgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5wYXJlbnRzKCdsaScpLmFkZENsYXNzKGVycm9yQ2xhc3MpO1xuXG4gICAgICAgICAgICAkKGVsZW1lbnQpLm9uZSgnY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnRzKCdsaScpLnJlbW92ZUNsYXNzKGVycm9yQ2xhc3MpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBIYW5kbGUgZXZlbnRzXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuVmFsaWRhdGUucHJvdG90eXBlLmhhbmRsZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI21vZHVsYXJpdHktbWItZWRpdG9yLXB1Ymxpc2ggI3B1Ymxpc2gnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLnJ1bigpO1xuXG4gICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgICQoJyNtb2R1bGFyaXR5LW1iLWVkaXRvci1wdWJsaXNoIC5zcGlubmVyJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn07IiwibGV0IGxNb2R1bGFyaXR5ID0gbnVsbDtcbiQgPSBqUXVlcnk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhlbHBlcnMoTW9kdWxhcml0eSkge1xuICAgIGxNb2R1bGFyaXR5ID0gTW9kdWxhcml0eTtcbiAgICAkKGZ1bmN0aW9uKCl7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn1cblxuSGVscGVycy5wcm90b3R5cGUudXVpZCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xufTsiLCJ2YXIgZWRpdGluZ1dpZGdldCA9IGZhbHNlO1xubGV0IGxNb2R1bGFyaXR5ID0gbnVsbDtcbiQgPSBqUXVlcnk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdpZGdldChNb2R1bGFyaXR5KSB7XG4gICAgJChmdW5jdGlvbigpe1xuICAgICAgICBsTW9kdWxhcml0eSA9IE1vZHVsYXJpdHk7XG4gICAgICAgIC8qIEltcG9ydCAqL1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1vZHVsYXJpdHktanMtdGhpY2tib3gtd2lkZ2V0LWltcG9ydC13aWRnZXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBlZGl0aW5nV2lkZ2V0ID0gJChlLnRhcmdldCkucGFyZW50cygnLndpZGdldC1pbnNpZGUnKTtcblxuICAgICAgICAgICAgdmFyIGltcG9ydFVybCA9IE1vZHVsYXJpdHkuRWRpdG9yLk1vZHVsZS5nZXRJbXBvcnRVcmwoe1xuICAgICAgICAgICAgICAgIHBvc3RUeXBlOiAkKGUudGFyZ2V0KS5wYXJlbnRzKCcud2lkZ2V0LWluc2lkZScpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdHlwZSBzZWxlY3QnKS52YWwoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIE1vZHVsYXJpdHkuRWRpdG9yLk1vZHVsZS5lZGl0aW5nTW9kdWxlID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLndpZGdldC1pbnNpZGUnKTtcblxuICAgICAgICAgICAgTW9kdWxhcml0eS5FZGl0b3IuVGhpY2tib3gucG9zdEFjdGlvbiA9ICdpbXBvcnQtd2lkZ2V0JztcbiAgICAgICAgICAgIE1vZHVsYXJpdHkuUHJvbXB0Lk1vZGFsLm9wZW4oaW1wb3J0VXJsKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvKiBFZGl0ICovXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC1vcGVuLXdpZGdldCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBlbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgICAgIGlmIChlbC5hdHRyKCdocmVmJykuaW5kZXhPZigncG9zdC5waHAnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgTW9kdWxhcml0eS5FZGl0b3IuVGhpY2tib3gucG9zdEFjdGlvbiA9ICdlZGl0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWRpdGluZ01vZHVsZSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG5cbiAgICAgICAgICAgIE1vZHVsYXJpdHkuUHJvbXB0Lk1vZGFsLm9wZW4oJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG5cblxuICAgIH0uYmluZCh0aGlzKSk7XG59XG5cbldpZGdldC5wcm90b3R5cGUuaXNFZGl0aW5nV2lkZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlZGl0aW5nV2lkZ2V0O1xufTtcblxuV2lkZ2V0LnByb3RvdHlwZS51cGRhdGVXaWRnZXQgPSBmdW5jdGlvbiAod2lkZ2V0LCBkYXRhKSB7XG4gICAgJCh3aWRnZXQpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtaWQtc3BhbicpLmh0bWwoZGF0YS5wb3N0X2lkKTtcbiAgICAkKHdpZGdldCkuZmluZCgnLm1vZHVsYXJpdHktd2lkZ2V0LW1vZHVsZS1pZCcpLnZhbChkYXRhLnBvc3RfaWQpO1xuICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWVkaXQnKS5hdHRyKCdocmVmJywncG9zdC5waHA/cG9zdD0nICsgZGF0YS5wb3N0X2lkICsgJyZhY3Rpb249ZWRpdCZpc190aGlja2JveD10cnVlJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLXRpdGxlLXNwYW4nKS5odG1sKGRhdGEudGl0bGUpO1xuICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLXRpdGxlJykudmFsKGRhdGEudGl0bGUpO1xufTsiLCJ2YXIgaXNPcGVuID0gZmFsc2U7XG5sZXQgbE1vZHVsYXJpdHkgPSBudWxsO1xuJCA9IGpRdWVyeTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTW9kYWwoTW9kdWxhcml0eSkge1xuICAgIGxNb2R1bGFyaXR5ID0gTW9kdWxhcml0eTtcbiAgICB0aGlzLmhhbmRsZUV2ZW50cygpO1xufVxuXG5Nb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktbW9kYWwtb3BlbicpLmFwcGVuZCgnXFxcbiAgICAgICAgPGRpdiBpZD1cIm1vZHVsYXJpdHktbW9kYWxcIj5cXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtd3JhcHBlclwiPlxcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtY2xvc2VcIiBkYXRhLW1vZHVsYXJpdHktbW9kYWwtYWN0aW9uPVwiY2xvc2VcIj4mdGltZXM7ICcgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS5jbG9zZSArICc8L2J1dHRvbj5cXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLXNwaW5uZXItY29udGFpbmVyXCIgaWQ9XCJtb2R1bGFyaXR5LWlmcmFtZS1sb2FkZXJcIj48c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtc3Bpbm5lclwiPjwvc3Bhbj48L2Rpdj5cXFxuICAgICAgICAgICAgICAgIDxpZnJhbWUgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLWlmcmFtZVwiIHNyYz1cIicgKyB1cmwgKyAnXCIgZnJhbWVib3JkZXI9XCIwXCIgb25sb2FkPVwiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFwnbW9kdWxhcml0eS1pZnJhbWUtbG9hZGVyXFwnKS5zdHlsZS5kaXNwbGF5PVxcJ25vbmVcXCc7XCIgYWxsb3d0cmFuc3BhcmVuY3k+PC9pZnJhbWU+XFxcbiAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgIDwvZGl2PlxcXG4gICAgJyk7XG5cbiAgICBpc09wZW4gPSB0cnVlO1xufTtcblxuTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kdWxhcml0eS1tb2RhbC1vcGVuJyk7XG4gICAgJCgnI21vZHVsYXJpdHktbW9kYWwnKS5yZW1vdmUoKTtcbiAgICBpc09wZW4gPSBmYWxzZTtcbn07XG5cbk1vZGFsLnByb3RvdHlwZS5oYW5kbGVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLW1vZHVsYXJpdHktbW9kYWwtYWN0aW9uPVwiY2xvc2VcIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9LmJpbmQodGhpcykpO1xufTsiLCJpbXBvcnQgQXV0b3NhdmUgZnJvbSAnLi9lZGl0b3IvYXV0b3NhdmUnO1xuaW1wb3J0IERyYWdBbmREcm9wIGZyb20gJy4vZWRpdG9yL2RyYWdBbmREcm9wJztcbmltcG9ydCBNb2R1bGUgZnJvbSAnLi9lZGl0b3IvbW9kdWxlJztcbmltcG9ydCBUaGlja2JveCBmcm9tICcuL2VkaXRvci90aGlja2JveCc7XG5pbXBvcnQgVmFsaWRhdGUgZnJvbSAnLi9lZGl0b3IvdmFsaWRhdGUnO1xuXG5pbXBvcnQgSGVscGVycyBmcm9tICcuL2hlbHBlcnMvaGVscGVycyc7XG5pbXBvcnQgV2lkZ2V0IGZyb20gJy4vaGVscGVycy93aWRnZXQnO1xuXG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9wcm9tcHQvbW9kYWwnO1xuXG5pZiAoIXBhcmVudC5Nb2R1bGFyaXR5KSB7XG52YXIgTW9kdWxhcml0eSA9IHBhcmVudC5Nb2R1bGFyaXR5IHx8IHt9O1xuTW9kdWxhcml0eS5FZGl0b3IgPSBNb2R1bGFyaXR5LkVkaXRvciB8fCB7fTtcbk1vZHVsYXJpdHkuRWRpdG9yLkF1dG9zYXZlID0gICAgbmV3IEF1dG9zYXZlKE1vZHVsYXJpdHkpO1xuTW9kdWxhcml0eS5FZGl0b3IuRHJhZ0FuZERyb3AgPSBuZXcgRHJhZ0FuZERyb3AoTW9kdWxhcml0eSk7XG5Nb2R1bGFyaXR5LkVkaXRvci5Nb2R1bGUgPSAgICAgIG5ldyBNb2R1bGUoTW9kdWxhcml0eSk7XG5Nb2R1bGFyaXR5LkVkaXRvci5UaGlja2JveCA9ICAgIG5ldyBUaGlja2JveChNb2R1bGFyaXR5KTtcbk1vZHVsYXJpdHkuRWRpdG9yLlZhbGlkYXRlID0gICAgbmV3IFZhbGlkYXRlKE1vZHVsYXJpdHkpO1xuXG5Nb2R1bGFyaXR5LkhlbHBlcnMgPSBNb2R1bGFyaXR5LkhlbHBlcnMgfHwge307XG5Nb2R1bGFyaXR5LkhlbHBlcnMuSGVscGVycyA9ICAgICBuZXcgSGVscGVycyhNb2R1bGFyaXR5KTtcbk1vZHVsYXJpdHkuSGVscGVycy5XaWRnZXQgPSAgICAgIG5ldyBXaWRnZXQoTW9kdWxhcml0eSk7XG5cbk1vZHVsYXJpdHkuUHJvbXB0ID0gTW9kdWxhcml0eS5Qcm9tcHQgfHwge307XG5Nb2R1bGFyaXR5LlByb21wdC5Nb2RhbCA9ICAgICAgICBuZXcgTW9kYWwoTW9kdWxhcml0eSlcblxucGFyZW50Lk1vZHVsYXJpdHkgPSBNb2R1bGFyaXR5O1xuXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0uc2lkZWJhci1hcmVhLWFjdGl2YXRvcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBpc0NoZWNrZWQgPSAkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpO1xuICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XG5cbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGlmICghaXNDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXQuc2lkZWJhci1hcmVhLWFjdGl2YXRvclt0eXBlPVwiY2hlY2tib3hcIl1bdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJykuYXR0cignY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXQuc2lkZWJhci1hcmVhLWFjdGl2YXRvclt0eXBlPVwiY2hlY2tib3hcIl1bdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJykuYXR0cignY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KShqUXVlcnkpO1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICAgIC8vIFNob3cgc3Bpbm5lciB3aGVuIGNsaWNraW5nIHNhdmUgb24gTW9kdWxhcml0eSBvcHRpb25zIHBhZ2VcbiAgICAkKCcjbW9kdWxhcml0eS1vcHRpb25zICNwdWJsaXNoJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuc3Bpbm5lcicpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IG1lbnUgaXRlbSBpbiB0aGUgTW9kdWxhcml0eSBzdWJtZW51IChhZG1pbiBtZW51KVxuICAgICQoJ2Eud3AtZmlyc3QtaXRlbVtocmVmPVwiYWRtaW4ucGhwP3BhZ2U9bW9kdWxhcml0eVwiXScpLnBhcmVudCgnbGknKS5yZW1vdmUoKTtcblxuICAgIC8vIFRyaWdnZXIgYXV0b3NhdmUgd2hlbiBzd2l0Y2hpbmcgdGFic1xuICAgICQoJyNtb2R1bGFyaXR5LXRhYnMgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh3cC5hdXRvc2F2ZSkge1xuICAgICAgICAgICAgJCh3aW5kb3cpLnVuYmluZCgpO1xuXG4gICAgICAgICAgICB3cC5hdXRvc2F2ZS5zZXJ2ZXIudHJpZ2dlclNhdmUoKTtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkuYWpheENvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbn0pKGpRdWVyeSk7XG5cblxuLyogQXV0byBzY3JvbGxpbmcgY29udGVudCAqL1xualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuICAgIGlmICgkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykubGVuZ3RoKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykub2Zmc2V0KCk7XG4gICAgICAgICQoZG9jdW1lbnQpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgNTAgPiBvZmZzZXQudG9wICYmICEkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykuaGFzQ2xhc3MoJ2lzLWZpeGVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykuYWRkQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSArIDUwIDwgb2Zmc2V0LnRvcCAmJiAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykuaGFzQ2xhc3MoJ2lzLWZpeGVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykucmVtb3ZlQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoJy5tb2R1bGFyaXR5LWVkaXQtbW9kdWxlIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgTW9kdWxhcml0eS5FZGl0b3IuVGhpY2tib3gucG9zdEFjdGlvbiA9ICdlZGl0LWlubGluZS1ub3Qtc2F2ZWQnO1xuICAgICAgICBNb2R1bGFyaXR5LlByb21wdC5Nb2RhbC5vcGVuKCQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKS5hdHRyKCdocmVmJykpO1xuICAgIH0pO1xufSk7XG5cbi8qIFBvc3QgZmlsdGVycyBpcyB2aXNpYmxlIGluIGJhY2tlbmQgaWYgcG9zdHR5cGUgaXMgc2V0IHRvIHBvc3Qgb3IgcGFnZSAqL1xualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuICAgICQoJy5mcm9udGVuZC1maWx0ZXInKS5oaWRlKCk7XG5cbiAgICBpZiAoJCgnI21vZHVsYXJpdHktbGF0ZXN0LXBvc3QtdHlwZSBzZWxlY3QnKS52YWwoKSA9PT0gJ3Bvc3QnIHx8XG4gICAgICAgICQoJyNtb2R1bGFyaXR5LWxhdGVzdC1wb3N0LXR5cGUgc2VsZWN0JykudmFsKCkgPT09ICdwYWdlJykge1xuICAgICAgICAkKCcuZnJvbnRlbmQtZmlsdGVyJykuc2hvdygpO1xuICAgIH1cbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZScsICcjbW9kdWxhcml0eS1sYXRlc3QtcG9zdC10eXBlIHNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQoJyNtb2R1bGFyaXR5LWxhdGVzdC1wb3N0LXR5cGUgc2VsZWN0JykudmFsKCkgPT09ICdwb3N0J1xuICAgICAgICAgICAgfHwgJCgnI21vZHVsYXJpdHktbGF0ZXN0LXBvc3QtdHlwZSBzZWxlY3QnKS52YWwoKSA9PT0gJ3BhZ2UnKSB7XG4gICAgICAgICAgICAkKCcuZnJvbnRlbmQtZmlsdGVyJykuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLmZyb250ZW5kLWZpbHRlcicpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH0pLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG59KTtcblxufSJdLCJzb3VyY2VSb290IjoiIn0=