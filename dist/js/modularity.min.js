!function(t){var e={};function o(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=15)}([function(t,e,o){"use strict";var i=o(2),a=o(1),n=o(3);e.a=function(t){function e(){}return e.prototype.modulePostCreated=function(e){a.a.close();var o=i.a.isEditingModule(),r={action:"get_post",id:e};t.post(ajaxurl,r,(function(t){var e={post_id:t.ID,title:t.post_title};i.a.updateModule(o,e),n.a.save("form")}),"json")},new e}(jQuery)},function(t,e,o){"use strict";e.a=function(t){function e(){this.handleEvents()}return e.prototype.open=function(e){t("body").addClass("modularity-modal-open").append('            <div id="modularity-modal">                <div class="modularity-modal-wrapper">                    <button class="modularity-modal-close" data-modularity-modal-action="close">&times; '+modularityAdminLanguage.close+'</button>                    <div class="modularity-modal-spinner-container" id="modularity-iframe-loader"><span class="modularity-modal-spinner"></span></div>                    <iframe class="modularity-modal-iframe" src="'+e+'" frameborder="0" onload="document.getElementById(\'modularity-iframe-loader\').style.display=\'none\';" allowtransparency></iframe>                </div>            </div>        '),!0},e.prototype.close=function(){t("body").removeClass("modularity-modal-open"),t("#modularity-modal").remove(),!1},e.prototype.handleEvents=function(){t(document).on("click",'[data-modularity-modal-action="close"]',function(t){t.preventDefault(),this.close()}.bind(this))},new e}(jQuery)},function(t,e,o){"use strict";var i=o(0),a=o(5),n=o(1);e.a=function(t){var e={is_thickbox:!0},o=!1;function r(){t(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"==pagenow&&(this.handleEvents(),this.loadModules(modularity_post_id))}.bind(this))}return r.prototype.loadModules=function(e){var o={action:"get_post_modules",id:e};t.post(ajaxurl,o,function(e){t.each(e,function(e,o){var i=t('.modularity-sidebar-area[data-area-id="'+e+'"]');t.each(o.modules,function(e,o){"true"==o.hidden&&(o.hidden=!0);var a=void 0===o.sidebar_incompability||t.isEmptyObject(o.sidebar_incompability)?"":JSON.stringify(o.sidebar_incompability);this.addModule(i,o.post_type,o.post_type_name,o.post_title,o.ID,o.hidden,o.columnWidth,o.isDeprecated,a)}.bind(this)),i.removeClass("modularity-spinner")}.bind(this)),this.initCompleted=!0,t(".modularity-sidebar-area").removeClass("modularity-spinner")}.bind(this),"json")},r.prototype.isEditingModule=function(){return o},r.prototype.getThickBoxUrl=function(o,i){var a="",n={};switch(o){case"add":a="post-new.php";break;case"edit":a="post.php"}return"number"==typeof i.postId&&(n.post=i.postId,n.action="edit"),"string"==typeof i.postType&&(n.post_type=i.postType),admin_url+a+"?"+t.param(n)+"&"+t.param(e)},r.prototype.getImportUrl=function(o){var i={};return i.post_type=o.postType,admin_url+"edit.php?"+t.param(i)+"&"+t.param(e)},r.prototype.addModule=function(e,o,n,r,d,l,s,u,p){r=void 0!==r?": "+r:"",d=void 0!==d?d:"",s=void 0!==s?s:"";var c=!0===u?'<span class="modularity-deprecated" style="color:#ff0000;">('+modularityAdminLanguage.deprecated+")</span>":"";p=void 0!==p?p:"";var m=this.getThickBoxUrl("add",{postType:o});i.a.postAction="add",d&&(m=this.getThickBoxUrl("edit",{postId:d}),i.a.postAction="edit");var y=this.getImportUrl({postType:o}),f="";!0===l&&(f="checked");var h=t(e).data("area-id"),b=a.a.uuid(),v='<li id="post-'+d+'" data-module-id="'+o+'" data-module-stored-width="'+s+"\" data-sidebar-incompability='"+p+'\'>                <span class="modularity-line-wrapper">                    <span class="modularity-sortable-handle"></span>                    <span class="modularity-module-name">                        '+n+"                        "+c+'                        <span class="modularity-module-title">'+r+'</span>                        <label class="modularity-module-hide">                            <input type="checkbox" name="modularity_modules['+h+"]["+b+'][hidden]" value="hidden" '+f+" />                            "+modularityAdminLanguage.langhide+'                        </label>                    </span>                    <span class="modularity-module-columns">                        <label>'+modularityAdminLanguage.width+':</label>                        <select name="modularity_modules['+h+"]["+b+'][columnWidth]">                            '+modularityAdminLanguage.widthOptions+'                        </select>                    </span>                    <span class="modularity-module-actions">                        <a href="'+m+'" data-modularity-modal class="modularity-js-thickbox-open"><span>'+modularityAdminLanguage.langedit+'</span></a>                        <a href="'+y+'" class="modularity-js-thickbox-import"><span>'+modularityAdminLanguage.langimport+'</span></a>                        <a href="#remove" class="modularity-module-remove"><span>'+modularityAdminLanguage.langremove+'</span></a>                    </span>                    <input type="hidden" name="modularity_modules['+h+"]["+b+'][postid]" class="modularity-js-module-id" value="'+d+'" required>                </span>            </li>';t(e).append(v),t(".modularity-sidebar-area > li").each((function(e,o){t(".modularity-module-columns select",t(o)).val(t(o).attr("data-module-stored-width"))})),t(".modularity-js-sortable").sortable("refresh")},r.prototype.updateModule=function(t,e){t.find("a.modularity-js-thickbox-open").attr("href",this.getThickBoxUrl("edit",{postId:e.post_id})),t.find("input.modularity-js-module-id").val(e.post_id).change(),t.find(".modularity-module-title").text(": "+e.title)},r.prototype.removeModule=function(t){confirm(modularityAdminLanguage.actionRemove)&&t.remove()},r.prototype.handleEvents=function(){t(document).on("click",".modularity-module-remove",function(e){e.preventDefault();var o=t(e.target).closest("li");this.removeModule(o)}.bind(this)),t(document).on("click",".modularity-js-thickbox-import",(function(e){e.preventDefault();t(e.target).closest("a");o=t(e.target).closest("li"),i.a.postAction="import",n.a.open(t(e.target).closest("a").attr("href"))})),t(document).on("click",".modularity-js-thickbox-open",function(e){e.preventDefault(),t(e.target).closest("a").attr("href").indexOf("post.php")>-1&&(i.a.postAction="edit"),o=t(e.target).closest("li"),n.a.open(t(e.target).closest("a").attr("href"))}.bind(this))},new r}(jQuery)},function(t,e,o){"use strict";e.a=function(t){function e(){t(function(){}.bind(this))}return e.prototype.save=function(e){t("#modularity-options #publishing-action .spinner").css("visibility","visible");var o=t(e).serializeObject();o.id=modularity_post_id,o.action="save_modules",t.post(ajaxurl,o,(function(e){t("#modularity-options #publishing-action .spinner").css("visibility","hidden")}))},new e}(jQuery)},function(t,e,o){"use strict";var i=o(0),a=o(2),n=o(1);e.a=function(t){var e=!1;function o(){t(function(){t(document).on("click",".modularity-js-thickbox-widget-import-widget",(function(o){o.preventDefault(),e=t(o.target).parents(".widget-inside");var r=a.a.getImportUrl({postType:t(o.target).parents(".widget-inside").find(".modularity-widget-module-type select").val()});a.a.editingModule=t(o.target).closest(".widget-inside"),i.a.postAction="import-widget",n.a.open(r)})),t(document).on("click",".modularity-js-thickbox-open-widget",function(e){e.preventDefault(),t(e.target).closest("a").attr("href").indexOf("post.php")>-1&&(i.a.postAction="edit");t(e.target).closest("li");n.a.open(t(e.target).closest("a").attr("href"))}.bind(this))}.bind(this))}return o.prototype.isEditingWidget=function(){return e},o.prototype.updateWidget=function(e,o){t(e).find(".modularity-widget-module-id-span").html(o.post_id),t(e).find(".modularity-widget-module-id").val(o.post_id),t(e).find(".modularity-widget-module-edit").attr("href","post.php?post="+o.post_id+"&action=edit&is_thickbox=true").removeClass("hidden"),t(e).find(".modularity-widget-module-title-span").html(o.title),t(e).find(".modularity-widget-module-title").val(o.title)},new o}(jQuery)},function(t,e,o){"use strict";e.a=function(t){function e(){t(function(){}.bind(this))}return e.prototype.uuid=function(t){return Math.random().toString(36).substr(2,9)},new e}(jQuery)},function(t,e,o){"use strict";o.r(e);var i,a=o(0),n=o(2),r=o(3),d=o(1),l=o(4);e.default=(i=jQuery,"add"==a.a.postAction&&""==modularity_post_action&&a.a.modulePostCreated(modularity_post_id),"edit-inline-saved"==a.a.postAction&&parent.location.reload(),"edit"==a.a.postAction&&""==modularity_post_action&&jQuery(document).on("click","#publish",(function(t){a.a.postAction="add"})),"edit-inline-not-saved"==a.a.postAction&&jQuery(document).on("click","#publish",(function(t){a.a.postAction="edit-inline-saved"})),"import"==a.a.postAction&&(i('.check-column input[type="checkbox"]').remove(),i(".wp-list-table").addClass("modularity-wp-list-table"),i("tbody .check-column").addClass("modularity-import-column").append('<button class="button modularity-import-button" data-modularity-action="import">Import</button>'),i("#posts-filter").append('<input type="hidden" name="is_thickbox" value="true">'),i(document).on("click",'[data-modularity-action="import"]',(function(t){t.preventDefault();var e=i(t.target).closest("tr").attr("id");e=e.split("-")[1];var o=n.a.isEditingModule(),a={action:"get_post",id:e};i("body").addClass("modularity-loader-takeover"),i.post(ajaxurl,a,(function(t){var e={post_id:t.ID,title:t.post_title};n.a.updateModule(o,e),r.a.save("form"),d.a.close()}),"json")}))),void("import-widget"==a.a.postAction&&(i('.check-column input[type="checkbox"]').remove(),i(".wp-list-table").addClass("modularity-wp-list-table"),i("tbody .check-column").addClass("modularity-import-column").append('<button class="button modularity-import-button" data-modularity-action="import">Import</button>'),i(document).on("click",'[data-modularity-action="import"]',(function(t){t.preventDefault();var e=i(t.target).closest("tr").attr("id");e=e.split("-")[1];var o=l.a.isEditingWidget(),a={action:"get_post",id:e};i("body").addClass("modularity-loader-takeover"),i.post(ajaxurl,a,(function(t){var e={post_id:t.ID,title:t.post_title};l.a.updateWidget(o,e),d.a.close()}),"json")})))))},,,,,,,,,function(t,e,o){"use strict";o.r(e);o(6),o(3);var i=o(2);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){function e(){t(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"==pagenow&&this.init()}.bind(this))}e.prototype.init=function(){this.setupDraggable(),this.setupDroppable(),this.setupSortable()},e.prototype.setupSortable=function(){t(".modularity-js-sortable").sortable({handle:".modularity-sortable-handle",connectWith:".modularity-js-sortable",placeholder:"ui-sortable-placeholder",start:function(t,e){try{var o=jQuery(e.item).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===a(o)&&jQuery(".modularity-sidebar-area").each((function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")}))}catch(t){console.log("Incompability information not defined - "+t)}},stop:function(e,o){var i=o.item.parents("ul").data("area-id");o.item.find('input[name^="modularity_modules"]').each((function(e,o){var a=t(this).attr("name").replace(/\[(.*?)\]/i,"["+i+"]");t(this).attr("name",a)})),jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}}).bind(this)},e.prototype.setupDraggable=function(){t(".modularity-js-draggable").draggable({appendTo:"body",containment:"document",scroll:!1,helper:"clone",revert:"invalid",revertDuration:200,start:function(t,e){try{var o=jQuery(this).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===a(o)&&jQuery(".modularity-sidebar-area").each((function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")}))}catch(t){console.log("Incompability information not defined - "+t)}},stop:function(t,e){jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}})},e.prototype.setupDroppable=function(){t(".modularity-js-droppable").droppable({accept:".modularity-js-draggable",hoverClass:"modularity-state-droppable",drop:function(t,e){this.appendModule(t,e)}.bind(this)}).bind(this)},e.prototype.appendModule=function(t,e){var o=e.draggable,a=o.find(".modularity-module-name").text(),n=o.data("module-id"),r=o.attr("data-sidebar-incompability");i.a.addModule(t.target,n,a,void 0,void 0,void 0,void 0,void 0,r)},new e}(jQuery);var n,r=o(0),d=(o(5),jQuery.fn.serializeObject=function(){var t={},e=this.serializeArray();return jQuery.each(e,(function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t},o(4),o(1));e.default=void(n=jQuery)('input[type="checkbox"].sidebar-area-activator').on("click",(function(t){var e=n(this).is(":checked"),o=n(this).attr("value");t.shiftKey&&(e?n('input.sidebar-area-activator[type="checkbox"][value="'+o+'"]').attr("checked",!0):n('input.sidebar-area-activator[type="checkbox"][value="'+o+'"]').attr("checked",!1))}));!function(t){t("#modularity-options #publish").on("click",(function(){t(this).siblings(".spinner").css("visibility","visible")})),t('a.wp-first-item[href="admin.php?page=modularity"]').parent("li").remove(),t("#modularity-tabs a").on("click",(function(e){return wp.autosave&&(t(window).unbind(),wp.autosave.server.triggerSave(),t(document).ajaxComplete((function(){return!0}))),!0}))}(jQuery),jQuery(document).ready((function(t){if(t("#modularity-mb-modules").length){var e=t("#modularity-mb-modules").offset();t(document).scroll((function(){t(window).scrollTop()+50>e.top&&!t("#modularity-mb-modules").hasClass("is-fixed")?t("#modularity-mb-modules").addClass("is-fixed"):t(window).scrollTop()+50<e.top&&t("#modularity-mb-modules").hasClass("is-fixed")&&t("#modularity-mb-modules").removeClass("is-fixed")}))}t(".modularity-edit-module a").on("click",(function(e){e.preventDefault(),r.a.postAction="edit-inline-not-saved",d.a.open(t(e.target).closest("a").attr("href"))}))})),jQuery(document).ready((function(t){t(".frontend-filter").hide(),"post"!==t("#modularity-latest-post-type select").val()&&"page"!==t("#modularity-latest-post-type select").val()||t(".frontend-filter").show(),t("body").on("change","#modularity-latest-post-type select",(function(){"post"===t("#modularity-latest-post-type select").val()||"page"===t("#modularity-latest-post-type select").val()?t(".frontend-filter").show():t(".frontend-filter").hide()})).trigger("change")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2VkaXRvci90aGlja2JveC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvcHJvbXB0L21vZGFsLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvYXV0b3NhdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2hlbHBlcnMvd2lkZ2V0LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9oZWxwZXJzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL21vZHVsYXJpdHktZWRpdG9yLW1vZGFsLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvZHJhZ0FuZERyb3AuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL21vZHVsYXJpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2hlbHBlcnMvc2VyaWFsaXplT2JqZWN0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiJCIsIlRoaWNrYm94IiwibW9kdWxlUG9zdENyZWF0ZWQiLCJwb3N0SWQiLCJNb2RhbCIsImNsb3NlIiwiTW9kdWxlIiwiaXNFZGl0aW5nTW9kdWxlIiwicmVxdWVzdCIsImFjdGlvbiIsImlkIiwicG9zdCIsImFqYXh1cmwiLCJyZXNwb25zZSIsImRhdGEiLCJwb3N0X2lkIiwiSUQiLCJ0aXRsZSIsInBvc3RfdGl0bGUiLCJ1cGRhdGVNb2R1bGUiLCJBdXRvc2F2ZSIsInNhdmUiLCJqUXVlcnkiLCJ0aGlzIiwiaGFuZGxlRXZlbnRzIiwib3BlbiIsInVybCIsImFkZENsYXNzIiwiYXBwZW5kIiwibW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImRvY3VtZW50Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0aGlja2JveE9wdGlvbnMiLCJpc190aGlja2JveCIsImVkaXRpbmdNb2R1bGUiLCJwYWdlbm93IiwibG9hZE1vZHVsZXMiLCJtb2R1bGFyaXR5X3Bvc3RfaWQiLCJlYWNoIiwic2lkZWJhciIsInNpZGViYXJFbGVtZW50IiwiaGlkZGVuIiwiaW5jb21wYWJpbGl0eSIsInNpZGViYXJfaW5jb21wYWJpbGl0eSIsImlzRW1wdHlPYmplY3QiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTW9kdWxlIiwicG9zdF90eXBlIiwicG9zdF90eXBlX25hbWUiLCJjb2x1bW5XaWR0aCIsImlzRGVwcmVjYXRlZCIsImluaXRDb21wbGV0ZWQiLCJnZXRUaGlja0JveFVybCIsImJhc2UiLCJxdWVyeXN0cmluZyIsInBvc3RUeXBlIiwiYWRtaW5fdXJsIiwicGFyYW0iLCJnZXRJbXBvcnRVcmwiLCJ0YXJnZXQiLCJtb2R1bGVOYW1lIiwibW9kdWxlVGl0bGUiLCJkZXByZWNhdGVkIiwidGhpY2tib3hVcmwiLCJwb3N0QWN0aW9uIiwiaW1wb3J0VXJsIiwiaXNIaWRkZW4iLCJzaWRlYmFySWQiLCJpdGVtUm93SWQiLCJIZWxwZXJzIiwidXVpZCIsImh0bWwiLCJsYW5naGlkZSIsIndpZHRoIiwid2lkdGhPcHRpb25zIiwibGFuZ2VkaXQiLCJsYW5naW1wb3J0IiwibGFuZ3JlbW92ZSIsImluZGV4IiwiaXRlbSIsInZhbCIsImF0dHIiLCJzb3J0YWJsZSIsImZpbmQiLCJjaGFuZ2UiLCJ0ZXh0IiwicmVtb3ZlTW9kdWxlIiwiY29uZmlybSIsImFjdGlvblJlbW92ZSIsImNsb3Nlc3QiLCJpbmRleE9mIiwic2VsZWN0b3IiLCJjc3MiLCJzZXJpYWxpemVPYmplY3QiLCJlZGl0aW5nV2lkZ2V0IiwiV2lkZ2V0IiwicGFyZW50cyIsImlzRWRpdGluZ1dpZGdldCIsInVwZGF0ZVdpZGdldCIsIndpZGdldCIsInNlcGFyYXRvciIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsIm1vZHVsYXJpdHlfcG9zdF9hY3Rpb24iLCJwYXJlbnQiLCJsb2NhdGlvbiIsInJlbG9hZCIsInNwbGl0IiwiRHJhZ0FuZERyb3AiLCJpbml0Iiwic2V0dXBEcmFnZ2FibGUiLCJzZXR1cERyb3BwYWJsZSIsInNldHVwU29ydGFibGUiLCJoYW5kbGUiLCJjb25uZWN0V2l0aCIsInBsYWNlaG9sZGVyIiwic3RhcnQiLCJ1aSIsInZhbGlkVGFyZ2V0QXJlYXMiLCJwYXJzZSIsImluY2x1ZGVzIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic3RvcCIsImVsZW1lbnQiLCJuZXdOYW1lIiwicmVwbGFjZSIsImRyYWdnYWJsZSIsImFwcGVuZFRvIiwiY29udGFpbm1lbnQiLCJzY3JvbGwiLCJoZWxwZXIiLCJyZXZlcnQiLCJyZXZlcnREdXJhdGlvbiIsImV2ZW50IiwiZHJvcHBhYmxlIiwiYWNjZXB0IiwiaG92ZXJDbGFzcyIsImRyb3AiLCJhcHBlbmRNb2R1bGUiLCJNb2R1bGVzIiwidW5kZWZpbmVkIiwiZm4iLCJhIiwic2VyaWFsaXplQXJyYXkiLCJwdXNoIiwiaXNDaGVja2VkIiwiaXMiLCJzaGlmdEtleSIsInNpYmxpbmdzIiwid3AiLCJhdXRvc2F2ZSIsIndpbmRvdyIsInVuYmluZCIsInNlcnZlciIsInRyaWdnZXJTYXZlIiwiYWpheENvbXBsZXRlIiwicmVhZHkiLCJsZW5ndGgiLCJvZmZzZXQiLCJz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LFFBQVFRLFlBQWMsR0FBS0QsRUFBT0UsS0FBT3pLLEVBQUUsMEJBQTBCMEssU0FBUyxhQUN2RjFLLEVBQUUsMEJBQTBCOEIsWUFBWSxlQUtwRDlCLEVBQUUsNkJBQTZCaUMsR0FBRyxTQUFTLFNBQVVDLEdBQ2pEQSxFQUFFQyxpQkFFSGxDLElBQVNvRSxXQUFhLHdCQUN0QmpFLElBQU1xQixLQUFLekIsRUFBRWtDLEVBQUU4QixRQUFROEIsUUFBUSxLQUFLUixLQUFLLGVBS2hEaEUsT0FBT1UsVUFBVXFJLE9BQU0sU0FBVXJLLEdBQzdCQSxFQUFFLG9CQUFvQjJLLE9BRWlDLFNBQW5EM0ssRUFBRSx1Q0FBdUNxRixPQUNVLFNBQW5EckYsRUFBRSx1Q0FBdUNxRixPQUN6Q3JGLEVBQUUsb0JBQW9CNEssT0FFMUI1SyxFQUFFLFFBQVFpQyxHQUFHLFNBQVUsdUNBQXVDLFdBQ0gsU0FBbkRqQyxFQUFFLHVDQUF1Q3FGLE9BQ2EsU0FBbkRyRixFQUFFLHVDQUF1Q3FGLE1BQzVDckYsRUFBRSxvQkFBb0I0SyxPQUV0QjVLLEVBQUUsb0JBQW9CMkssVUFFM0JFLFFBQVEiLCJmaWxlIjoianMvbW9kdWxhcml0eS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTUpO1xuIiwiaW1wb3J0IE1vZHVsZSBmcm9tICcuL21vZHVsZS5qcyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vcHJvbXB0L21vZGFsLmpzJztcbmltcG9ydCBBdXRvc2F2ZSBmcm9tICcuL2F1dG9zYXZlLmpzJztcblxuIGV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgLyoqXG4gICAgICogQXR0ZW50aW9uOiBUaGlzIHZhcmlhYmxlIHNob3VsZCBub3QgYmUgc2V0IG1hbnVhbGx5XG4gICAgICpcbiAgICAgKiBJbmRpY2F0ZXMgaWYgd2UgYXJlIGFkZGluZyBhIG5ldyBwb3N0IG9yIGVkaXRpbmcgb2xkIG9uZVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgdmFyIHBvc3RBY3Rpb24gPSAnYWRkJztcblxuICAgIGZ1bmN0aW9uIFRoaWNrYm94KCkge1xuXG4gICAgfVxuXG4gICAgVGhpY2tib3gucHJvdG90eXBlLm1vZHVsZVBvc3RDcmVhdGVkID0gZnVuY3Rpb24gKHBvc3RJZCkge1xuICAgICAgICBNb2RhbC5jbG9zZSgpO1xuXG4gICAgICAgIHZhciBtb2R1bGUgPSBNb2R1bGUuaXNFZGl0aW5nTW9kdWxlKCk7XG5cbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBhY3Rpb246ICdnZXRfcG9zdCcsXG4gICAgICAgICAgICBpZDogcG9zdElkXG4gICAgICAgIH07XG5cbiAgICAgICAgJC5wb3N0KGFqYXh1cmwsIHJlcXVlc3QsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgcG9zdF9pZDogcmVzcG9uc2UuSUQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLnBvc3RfdGl0bGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE1vZHVsZS51cGRhdGVNb2R1bGUobW9kdWxlLCBkYXRhKTtcbiAgICAgICAgICAgIEF1dG9zYXZlLnNhdmUoJ2Zvcm0nKTtcbiAgICAgICAgfSwgJ2pzb24nKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBUaGlja2JveCgpO1xuXG59KShqUXVlcnkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgIChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIGlzT3BlbiA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbW9kdWxhcml0eS1tb2RhbC1vcGVuJykuYXBwZW5kKCdcXFxuICAgICAgICAgICAgPGRpdiBpZD1cIm1vZHVsYXJpdHktbW9kYWxcIj5cXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLXdyYXBwZXJcIj5cXFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kdWxhcml0eS1tb2RhbC1jbG9zZVwiIGRhdGEtbW9kdWxhcml0eS1tb2RhbC1hY3Rpb249XCJjbG9zZVwiPiZ0aW1lczsgJyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmNsb3NlICsgJzwvYnV0dG9uPlxcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLXNwaW5uZXItY29udGFpbmVyXCIgaWQ9XCJtb2R1bGFyaXR5LWlmcmFtZS1sb2FkZXJcIj48c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtc3Bpbm5lclwiPjwvc3Bhbj48L2Rpdj5cXFxuICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIGNsYXNzPVwibW9kdWxhcml0eS1tb2RhbC1pZnJhbWVcIiBzcmM9XCInICsgdXJsICsgJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIG9ubG9hZD1cImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcJ21vZHVsYXJpdHktaWZyYW1lLWxvYWRlclxcJykuc3R5bGUuZGlzcGxheT1cXCdub25lXFwnO1wiIGFsbG93dHJhbnNwYXJlbmN5PjwvaWZyYW1lPlxcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICcpO1xuXG4gICAgICAgIGlzT3BlbiA9IHRydWU7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2R1bGFyaXR5LW1vZGFsLW9wZW4nKTtcbiAgICAgICAgJCgnI21vZHVsYXJpdHktbW9kYWwnKS5yZW1vdmUoKTtcbiAgICAgICAgaXNPcGVuID0gZmFsc2U7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5oYW5kbGVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1tb2R1bGFyaXR5LW1vZGFsLWFjdGlvbj1cImNsb3NlXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBNb2RhbCgpO1xuXG59KShqUXVlcnkpO1xuIiwiaW1wb3J0IFRoaWNrYm94IGZyb20gJy4vdGhpY2tib3guanMnO1xuaW1wb3J0IEhlbHBlcnMgZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9wcm9tcHQvbW9kYWwuanMnO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBpbml0Q29tcGxldGVkID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBPYmplY3QgdG8gY3JlYXRlIFRoaWNrYm94IHF1ZXJ5c3RyaW5nIGZyb21cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHZhciB0aGlja2JveE9wdGlvbnMgPSB7XG4gICAgICAgIGlzX3RoaWNrYm94OiB0cnVlLFxuICAgIH07XG5cbiAgICB2YXIgZWRpdGluZ01vZHVsZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gTW9kdWxlKCkge1xuICAgICAgICAkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhZ2Vub3cgIT09ICd1bmRlZmluZWQnICYmIHBhZ2Vub3cgPT0gJ2FkbWluX3BhZ2VfbW9kdWxhcml0eS1lZGl0b3InKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb2R1bGVzKG1vZHVsYXJpdHlfcG9zdF9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgc2F2ZWQgbW9kdWxlcyBhbmQgYWRkcyB0aGVtIHRvIHRoZSBwYWdlXG4gICAgICogQHBhcmFtICB7aW50ZWdlcn0gcG9zdElkIFRoZSBwb3N0IGlkIHRvIGxvYWQgbW9kdWxlcyBmcm9tXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmxvYWRNb2R1bGVzID0gZnVuY3Rpb24gKHBvc3RJZCkge1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2dldF9wb3N0X21vZHVsZXMnLFxuICAgICAgICAgICAgaWQ6IHBvc3RJZFxuICAgICAgICB9O1xuXG4gICAgICAgICQucG9zdChhamF4dXJsLCByZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICQuZWFjaChyZXNwb25zZSwgZnVuY3Rpb24gKHNpZGViYXIsIG1vZHVsZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2lkZWJhckVsZW1lbnQgPSAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWFbZGF0YS1hcmVhLWlkPVwiJyArIHNpZGViYXIgKyAnXCJdJyk7XG5cbiAgICAgICAgICAgICAgICAkLmVhY2gobW9kdWxlcy5tb2R1bGVzLCBmdW5jdGlvbiAoa2V5LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhpZGRlbiA9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmNvbXBhYmlsaXR5ID0gKHR5cGVvZiBkYXRhLnNpZGViYXJfaW5jb21wYWJpbGl0eSAhPSAndW5kZWZpbmVkJyAmJiAhJC5pc0VtcHR5T2JqZWN0KGRhdGEuc2lkZWJhcl9pbmNvbXBhYmlsaXR5KSkgPyBKU09OLnN0cmluZ2lmeShkYXRhLnNpZGViYXJfaW5jb21wYWJpbGl0eSkgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNb2R1bGUoc2lkZWJhckVsZW1lbnQsIGRhdGEucG9zdF90eXBlLCBkYXRhLnBvc3RfdHlwZV9uYW1lLCBkYXRhLnBvc3RfdGl0bGUsIGRhdGEuSUQsIGRhdGEuaGlkZGVuLCBkYXRhLmNvbHVtbldpZHRoLCBkYXRhLmlzRGVwcmVjYXRlZCwgaW5jb21wYWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgICAgIHNpZGViYXJFbGVtZW50LnJlbW92ZUNsYXNzKCdtb2R1bGFyaXR5LXNwaW5uZXInKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdENvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWEnKS5yZW1vdmVDbGFzcygnbW9kdWxhcml0eS1zcGlubmVyJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgJ2pzb24nKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZWRpdGluZyBtb2R1bGVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFuL3N0cmluZ31cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmlzRWRpdGluZ01vZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGVkaXRpbmdNb2R1bGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHRoaWNrYm94IHVybCB0byBvcGVuIGEgdGhpY2tib3ggaW4gY29ycmVjdCBtb2RlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBhY3Rpb24gU2hvdWxkIGJlIFwiYWRkXCIgb3IgXCJlZGl0XCJcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGRhdGEgICBTaG91bGQgY29udGFpbiBhZGRpdGlvbmFsIGRhdGEgKGZvciBub3cgc3VwcG9ydHMgXCJwb3N0SWRcIiBhbmQgXCJwb3N0VHlwZVwiKVxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgIFRoaWNrYm94IHVybFxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUuZ2V0VGhpY2tCb3hVcmwgPSBmdW5jdGlvbiAoYWN0aW9uLCBkYXRhKSB7XG4gICAgICAgIHZhciBiYXNlID0gJyc7XG4gICAgICAgIHZhciBxdWVyeXN0cmluZyA9IHt9O1xuXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgIGJhc2UgPSAncG9zdC1uZXcucGhwJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgYmFzZSA9ICdwb3N0LnBocCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRhdGEucG9zdElkID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBxdWVyeXN0cmluZy5wb3N0ID0gZGF0YS5wb3N0SWQ7XG4gICAgICAgICAgICBxdWVyeXN0cmluZy5hY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRhdGEucG9zdFR5cGUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHF1ZXJ5c3RyaW5nLnBvc3RfdHlwZSA9IGRhdGEucG9zdFR5cGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWRtaW5fdXJsICsgYmFzZSArICc/JyArICQucGFyYW0ocXVlcnlzdHJpbmcpICsgJyYnICsgJC5wYXJhbSh0aGlja2JveE9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBNb2R1bGUucHJvdG90eXBlLmdldEltcG9ydFVybCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBiYXNlID0gJ2VkaXQucGhwJztcbiAgICAgICAgdmFyIHF1ZXJ5c3RyaW5nID0ge307XG5cbiAgICAgICAgcXVlcnlzdHJpbmcucG9zdF90eXBlID0gZGF0YS5wb3N0VHlwZTtcblxuICAgICAgICByZXR1cm4gYWRtaW5fdXJsICsgYmFzZSArICc/JyArICQucGFyYW0ocXVlcnlzdHJpbmcpICsgJyYnICsgJC5wYXJhbSh0aGlja2JveE9wdGlvbnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbW9kdWxlIFwicm93XCIgdG8gdGhlIHRhcmdldCBwbGFjZWhvbGRlclxuICAgICAqIEBwYXJhbSB7c2VsZWN0b3J9IHRhcmdldCAgIFRoZSB0YXJnZXQgc2VsZWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlSWQgICBUaGUgbW9kdWxlIGlkIHNsdWdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlTmFtZSBUaGUgbW9kdWxlIG5hbWVcbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmFkZE1vZHVsZSA9IGZ1bmN0aW9uICh0YXJnZXQsIG1vZHVsZUlkLCBtb2R1bGVOYW1lLCBtb2R1bGVUaXRsZSwgcG9zdElkLCBoaWRkZW4sIGNvbHVtbldpZHRoLCBpc0RlcHJlY2F0ZWQsIGluY29tcGFiaWxpdHkpIHtcbiAgICAgICAgbW9kdWxlVGl0bGUgPSAodHlwZW9mIG1vZHVsZVRpdGxlICE9ICd1bmRlZmluZWQnKSA/ICc6ICcgKyBtb2R1bGVUaXRsZSA6ICcnO1xuICAgICAgICBwb3N0SWQgPSAodHlwZW9mIHBvc3RJZCAhPSAndW5kZWZpbmVkJykgPyBwb3N0SWQgOiAnJztcbiAgICAgICAgY29sdW1uV2lkdGggPSAodHlwZW9mIGNvbHVtbldpZHRoICE9ICd1bmRlZmluZWQnKSA/IGNvbHVtbldpZHRoIDogJyc7XG4gICAgICAgIGNvbnN0IGRlcHJlY2F0ZWQgPSAoaXNEZXByZWNhdGVkID09PSB0cnVlKSA/ICc8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktZGVwcmVjYXRlZFwiJyArXG4gICAgICAgICAgICAnIHN0eWxlPVwiY29sb3I6I2ZmMDAwMDtcIj4oJyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmRlcHJlY2F0ZWQgKyAnKTwvc3Bhbj4nIDogJyc7XG4gICAgICAgIGluY29tcGFiaWxpdHkgPSAodHlwZW9mIGluY29tcGFiaWxpdHkgIT0gJ3VuZGVmaW5lZCcpID8gaW5jb21wYWJpbGl0eSA6ICcnO1xuXG4gICAgICAgIC8vIEdldCB0aGlja2JveCB1cmxcbiAgICAgICAgdmFyIHRoaWNrYm94VXJsID0gdGhpcy5nZXRUaGlja0JveFVybCgnYWRkJywge1xuICAgICAgICAgICAgcG9zdFR5cGU6IG1vZHVsZUlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCB0aGlja2JveCBhY3Rpb25cbiAgICAgICAgVGhpY2tib3gucG9zdEFjdGlvbiA9ICdhZGQnO1xuXG4gICAgICAgIGlmIChwb3N0SWQpIHtcbiAgICAgICAgICAgIHRoaWNrYm94VXJsID0gdGhpcy5nZXRUaGlja0JveFVybCgnZWRpdCcsIHtcbiAgICAgICAgICAgICAgICBwb3N0SWQ6IHBvc3RJZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgaW1wb3J0IHVybFxuICAgICAgICB2YXIgaW1wb3J0VXJsID0gdGhpcy5nZXRJbXBvcnRVcmwoe1xuICAgICAgICAgICAgcG9zdFR5cGU6IG1vZHVsZUlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrL3VuY2hlY2sgaGlkZGVuIGNoZWNrYm94XG4gICAgICAgIHZhciBpc0hpZGRlbiA9ICcnO1xuICAgICAgICBpZiAoaGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpc0hpZGRlbiA9ICdjaGVja2VkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaWRlYmFySWQgPSAkKHRhcmdldCkuZGF0YSgnYXJlYS1pZCcpO1xuICAgICAgICB2YXIgaXRlbVJvd0lkID0gSGVscGVycy51dWlkKCk7XG5cbiAgICAgICAgdmFyIGh0bWwgPSAnPGxpIGlkPVwicG9zdC0nICsgcG9zdElkICsgJ1wiIGRhdGEtbW9kdWxlLWlkPVwiJyArIG1vZHVsZUlkICsgJ1wiIGRhdGEtbW9kdWxlLXN0b3JlZC13aWR0aD1cIicgKyBjb2x1bW5XaWR0aCArICdcIiBkYXRhLXNpZGViYXItaW5jb21wYWJpbGl0eT1cXCcnICsgaW5jb21wYWJpbGl0eSArICdcXCc+XFxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbGluZS13cmFwcGVyXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LXNvcnRhYmxlLWhhbmRsZVwiPjwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLW5hbWVcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgJyArIG1vZHVsZU5hbWUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKyBkZXByZWNhdGVkICsgJ1xcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLXRpdGxlXCI+JyArIG1vZHVsZVRpdGxlICsgJzwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtaGlkZVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtoaWRkZW5dXCIgdmFsdWU9XCJoaWRkZW5cIiAnICsgaXNIaWRkZW4gKyAnIC8+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2hpZGUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtY29sdW1uc1wiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+JyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLndpZHRoICsgJzo8L2xhYmVsPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtjb2x1bW5XaWR0aF1cIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS53aWR0aE9wdGlvbnMgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLWFjdGlvbnNcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyB0aGlja2JveFVybCArICdcIiBkYXRhLW1vZHVsYXJpdHktbW9kYWwgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LW9wZW5cIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2VkaXQgKyAnPC9zcGFuPjwvYT5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyBpbXBvcnRVcmwgKyAnXCIgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LWltcG9ydFwiPjxzcGFuPicgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS5sYW5naW1wb3J0ICsgJzwvc3Bhbj48L2E+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcmVtb3ZlXCIgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZHVsZS1yZW1vdmVcIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ3JlbW92ZSArICc8L3NwYW4+PC9hPlxcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtwb3N0aWRdXCIgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLW1vZHVsZS1pZFwiIHZhbHVlPVwiJyArIHBvc3RJZCArICdcIiByZXF1aXJlZD5cXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgPC9saT4nO1xuXG4gICAgICAgIC8vU3RvcmVcbiAgICAgICAgJCh0YXJnZXQpLmFwcGVuZChodG1sKTtcblxuICAgICAgICAvL1VwZGF0ZSB3aWR0aCBzZWxlY3RvclxuICAgICAgICAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWEgPiBsaScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgICQoJy5tb2R1bGFyaXR5LW1vZHVsZS1jb2x1bW5zIHNlbGVjdCcsICQoaXRlbSkpLnZhbCgkKGl0ZW0pLmF0dHIoJ2RhdGEtbW9kdWxlLXN0b3JlZC13aWR0aCcpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9SZWZyZXNoXG4gICAgICAgICQoJy5tb2R1bGFyaXR5LWpzLXNvcnRhYmxlJykuc29ydGFibGUoJ3JlZnJlc2gnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIG1vZHVsZSBcInJvd1wiIGFmdGVyIGVkaXRpbmcgdGhlIG1vZHVsZSBwb3N0XG4gICAgICogQHBhcmFtICB7RE9NfSBtb2R1bGUgICAgTW9kdWxlIGRvbSBlbGVtZW50XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBkYXRhICAgVGhlIGRhdGFcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUudXBkYXRlTW9kdWxlID0gZnVuY3Rpb24gKG1vZHVsZSwgZGF0YSkge1xuICAgICAgICAvLyBIcmVmXG4gICAgICAgIG1vZHVsZS5maW5kKCdhLm1vZHVsYXJpdHktanMtdGhpY2tib3gtb3BlbicpLmF0dHIoJ2hyZWYnLCB0aGlzLmdldFRoaWNrQm94VXJsKCdlZGl0Jywge1xuICAgICAgICAgICAgcG9zdElkOiBkYXRhLnBvc3RfaWRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFBvc3QgaWQgaW5wdXRcbiAgICAgICAgbW9kdWxlLmZpbmQoJ2lucHV0Lm1vZHVsYXJpdHktanMtbW9kdWxlLWlkJykudmFsKGRhdGEucG9zdF9pZCkuY2hhbmdlKCk7XG5cbiAgICAgICAgLy8gUG9zdCB0aXRsZVxuICAgICAgICBtb2R1bGUuZmluZCgnLm1vZHVsYXJpdHktbW9kdWxlLXRpdGxlJykudGV4dCgnOiAnICsgZGF0YS50aXRsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBtb2R1bGUgXCJyb3dcIiBmcm9tIHRoZSBwbGFjZWhvbGRlclxuICAgICAqIEBwYXJhbSAge0RPTSBFbGVtZW50fSBtb2R1bGUgVGhlICh0byBiZSByZW1vdmVkKSBtb2R1bGUncyBkb20gZWxlbWVudFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgTW9kdWxlLnByb3RvdHlwZS5yZW1vdmVNb2R1bGUgPSBmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAgIGlmIChjb25maXJtKG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmFjdGlvblJlbW92ZSkpIHtcbiAgICAgICAgICAgIG1vZHVsZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgZXZlbnRzXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmhhbmRsZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBUcmFzaCBpY29uXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1tb2R1bGUtcmVtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVNb2R1bGUodGFyZ2V0KTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvL0ltcG9ydFxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1vZHVsYXJpdHktanMtdGhpY2tib3gtaW1wb3J0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpO1xuICAgICAgICAgICAgZWRpdGluZ01vZHVsZSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG5cbiAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnaW1wb3J0JztcbiAgICAgICAgICAgIE1vZGFsLm9wZW4oJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVkaXRcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2R1bGFyaXR5LWpzLXRoaWNrYm94LW9wZW4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgZWwgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBpZiAoZWwuYXR0cignaHJlZicpLmluZGV4T2YoJ3Bvc3QucGhwJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgTW9kYWwub3BlbigkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IE1vZHVsZSgpO1xuXG59KShqUXVlcnkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgkKSB7XG5cbiAgICBmdW5jdGlvbiBBdXRvc2F2ZSgpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy90aGlzLmhhbmRsZUV2ZW50cygpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIEF1dG9zYXZlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICQoJyNtb2R1bGFyaXR5LW9wdGlvbnMgI3B1Ymxpc2hpbmctYWN0aW9uIC5zcGlubmVyJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSAkKHNlbGVjdG9yKS5zZXJpYWxpemVPYmplY3QoKTtcbiAgICAgICAgcmVxdWVzdC5pZCA9IG1vZHVsYXJpdHlfcG9zdF9pZDtcbiAgICAgICAgcmVxdWVzdC5hY3Rpb24gPSAnc2F2ZV9tb2R1bGVzJztcblxuICAgICAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1vcHRpb25zICNwdWJsaXNoaW5nLWFjdGlvbiAuc3Bpbm5lcicpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgQXV0b3NhdmUoKTtcblxufSkoalF1ZXJ5KTtcbiIsImltcG9ydCBUaGlja2JveCBmcm9tICcuLi9lZGl0b3IvdGhpY2tib3guanMnO1xuaW1wb3J0IE1vZHVsZSBmcm9tICcuLi9lZGl0b3IvbW9kdWxlLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9wcm9tcHQvbW9kYWwuanMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIGVkaXRpbmdXaWRnZXQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIFdpZGdldCgpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAvKiBJbXBvcnQgKi9cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC13aWRnZXQtaW1wb3J0LXdpZGdldCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgZWRpdGluZ1dpZGdldCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy53aWRnZXQtaW5zaWRlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0VXJsID0gTW9kdWxlLmdldEltcG9ydFVybCh7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RUeXBlOiAkKGUudGFyZ2V0KS5wYXJlbnRzKCcud2lkZ2V0LWluc2lkZScpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdHlwZSBzZWxlY3QnKS52YWwoKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgTW9kdWxlLmVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcud2lkZ2V0LWluc2lkZScpO1xuXG4gICAgICAgICAgICAgICAgVGhpY2tib3gucG9zdEFjdGlvbiA9ICdpbXBvcnQtd2lkZ2V0JztcbiAgICAgICAgICAgICAgICBNb2RhbC5vcGVuKGltcG9ydFVybCk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvKiBFZGl0ICovXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1vZHVsYXJpdHktanMtdGhpY2tib3gtb3Blbi13aWRnZXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHZhciBlbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuYXR0cignaHJlZicpLmluZGV4T2YoJ3Bvc3QucGhwJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBUaGlja2JveC5wb3N0QWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuXG4gICAgICAgICAgICAgICAgTW9kYWwub3BlbigkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cblxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIFdpZGdldC5wcm90b3R5cGUuaXNFZGl0aW5nV2lkZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZWRpdGluZ1dpZGdldDtcbiAgICB9O1xuXG4gICAgV2lkZ2V0LnByb3RvdHlwZS51cGRhdGVXaWRnZXQgPSBmdW5jdGlvbiAod2lkZ2V0LCBkYXRhKSB7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWlkLXNwYW4nKS5odG1sKGRhdGEucG9zdF9pZCk7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWlkJykudmFsKGRhdGEucG9zdF9pZCk7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWVkaXQnKS5hdHRyKCdocmVmJywncG9zdC5waHA/cG9zdD0nICsgZGF0YS5wb3N0X2lkICsgJyZhY3Rpb249ZWRpdCZpc190aGlja2JveD10cnVlJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkKHdpZGdldCkuZmluZCgnLm1vZHVsYXJpdHktd2lkZ2V0LW1vZHVsZS10aXRsZS1zcGFuJykuaHRtbChkYXRhLnRpdGxlKTtcbiAgICAgICAgJCh3aWRnZXQpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdGl0bGUnKS52YWwoZGF0YS50aXRsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgV2lkZ2V0KCk7XG5cbn0pKGpRdWVyeSk7XG4iLCJleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcblxuICAgIGZ1bmN0aW9uIEhlbHBlcnMoKSB7XG4gICAgICAgICQoZnVuY3Rpb24oKXtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBIZWxwZXJzLnByb3RvdHlwZS51dWlkID0gZnVuY3Rpb24gKHNlcGFyYXRvcikge1xuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IEhlbHBlcnMoKTtcblxufSkoalF1ZXJ5KTtcbiIsImltcG9ydCBUaGlja2JveCBmcm9tICcuL2VkaXRvci90aGlja2JveC5qcyc7XG5pbXBvcnQgTW9kdWxlIGZyb20gJy4vZWRpdG9yL21vZHVsZS5qcyc7XG5pbXBvcnQgQXV0b3NhdmUgZnJvbSAnLi9lZGl0b3IvYXV0b3NhdmUuanMnO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4vcHJvbXB0L21vZGFsLmpzJztcbmltcG9ydCBXaWRnZXQgZnJvbSAnLi9oZWxwZXJzL3dpZGdldC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuICAgIC8qKlxuICAgICAqIEFkZCBuZXcgcG9zdCBjYWxsYmFja1xuICAgICAqL1xuICAgIGlmIChUaGlja2JveC5wb3N0QWN0aW9uID09ICdhZGQnICYmIG1vZHVsYXJpdHlfcG9zdF9hY3Rpb24gPT0gJycpIHtcbiAgICAgICAgVGhpY2tib3gubW9kdWxlUG9zdENyZWF0ZWQobW9kdWxhcml0eV9wb3N0X2lkKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKFRoaWNrYm94LnBvc3RBY3Rpb24gPT0gJ2VkaXQtaW5saW5lLXNhdmVkJykge1xuICAgICAgICBwYXJlbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEVkaXQgcG9zdCBjYWxsYmFja1xuICAgICAqL1xuICAgIGlmIChUaGlja2JveC5wb3N0QWN0aW9uID09ICdlZGl0JyAmJiBtb2R1bGFyaXR5X3Bvc3RfYWN0aW9uID09ICcnKSB7XG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwdWJsaXNoJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnYWRkJztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEVkaXQgcG9zdCBjYWxsYmFja1xuICAgICAqL1xuICAgIGlmIChUaGlja2JveC5wb3N0QWN0aW9uID09ICdlZGl0LWlubGluZS1ub3Qtc2F2ZWQnKSB7XG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwdWJsaXNoJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnZWRpdC1pbmxpbmUtc2F2ZWQnO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogSW1wb3J0IHBvc3QgbW9kaWZpY2F0aW9ucyBhbmQgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBpZiAoVGhpY2tib3gucG9zdEFjdGlvbiA9PSAnaW1wb3J0Jykge1xuICAgICAgICAkKCcuY2hlY2stY29sdW1uIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLnJlbW92ZSgpO1xuICAgICAgICAkKCcud3AtbGlzdC10YWJsZScpLmFkZENsYXNzKCdtb2R1bGFyaXR5LXdwLWxpc3QtdGFibGUnKTtcbiAgICAgICAgJCgndGJvZHkgLmNoZWNrLWNvbHVtbicpLmFkZENsYXNzKCdtb2R1bGFyaXR5LWltcG9ydC1jb2x1bW4nKS5hcHBlbmQoJzxidXR0b24gY2xhc3M9XCJidXR0b24gbW9kdWxhcml0eS1pbXBvcnQtYnV0dG9uXCIgZGF0YS1tb2R1bGFyaXR5LWFjdGlvbj1cImltcG9ydFwiPkltcG9ydDwvYnV0dG9uPicpO1xuICAgICAgICAkKCcjcG9zdHMtZmlsdGVyJykuYXBwZW5kKCc8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJpc190aGlja2JveFwiIHZhbHVlPVwidHJ1ZVwiPicpO1xuICAgICAgICBcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLW1vZHVsYXJpdHktYWN0aW9uPVwiaW1wb3J0XCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHBvc3RJZCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ3RyJykuYXR0cignaWQnKTtcbiAgICAgICAgICAgIHBvc3RJZCA9IHBvc3RJZC5zcGxpdCgnLScpWzFdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gTW9kdWxlLmlzRWRpdGluZ01vZHVsZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdnZXRfcG9zdCcsXG4gICAgICAgICAgICAgICAgaWQ6IHBvc3RJZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdtb2R1bGFyaXR5LWxvYWRlci10YWtlb3ZlcicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RfaWQ6IHJlc3BvbnNlLklELFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UucG9zdF90aXRsZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgTW9kdWxlLnVwZGF0ZU1vZHVsZShtb2R1bGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIEF1dG9zYXZlLnNhdmUoJ2Zvcm0nKTtcbiAgICAgICAgICAgICAgICBNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfSwgJ2pzb24nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEltcG9ydCBwb3N0IG1vZGlmaWNhdGlvbnMgYW5kIGNhbGxiYWNrXG4gICAgICovXG4gICAgaWYgKFRoaWNrYm94LnBvc3RBY3Rpb24gPT0gJ2ltcG9ydC13aWRnZXQnKSB7XG4gICAgICAgICQoJy5jaGVjay1jb2x1bW4gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykucmVtb3ZlKCk7XG4gICAgICAgICQoJy53cC1saXN0LXRhYmxlJykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktd3AtbGlzdC10YWJsZScpO1xuICAgICAgICAkKCd0Ym9keSAuY2hlY2stY29sdW1uJykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktaW1wb3J0LWNvbHVtbicpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBtb2R1bGFyaXR5LWltcG9ydC1idXR0b25cIiBkYXRhLW1vZHVsYXJpdHktYWN0aW9uPVwiaW1wb3J0XCI+SW1wb3J0PC9idXR0b24+Jyk7XG4gICAgICAgIFxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtbW9kdWxhcml0eS1hY3Rpb249XCJpbXBvcnRcIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcG9zdElkID0gJChlLnRhcmdldCkuY2xvc2VzdCgndHInKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgcG9zdElkID0gcG9zdElkLnNwbGl0KCctJylbMV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB3aWRnZXQgPSBXaWRnZXQuaXNFZGl0aW5nV2lkZ2V0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2dldF9wb3N0JyxcbiAgICAgICAgICAgICAgICBpZDogcG9zdElkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktbG9hZGVyLXRha2VvdmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQucG9zdChhamF4dXJsLCByZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdF9pZDogcmVzcG9uc2UuSUQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5wb3N0X3RpdGxlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBXaWRnZXQudXBkYXRlV2lkZ2V0KHdpZGdldCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sICdqc29uJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbn0pKGpRdWVyeSk7XG5cblxuXG4iLCJpbXBvcnQgTW9kdWxlcyBmcm9tICcuL21vZHVsZS5qcyc7XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBzb3J0YWJsZUluO1xuXG4gICAgZnVuY3Rpb24gRHJhZ0FuZERyb3AoKSB7XG4gICAgICAgICQoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYWdlbm93ICE9PSAndW5kZWZpbmVkJyAmJiBwYWdlbm93ID09ICdhZG1pbl9wYWdlX21vZHVsYXJpdHktZWRpdG9yJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgRHJhZ0FuZERyb3AucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0dXBEcmFnZ2FibGUoKTtcbiAgICAgICAgdGhpcy5zZXR1cERyb3BwYWJsZSgpO1xuICAgICAgICB0aGlzLnNldHVwU29ydGFibGUoKTtcbiAgICB9O1xuXG4gICAgRHJhZ0FuZERyb3AucHJvdG90eXBlLnNldHVwU29ydGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5tb2R1bGFyaXR5LWpzLXNvcnRhYmxlJykuc29ydGFibGUoe1xuICAgICAgICAgICAgaGFuZGxlOiAnLm1vZHVsYXJpdHktc29ydGFibGUtaGFuZGxlJyxcbiAgICAgICAgICAgIGNvbm5lY3RXaXRoOiAnLm1vZHVsYXJpdHktanMtc29ydGFibGUnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICd1aS1zb3J0YWJsZS1wbGFjZWhvbGRlcicsXG4gICAgICAgICAgICBzdGFydDogIGZ1bmN0aW9uKGUsIHVpKSB7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWRUYXJnZXRBcmVhcyA9IGpRdWVyeSh1aS5pdGVtKS5hdHRyKCdkYXRhLXNpZGViYXItaW5jb21wYWJpbGl0eScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRUYXJnZXRBcmVhcyA9IEpTT04ucGFyc2UodmFsaWRUYXJnZXRBcmVhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRUYXJnZXRBcmVhcyAmJiB0eXBlb2YgdmFsaWRUYXJnZXRBcmVhcyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShcIi5tb2R1bGFyaXR5LXNpZGViYXItYXJlYVwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBzaWRlYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF2YWxpZFRhcmdldEFyZWFzLmluY2x1ZGVzKGpRdWVyeSh0aGlzKS5hdHRyKCdkYXRhLWFyZWEtaWQnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcIm1vZHVsYXJpdHktaW5jb21wYXRpYmxlLWFyZWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5jb21wYWJpbGl0eSBpbmZvcm1hdGlvbiBub3QgZGVmaW5lZCAtIFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoZSwgdWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2lkZWJhcklkID0gdWkuaXRlbS5wYXJlbnRzKCd1bCcpLmRhdGEoJ2FyZWEtaWQnKTtcbiAgICAgICAgICAgICAgICB1aS5pdGVtLmZpbmQoJ2lucHV0W25hbWVePVwibW9kdWxhcml0eV9tb2R1bGVzXCJdJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld05hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKS5yZXBsYWNlKC9cXFsoLio/KVxcXS9pLCAnWycgKyBzaWRlYmFySWQgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ25hbWUnLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoXCJbaWRePW1vZHVsYXJpdHktbWItXVwiKS5yZW1vdmVDbGFzcyhcIm1vZHVsYXJpdHktaW5jb21wYXRpYmxlLWFyZWFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmJpbmQodGhpcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldHVwIGRyYWdnYWJsZSBmdW5jdGlvbmFsbGl0eVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgRHJhZ0FuZERyb3AucHJvdG90eXBlLnNldHVwRHJhZ2dhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcubW9kdWxhcml0eS1qcy1kcmFnZ2FibGUnKS5kcmFnZ2FibGUoe1xuICAgICAgICAgICAgYXBwZW5kVG86ICdib2R5JyxcbiAgICAgICAgICAgIGNvbnRhaW5tZW50OiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgc2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgICAgIGhlbHBlcjogJ2Nsb25lJyxcbiAgICAgICAgICAgIHJldmVydDogJ2ludmFsaWQnLFxuICAgICAgICAgICAgcmV2ZXJ0RHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgIHN0YXJ0OiAgZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZFRhcmdldEFyZWFzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2RhdGEtc2lkZWJhci1pbmNvbXBhYmlsaXR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFRhcmdldEFyZWFzID0gSlNPTi5wYXJzZSh2YWxpZFRhcmdldEFyZWFzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkVGFyZ2V0QXJlYXMgJiYgdHlwZW9mIHZhbGlkVGFyZ2V0QXJlYXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIubW9kdWxhcml0eS1zaWRlYmFyLWFyZWFcIikuZWFjaChmdW5jdGlvbihpbmRleCwgc2lkZWJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdmFsaWRUYXJnZXRBcmVhcy5pbmNsdWRlcyhqUXVlcnkodGhpcykuYXR0cignZGF0YS1hcmVhLWlkJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKFwibW9kdWxhcml0eS1pbmNvbXBhdGlibGUtYXJlYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluY29tcGFiaWxpdHkgaW5mb3JtYXRpb24gbm90IGRlZmluZWQgLSBcIiArIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoXCJbaWRePW1vZHVsYXJpdHktbWItXVwiKS5yZW1vdmVDbGFzcyhcIm1vZHVsYXJpdHktaW5jb21wYXRpYmxlLWFyZWFcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0dXAgZHJvcHBhYmxlIGZ1bmN0aW9uYWxsaXR5XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBEcmFnQW5kRHJvcC5wcm90b3R5cGUuc2V0dXBEcm9wcGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5tb2R1bGFyaXR5LWpzLWRyb3BwYWJsZScpLmRyb3BwYWJsZSh7XG4gICAgICAgICAgICBhY2NlcHQ6ICcubW9kdWxhcml0eS1qcy1kcmFnZ2FibGUnLFxuICAgICAgICAgICAgaG92ZXJDbGFzczogJ21vZHVsYXJpdHktc3RhdGUtZHJvcHBhYmxlJyxcbiAgICAgICAgICAgIGRyb3A6IGZ1bmN0aW9uIChlLCB1aSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kTW9kdWxlKGUsIHVpKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICB9KS5iaW5kKHRoaXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIGEgbW9kdWxlIHRvIHRoZSB0YXJnZXQgd2hlbiBkcm9wcGVkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBlICBFdmVudFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gdWkgVUlcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIERyYWdBbmREcm9wLnByb3RvdHlwZS5hcHBlbmRNb2R1bGUgPSBmdW5jdGlvbiAoZSwgdWkpIHtcbiAgICAgICAgdmFyIG1vZHVsZSA9IHVpLmRyYWdnYWJsZTtcbiAgICAgICAgdmFyIG1vZHVsZU5hbWUgPSBtb2R1bGUuZmluZCgnLm1vZHVsYXJpdHktbW9kdWxlLW5hbWUnKS50ZXh0KCk7XG4gICAgICAgIHZhciBtb2R1bGVJZCA9IG1vZHVsZS5kYXRhKCdtb2R1bGUtaWQnKTtcbiAgICAgICAgdmFyIGluY29tcGFiaWxpdHkgPSBtb2R1bGUuYXR0cignZGF0YS1zaWRlYmFyLWluY29tcGFiaWxpdHknKTtcblxuICAgICAgICBNb2R1bGVzLmFkZE1vZHVsZShlLnRhcmdldCwgbW9kdWxlSWQsIG1vZHVsZU5hbWUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBpbmNvbXBhYmlsaXR5KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBEcmFnQW5kRHJvcCgpO1xuXG59KShqUXVlcnkpO1xuIiwiaW1wb3J0ICcuL21vZHVsYXJpdHktZWRpdG9yLW1vZGFsLmpzJztcbmltcG9ydCAnLi9lZGl0b3IvYXV0b3NhdmUnO1xuaW1wb3J0ICcuL2VkaXRvci9kcmFnQW5kRHJvcC5qcyc7XG5pbXBvcnQgJy4vZWRpdG9yL21vZHVsZS5qcyc7XG5pbXBvcnQgVGhpY2tib3ggZnJvbSAnLi9lZGl0b3IvdGhpY2tib3guanMnO1xuXG5pbXBvcnQgJy4vaGVscGVycy9oZWxwZXJzLmpzJztcbmltcG9ydCAnLi9oZWxwZXJzL3NlcmlhbGl6ZU9iamVjdC5qcyc7XG5pbXBvcnQgJy4vaGVscGVycy93aWRnZXQuanMnO1xuXG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9wcm9tcHQvbW9kYWwuanMnO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcbiAgICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0uc2lkZWJhci1hcmVhLWFjdGl2YXRvcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBpc0NoZWNrZWQgPSAkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpO1xuICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XG5cbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGlmICghaXNDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXQuc2lkZWJhci1hcmVhLWFjdGl2YXRvclt0eXBlPVwiY2hlY2tib3hcIl1bdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJykuYXR0cignY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXQuc2lkZWJhci1hcmVhLWFjdGl2YXRvclt0eXBlPVwiY2hlY2tib3hcIl1bdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJykuYXR0cignY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KShqUXVlcnkpO1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICAgIC8vIFNob3cgc3Bpbm5lciB3aGVuIGNsaWNraW5nIHNhdmUgb24gTW9kdWxhcml0eSBvcHRpb25zIHBhZ2VcbiAgICAkKCcjbW9kdWxhcml0eS1vcHRpb25zICNwdWJsaXNoJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuc3Bpbm5lcicpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IG1lbnUgaXRlbSBpbiB0aGUgTW9kdWxhcml0eSBzdWJtZW51IChhZG1pbiBtZW51KVxuICAgICQoJ2Eud3AtZmlyc3QtaXRlbVtocmVmPVwiYWRtaW4ucGhwP3BhZ2U9bW9kdWxhcml0eVwiXScpLnBhcmVudCgnbGknKS5yZW1vdmUoKTtcblxuICAgIC8vIFRyaWdnZXIgYXV0b3NhdmUgd2hlbiBzd2l0Y2hpbmcgdGFic1xuICAgICQoJyNtb2R1bGFyaXR5LXRhYnMgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh3cC5hdXRvc2F2ZSkge1xuICAgICAgICAgICAgJCh3aW5kb3cpLnVuYmluZCgpO1xuXG4gICAgICAgICAgICB3cC5hdXRvc2F2ZS5zZXJ2ZXIudHJpZ2dlclNhdmUoKTtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkuYWpheENvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbn0pKGpRdWVyeSk7XG5cblxuLyogQXV0byBzY3JvbGxpbmcgY29udGVudCAqL1xualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuICAgIGlmICgkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykubGVuZ3RoKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykub2Zmc2V0KCk7XG4gICAgICAgICQoZG9jdW1lbnQpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgNTAgPiBvZmZzZXQudG9wICYmICEkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykuaGFzQ2xhc3MoJ2lzLWZpeGVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykuYWRkQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSArIDUwIDwgb2Zmc2V0LnRvcCAmJiAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykuaGFzQ2xhc3MoJ2lzLWZpeGVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1tYi1tb2R1bGVzJykucmVtb3ZlQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoJy5tb2R1bGFyaXR5LWVkaXQtbW9kdWxlIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICBUaGlja2JveC5wb3N0QWN0aW9uID0gJ2VkaXQtaW5saW5lLW5vdC1zYXZlZCc7XG4gICAgICAgTW9kYWwub3BlbigkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignaHJlZicpKTtcbiAgICB9KTtcbn0pO1xuXG4vKiBQb3N0IGZpbHRlcnMgaXMgdmlzaWJsZSBpbiBiYWNrZW5kIGlmIHBvc3R0eXBlIGlzIHNldCB0byBwb3N0IG9yIHBhZ2UgKi9cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcbiAgICAkKCcuZnJvbnRlbmQtZmlsdGVyJykuaGlkZSgpO1xuXG4gICAgaWYgKCQoJyNtb2R1bGFyaXR5LWxhdGVzdC1wb3N0LXR5cGUgc2VsZWN0JykudmFsKCkgPT09ICdwb3N0JyB8fFxuICAgICAgICAkKCcjbW9kdWxhcml0eS1sYXRlc3QtcG9zdC10eXBlIHNlbGVjdCcpLnZhbCgpID09PSAncGFnZScpIHtcbiAgICAgICAgJCgnLmZyb250ZW5kLWZpbHRlcicpLnNob3coKTtcbiAgICB9XG4gICAgJCgnYm9keScpLm9uKCdjaGFuZ2UnLCAnI21vZHVsYXJpdHktbGF0ZXN0LXBvc3QtdHlwZSBzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKCcjbW9kdWxhcml0eS1sYXRlc3QtcG9zdC10eXBlIHNlbGVjdCcpLnZhbCgpID09PSAncG9zdCdcbiAgICAgICAgICAgIHx8ICQoJyNtb2R1bGFyaXR5LWxhdGVzdC1wb3N0LXR5cGUgc2VsZWN0JykudmFsKCkgPT09ICdwYWdlJykge1xuICAgICAgICAgICAgJCgnLmZyb250ZW5kLWZpbHRlcicpLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5mcm9udGVuZC1maWx0ZXInKS5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9KS50cmlnZ2VyKCdjaGFuZ2UnKTtcbn0pOyIsImV4cG9ydCBkZWZhdWx0IGpRdWVyeS5mbi5zZXJpYWxpemVPYmplY3QgPSBmdW5jdGlvbigpXG57XG4gICAgdmFyIG8gPSB7fTtcbiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTtcbiAgICBqUXVlcnkuZWFjaChhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXS5wdXNoKSB7XG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IHRoaXMudmFsdWUgfHwgJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbztcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9