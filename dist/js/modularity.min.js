!function(t){var e={};function o(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=11)}([function(t,e,o){"use strict";var i=o(2),a=o(1),n=o(3);e.a=function(t){function e(){}return e.prototype.modulePostCreated=function(e){a.a.close();var o=i.a.isEditingModule(),r={action:"get_post",id:e};t.post(ajaxurl,r,(function(t){var e={post_id:t.ID,title:t.post_title};i.a.updateModule(o,e),n.a.save("form")}),"json")},new e}(jQuery)},function(t,e,o){"use strict";e.a=function(t){function e(){this.handleEvents()}return e.prototype.open=function(e){t("body").addClass("modularity-modal-open").append('            <div id="modularity-modal">                <div class="modularity-modal-wrapper">                    <button class="modularity-modal-close" data-modularity-modal-action="close">&times; '+modularityAdminLanguage.close+'</button>                    <div class="modularity-modal-spinner-container" id="modularity-iframe-loader"><span class="modularity-modal-spinner"></span></div>                    <iframe class="modularity-modal-iframe" src="'+e+'" frameborder="0" onload="document.getElementById(\'modularity-iframe-loader\').style.display=\'none\';" allowtransparency></iframe>                </div>            </div>        '),!0},e.prototype.close=function(){t("body").removeClass("modularity-modal-open"),t("#modularity-modal").remove(),!1},e.prototype.handleEvents=function(){t(document).on("click",'[data-modularity-modal-action="close"]',function(t){t.preventDefault(),this.close()}.bind(this))},new e}(jQuery)},function(t,e,o){"use strict";var i=o(0),a=o(5),n=o.n(a),r=o(1);e.a=function(t){var e={is_thickbox:!0},o=!1;function a(){t(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"==pagenow&&(this.handleEvents(),this.loadModules(modularity_post_id))}.bind(this))}return a.prototype.loadModules=function(e){var o={action:"get_post_modules",id:e};t.post(ajaxurl,o,function(e){t.each(e,function(e,o){var i=t('.modularity-sidebar-area[data-area-id="'+e+'"]');t.each(o.modules,function(e,o){"true"==o.hidden&&(o.hidden=!0);var a=void 0===o.sidebar_incompability||t.isEmptyObject(o.sidebar_incompability)?"":JSON.stringify(o.sidebar_incompability);this.addModule(i,o.post_type,o.post_type_name,o.post_title,o.ID,o.hidden,o.columnWidth,o.isDeprecated,a)}.bind(this)),i.removeClass("modularity-spinner")}.bind(this)),this.initCompleted=!0,t(".modularity-sidebar-area").removeClass("modularity-spinner")}.bind(this),"json")},a.prototype.isEditingModule=function(){return o},a.prototype.getThickBoxUrl=function(o,i){var a="",n={};switch(o){case"add":a="post-new.php";break;case"edit":a="post.php"}return"number"==typeof i.postId&&(n.post=i.postId,n.action="edit"),"string"==typeof i.postType&&(n.post_type=i.postType),admin_url+a+"?"+t.param(n)+"&"+t.param(e)},a.prototype.getImportUrl=function(o){var i={};return i.post_type=o.postType,admin_url+"edit.php?"+t.param(i)+"&"+t.param(e)},a.prototype.addModule=function(e,o,a,r,d,l,s,u,p){r=void 0!==r?": "+r:"",d=void 0!==d?d:"",s=void 0!==s?s:"",deprecated=!0===u?'<span class="modularity-deprecated" style="color:#ff0000;">('+modularityAdminLanguage.deprecated+")</span>":"",p=void 0!==p?p:"";var c=this.getThickBoxUrl("add",{postType:o});i.a.postAction="add",d&&(c=this.getThickBoxUrl("edit",{postId:d}),i.a.postAction="edit");var m=this.getImportUrl({postType:o}),y="";!0===l&&(y="checked");var f=t(e).data("area-id"),b=n.a.uuid(),h='<li id="post-'+d+'" data-module-id="'+o+'" data-module-stored-width="'+s+"\" data-sidebar-incompability='"+p+'\'>                <span class="modularity-line-wrapper">                    <span class="modularity-sortable-handle"></span>                    <span class="modularity-module-name">                        '+a+"                        "+deprecated+'                        <span class="modularity-module-title">'+r+'</span>                        <label class="modularity-module-hide">                            <input type="checkbox" name="modularity_modules['+f+"]["+b+'][hidden]" value="hidden" '+y+" />                            "+modularityAdminLanguage.langhide+'                        </label>                    </span>                    <span class="modularity-module-columns">                        <label>'+modularityAdminLanguage.width+':</label>                        <select name="modularity_modules['+f+"]["+b+'][columnWidth]">                            '+modularityAdminLanguage.widthOptions+'                        </select>                    </span>                    <span class="modularity-module-actions">                        <a href="'+c+'" data-modularity-modal class="modularity-js-thickbox-open"><span>'+modularityAdminLanguage.langedit+'</span></a>                        <a href="'+m+'" class="modularity-js-thickbox-import"><span>'+modularityAdminLanguage.langimport+'</span></a>                        <a href="#remove" class="modularity-module-remove"><span>'+modularityAdminLanguage.langremove+'</span></a>                    </span>                    <input type="hidden" name="modularity_modules['+f+"]["+b+'][postid]" class="modularity-js-module-id" value="'+d+'" required>                </span>            </li>';t(e).append(h),t(".modularity-sidebar-area > li").each((function(e,o){t(".modularity-module-columns select",t(o)).val(t(o).attr("data-module-stored-width"))})),t(".modularity-js-sortable").sortable("refresh")},a.prototype.updateModule=function(t,e){t.find("a.modularity-js-thickbox-open").attr("href",this.getThickBoxUrl("edit",{postId:e.post_id})),t.find("input.modularity-js-module-id").val(e.post_id).change(),t.find(".modularity-module-title").text(": "+e.title)},a.prototype.removeModule=function(t){confirm(modularityAdminLanguage.actionRemove)&&t.remove()},a.prototype.handleEvents=function(){t(document).on("click",".modularity-module-remove",function(e){e.preventDefault();var o=t(e.target).closest("li");this.removeModule(o)}.bind(this)),t(document).on("click",".modularity-js-thickbox-import",(function(e){e.preventDefault();t(e.target).closest("a");o=t(e.target).closest("li"),i.a.postAction="import",r.a.open(t(e.target).closest("a").attr("href"))})),t(document).on("click",".modularity-js-thickbox-open",function(e){e.preventDefault(),t(e.target).closest("a").attr("href").indexOf("post.php")>-1&&(i.a.postAction="edit"),o=t(e.target).closest("li"),r.a.open(t(e.target).closest("a").attr("href"))}.bind(this))},new a}(jQuery)},function(t,e,o){"use strict";e.a=function(t){function e(){t(function(){}.bind(this))}return e.prototype.save=function(e){t("#modularity-options #publishing-action .spinner").css("visibility","visible");var o=t(e).serializeObject();o.id=modularity_post_id,o.action="save_modules",t.post(ajaxurl,o,(function(e){t("#modularity-options #publishing-action .spinner").css("visibility","hidden")}))},new e}(jQuery)},function(t,e,o){"use strict";var i=o(0),a=o(2),n=o(1);e.a=function(t){var e=!1;function o(){t(function(){t(document).on("click",".modularity-js-thickbox-widget-import-widget",(function(o){o.preventDefault(),e=t(o.target).parents(".widget-inside");var r=a.a.getImportUrl({postType:t(o.target).parents(".widget-inside").find(".modularity-widget-module-type select").val()});a.a.editingModule=t(o.target).closest(".widget-inside"),i.a.postAction="import-widget",n.a.open(r)})),t(document).on("click",".modularity-js-thickbox-open-widget",function(e){e.preventDefault(),t(e.target).closest("a").attr("href").indexOf("post.php")>-1&&(i.a.postAction="edit");t(e.target).closest("li");n.a.open(t(e.target).closest("a").attr("href"))}.bind(this))}.bind(this))}return o.prototype.isEditingWidget=function(){return e},o.prototype.updateWidget=function(e,o){t(e).find(".modularity-widget-module-id-span").html(o.post_id),t(e).find(".modularity-widget-module-id").val(o.post_id),t(e).find(".modularity-widget-module-edit").attr("href","post.php?post="+o.post_id+"&action=edit&is_thickbox=true").removeClass("hidden"),t(e).find(".modularity-widget-module-title-span").html(o.title),t(e).find(".modularity-widget-module-title").val(o.title)},new o}(jQuery)},function(t,e){t.exports((function(t){function e(){t(function(){}.bind(this))}return e.prototype.uuid=function(t){return Math.random().toString(36).substr(2,9)},new e}))(jQuery)},function(t,e,o){"use strict";o.r(e);var i,a=o(0),n=o(2),r=o(3),d=o(1),l=o(4);e.default=(i=jQuery,"add"==a.a.postAction&&""==modularity_post_action&&a.a.modulePostCreated(modularity_post_id),"edit-inline-saved"==a.a.postAction&&parent.location.reload(),"edit"==a.a.postAction&&""==modularity_post_action&&jQuery(document).on("click","#publish",(function(t){a.a.postAction="add"})),"edit-inline-not-saved"==a.a.postAction&&jQuery(document).on("click","#publish",(function(t){a.a.postAction="edit-inline-saved"})),"import"==a.a.postAction&&(i('.check-column input[type="checkbox"]').remove(),i(".wp-list-table").addClass("modularity-wp-list-table"),i("tbody .check-column").addClass("modularity-import-column").append('<button class="button modularity-import-button" data-modularity-action="import">Import</button>'),i("#posts-filter").append('<input type="hidden" name="is_thickbox" value="true">'),i(document).on("click",'[data-modularity-action="import"]',(function(t){t.preventDefault();var e=i(t.target).closest("tr").attr("id");e=e.split("-")[1];var o=n.a.isEditingModule(),a={action:"get_post",id:e};i("body").addClass("modularity-loader-takeover"),i.post(ajaxurl,a,(function(t){var e={post_id:t.ID,title:t.post_title};n.a.updateModule(o,e),r.a.save("form"),d.a.close()}),"json")}))),void("import-widget"==a.a.postAction&&(i('.check-column input[type="checkbox"]').remove(),i(".wp-list-table").addClass("modularity-wp-list-table"),i("tbody .check-column").addClass("modularity-import-column").append('<button class="button modularity-import-button" data-modularity-action="import">Import</button>'),i(document).on("click",'[data-modularity-action="import"]',(function(t){t.preventDefault();var e=i(t.target).closest("tr").attr("id");e=e.split("-")[1];var o=l.a.isEditingWidget(),a={action:"get_post",id:e};i("body").addClass("modularity-loader-takeover"),i.post(ajaxurl,a,(function(t){var e={post_id:t.ID,title:t.post_title};l.a.updateWidget(o,e),d.a.close()}),"json")})))))},function(t,e,o){"use strict";(function(t){var e=o(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports((function(t){function o(){t(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"==pagenow&&this.init()}.bind(this))}return o.prototype.init=function(){this.setupDraggable(),this.setupDroppable(),this.setupSortable()},o.prototype.setupSortable=function(){t(".modularity-js-sortable").sortable({handle:".modularity-sortable-handle",connectWith:".modularity-js-sortable",placeholder:"ui-sortable-placeholder",start:function(t,e){try{var o=jQuery(e.item).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===i(o)&&jQuery(".modularity-sidebar-area").each((function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")}))}catch(t){console.log("Incompability information not defined - "+t)}},stop:function(e,o){var i=o.item.parents("ul").data("area-id");o.item.find('input[name^="modularity_modules"]').each((function(e,o){var a=t(this).attr("name").replace(/\[(.*?)\]/i,"["+i+"]");t(this).attr("name",a)})),jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}}).bind(this)},o.prototype.setupDraggable=function(){t(".modularity-js-draggable").draggable({appendTo:"body",containment:"document",scroll:!1,helper:"clone",revert:"invalid",revertDuration:200,start:function(t,e){try{var o=jQuery(this).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===i(o)&&jQuery(".modularity-sidebar-area").each((function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")}))}catch(t){console.log("Incompability information not defined - "+t)}},stop:function(t,e){jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}})},o.prototype.setupDroppable=function(){t(".modularity-js-droppable").droppable({accept:".modularity-js-draggable",hoverClass:"modularity-state-droppable",drop:function(t,e){this.appendModule(t,e)}.bind(this)}).bind(this)},o.prototype.appendModule=function(t,o){var i=o.draggable,a=i.find(".modularity-module-name").text(),n=i.data("module-id"),r=i.attr("data-sidebar-incompability");e.a.addModule(t.target,n,a,void 0,void 0,void 0,void 0,void 0,r)},new o}))(jQuery)}).call(this,o(8)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},,,function(t,e,o){"use strict";o.r(e);o(6),o(3),o(7),o(2);var i,a=o(0),n=(o(5),jQuery.fn.serializeObject=function(){var t={},e=this.serializeArray();return jQuery.each(e,(function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t},o(4),o(1));e.default=void(i=jQuery)('input[type="checkbox"].sidebar-area-activator').on("click",(function(t){var e=i(this).is(":checked"),o=i(this).attr("value");t.shiftKey&&(e?i('input.sidebar-area-activator[type="checkbox"][value="'+o+'"]').attr("checked",!0):i('input.sidebar-area-activator[type="checkbox"][value="'+o+'"]').attr("checked",!1))}));!function(t){t("#modularity-options #publish").on("click",(function(){t(this).siblings(".spinner").css("visibility","visible")})),t('a.wp-first-item[href="admin.php?page=modularity"]').parent("li").remove(),t("#modularity-tabs a").on("click",(function(e){return wp.autosave&&(t(window).unbind(),wp.autosave.server.triggerSave(),t(document).ajaxComplete((function(){return!0}))),!0}))}(jQuery),jQuery(document).ready((function(t){if(t("#modularity-mb-modules").length){var e=t("#modularity-mb-modules").offset();t(document).scroll((function(){t(window).scrollTop()+50>e.top&&!t("#modularity-mb-modules").hasClass("is-fixed")?t("#modularity-mb-modules").addClass("is-fixed"):t(window).scrollTop()+50<e.top&&t("#modularity-mb-modules").hasClass("is-fixed")&&t("#modularity-mb-modules").removeClass("is-fixed")}))}t(".modularity-edit-module a").on("click",(function(e){e.preventDefault(),a.a.postAction="edit-inline-not-saved",n.a.open(t(e.target).closest("a").attr("href"))}))})),jQuery(document).ready((function(t){t(".frontend-filter").hide(),"post"!==t("#modularity-latest-post-type select").val()&&"page"!==t("#modularity-latest-post-type select").val()||t(".frontend-filter").show(),t("body").on("change","#modularity-latest-post-type select",(function(){"post"===t("#modularity-latest-post-type select").val()||"page"===t("#modularity-latest-post-type select").val()?t(".frontend-filter").show():t(".frontend-filter").hide()})).trigger("change")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2VkaXRvci90aGlja2JveC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvcHJvbXB0L21vZGFsLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvYXV0b3NhdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL2hlbHBlcnMvd2lkZ2V0LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9oZWxwZXJzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL21vZHVsYXJpdHktZWRpdG9yLW1vZGFsLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9lZGl0b3IvZHJhZ0FuZERyb3AuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9tb2R1bGFyaXR5LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9oZWxwZXJzL3NlcmlhbGl6ZU9iamVjdC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIiQiLCJUaGlja2JveCIsIm1vZHVsZVBvc3RDcmVhdGVkIiwicG9zdElkIiwiTW9kYWwiLCJjbG9zZSIsIk1vZHVsZSIsImlzRWRpdGluZ01vZHVsZSIsInJlcXVlc3QiLCJhY3Rpb24iLCJpZCIsInBvc3QiLCJhamF4dXJsIiwicmVzcG9uc2UiLCJkYXRhIiwicG9zdF9pZCIsIklEIiwidGl0bGUiLCJwb3N0X3RpdGxlIiwidXBkYXRlTW9kdWxlIiwiQXV0b3NhdmUiLCJzYXZlIiwialF1ZXJ5IiwidGhpcyIsImhhbmRsZUV2ZW50cyIsIm9wZW4iLCJ1cmwiLCJhZGRDbGFzcyIsImFwcGVuZCIsIm1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmUiLCJkb2N1bWVudCIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGhpY2tib3hPcHRpb25zIiwiaXNfdGhpY2tib3giLCJlZGl0aW5nTW9kdWxlIiwicGFnZW5vdyIsImxvYWRNb2R1bGVzIiwibW9kdWxhcml0eV9wb3N0X2lkIiwiZWFjaCIsInNpZGViYXIiLCJzaWRlYmFyRWxlbWVudCIsImhpZGRlbiIsImluY29tcGFiaWxpdHkiLCJzaWRlYmFyX2luY29tcGFiaWxpdHkiLCJpc0VtcHR5T2JqZWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE1vZHVsZSIsInBvc3RfdHlwZSIsInBvc3RfdHlwZV9uYW1lIiwiY29sdW1uV2lkdGgiLCJpc0RlcHJlY2F0ZWQiLCJpbml0Q29tcGxldGVkIiwiZ2V0VGhpY2tCb3hVcmwiLCJiYXNlIiwicXVlcnlzdHJpbmciLCJwb3N0VHlwZSIsImFkbWluX3VybCIsInBhcmFtIiwiZ2V0SW1wb3J0VXJsIiwidGFyZ2V0IiwibW9kdWxlTmFtZSIsIm1vZHVsZVRpdGxlIiwiZGVwcmVjYXRlZCIsInRoaWNrYm94VXJsIiwicG9zdEFjdGlvbiIsImltcG9ydFVybCIsImlzSGlkZGVuIiwic2lkZWJhcklkIiwiaXRlbVJvd0lkIiwiSGVscGVycyIsInV1aWQiLCJodG1sIiwibGFuZ2hpZGUiLCJ3aWR0aCIsIndpZHRoT3B0aW9ucyIsImxhbmdlZGl0IiwibGFuZ2ltcG9ydCIsImxhbmdyZW1vdmUiLCJpbmRleCIsIml0ZW0iLCJ2YWwiLCJhdHRyIiwic29ydGFibGUiLCJmaW5kIiwiY2hhbmdlIiwidGV4dCIsInJlbW92ZU1vZHVsZSIsImNvbmZpcm0iLCJhY3Rpb25SZW1vdmUiLCJjbG9zZXN0IiwiaW5kZXhPZiIsInNlbGVjdG9yIiwiY3NzIiwic2VyaWFsaXplT2JqZWN0IiwiZWRpdGluZ1dpZGdldCIsIldpZGdldCIsInBhcmVudHMiLCJpc0VkaXRpbmdXaWRnZXQiLCJ1cGRhdGVXaWRnZXQiLCJ3aWRnZXQiLCJzZXBhcmF0b3IiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJtb2R1bGFyaXR5X3Bvc3RfYWN0aW9uIiwicGFyZW50IiwibG9jYXRpb24iLCJyZWxvYWQiLCJzcGxpdCIsIkRyYWdBbmREcm9wIiwiaW5pdCIsInNldHVwRHJhZ2dhYmxlIiwic2V0dXBEcm9wcGFibGUiLCJzZXR1cFNvcnRhYmxlIiwiaGFuZGxlIiwiY29ubmVjdFdpdGgiLCJwbGFjZWhvbGRlciIsInN0YXJ0IiwidWkiLCJ2YWxpZFRhcmdldEFyZWFzIiwicGFyc2UiLCJpbmNsdWRlcyIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInN0b3AiLCJlbGVtZW50IiwibmV3TmFtZSIsInJlcGxhY2UiLCJkcmFnZ2FibGUiLCJhcHBlbmRUbyIsImNvbnRhaW5tZW50Iiwic2Nyb2xsIiwiaGVscGVyIiwicmV2ZXJ0IiwicmV2ZXJ0RHVyYXRpb24iLCJldmVudCIsImRyb3BwYWJsZSIsImFjY2VwdCIsImhvdmVyQ2xhc3MiLCJkcm9wIiwiYXBwZW5kTW9kdWxlIiwiTW9kdWxlcyIsInVuZGVmaW5lZCIsIm9yaWdpbmFsTW9kdWxlIiwid2VicGFja1BvbHlmaWxsIiwiY2hpbGRyZW4iLCJmbiIsImEiLCJzZXJpYWxpemVBcnJheSIsInB1c2giLCJpc0NoZWNrZWQiLCJpcyIsInNoaWZ0S2V5Iiwic2libGluZ3MiLCJ3cCIsImF1dG9zYXZlIiwid2luZG93IiwidW5iaW5kIiwic2VydmVyIiwidHJpZ2dlclNhdmUiLCJhamF4Q29tcGxldGUiLCJyZWFkeSIsImxlbmd0aCIsIm9mZnNldCIsInNjcm9sbFRvcCIsInRvcCIsImhhc0NsYXNzIiwiaGlkZSIsInNob3ciLCJ0cmlnZ2VyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8s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RSxvQkFBb0IrSyxPQUV0Qi9LLEVBQUUsb0JBQW9COEssVUFFM0JFLFFBQVEiLCJmaWxlIjoianMvbW9kdWxhcml0eS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuIiwiaW1wb3J0IE1vZHVsZSBmcm9tICcuL21vZHVsZS5qcyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vcHJvbXB0L21vZGFsLmpzJztcbmltcG9ydCBBdXRvc2F2ZSBmcm9tICcuL2F1dG9zYXZlLmpzJztcblxuIGV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgLyoqXG4gICAgICogQXR0ZW50aW9uOiBUaGlzIHZhcmlhYmxlIHNob3VsZCBub3QgYmUgc2V0IG1hbnVhbGx5XG4gICAgICpcbiAgICAgKiBJbmRpY2F0ZXMgaWYgd2UgYXJlIGFkZGluZyBhIG5ldyBwb3N0IG9yIGVkaXRpbmcgb2xkIG9uZVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgdmFyIHBvc3RBY3Rpb24gPSAnYWRkJztcblxuICAgIGZ1bmN0aW9uIFRoaWNrYm94KCkge1xuXG4gICAgfVxuXG4gICAgVGhpY2tib3gucHJvdG90eXBlLm1vZHVsZVBvc3RDcmVhdGVkID0gZnVuY3Rpb24gKHBvc3RJZCkge1xuICAgICAgICBNb2RhbC5jbG9zZSgpO1xuXG4gICAgICAgIHZhciBtb2R1bGUgPSBNb2R1bGUuaXNFZGl0aW5nTW9kdWxlKCk7XG5cbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBhY3Rpb246ICdnZXRfcG9zdCcsXG4gICAgICAgICAgICBpZDogcG9zdElkXG4gICAgICAgIH07XG5cbiAgICAgICAgJC5wb3N0KGFqYXh1cmwsIHJlcXVlc3QsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgcG9zdF9pZDogcmVzcG9uc2UuSUQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLnBvc3RfdGl0bGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE1vZHVsZS51cGRhdGVNb2R1bGUobW9kdWxlLCBkYXRhKTtcbiAgICAgICAgICAgIEF1dG9zYXZlLnNhdmUoJ2Zvcm0nKTtcbiAgICAgICAgfSwgJ2pzb24nKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBUaGlja2JveCgpO1xuXG59KShqUXVlcnkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgIChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIGlzT3BlbiA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbW9kdWxhcml0eS1tb2RhbC1vcGVuJykuYXBwZW5kKCdcXFxuICAgICAgICAgICAgPGRpdiBpZD1cIm1vZHVsYXJpdHktbW9kYWxcIj5cXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLXdyYXBwZXJcIj5cXFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kdWxhcml0eS1tb2RhbC1jbG9zZVwiIGRhdGEtbW9kdWxhcml0eS1tb2RhbC1hY3Rpb249XCJjbG9zZVwiPiZ0aW1lczsgJyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmNsb3NlICsgJzwvYnV0dG9uPlxcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZGFsLXNwaW5uZXItY29udGFpbmVyXCIgaWQ9XCJtb2R1bGFyaXR5LWlmcmFtZS1sb2FkZXJcIj48c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kYWwtc3Bpbm5lclwiPjwvc3Bhbj48L2Rpdj5cXFxuICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIGNsYXNzPVwibW9kdWxhcml0eS1tb2RhbC1pZnJhbWVcIiBzcmM9XCInICsgdXJsICsgJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIG9ubG9hZD1cImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcJ21vZHVsYXJpdHktaWZyYW1lLWxvYWRlclxcJykuc3R5bGUuZGlzcGxheT1cXCdub25lXFwnO1wiIGFsbG93dHJhbnNwYXJlbmN5PjwvaWZyYW1lPlxcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICcpO1xuXG4gICAgICAgIGlzT3BlbiA9IHRydWU7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2R1bGFyaXR5LW1vZGFsLW9wZW4nKTtcbiAgICAgICAgJCgnI21vZHVsYXJpdHktbW9kYWwnKS5yZW1vdmUoKTtcbiAgICAgICAgaXNPcGVuID0gZmFsc2U7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5oYW5kbGVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1tb2R1bGFyaXR5LW1vZGFsLWFjdGlvbj1cImNsb3NlXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBNb2RhbCgpO1xuXG59KShqUXVlcnkpO1xuIiwiaW1wb3J0IFRoaWNrYm94IGZyb20gJy4vdGhpY2tib3guanMnO1xuaW1wb3J0IEhlbHBlcnMgZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9wcm9tcHQvbW9kYWwuanMnO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBpbml0Q29tcGxldGVkID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBPYmplY3QgdG8gY3JlYXRlIFRoaWNrYm94IHF1ZXJ5c3RyaW5nIGZyb21cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHZhciB0aGlja2JveE9wdGlvbnMgPSB7XG4gICAgICAgIGlzX3RoaWNrYm94OiB0cnVlLFxuICAgIH07XG5cbiAgICB2YXIgZWRpdGluZ01vZHVsZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gTW9kdWxlKCkge1xuICAgICAgICAkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhZ2Vub3cgIT09ICd1bmRlZmluZWQnICYmIHBhZ2Vub3cgPT0gJ2FkbWluX3BhZ2VfbW9kdWxhcml0eS1lZGl0b3InKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb2R1bGVzKG1vZHVsYXJpdHlfcG9zdF9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgc2F2ZWQgbW9kdWxlcyBhbmQgYWRkcyB0aGVtIHRvIHRoZSBwYWdlXG4gICAgICogQHBhcmFtICB7aW50ZWdlcn0gcG9zdElkIFRoZSBwb3N0IGlkIHRvIGxvYWQgbW9kdWxlcyBmcm9tXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmxvYWRNb2R1bGVzID0gZnVuY3Rpb24gKHBvc3RJZCkge1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2dldF9wb3N0X21vZHVsZXMnLFxuICAgICAgICAgICAgaWQ6IHBvc3RJZFxuICAgICAgICB9O1xuXG4gICAgICAgICQucG9zdChhamF4dXJsLCByZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICQuZWFjaChyZXNwb25zZSwgZnVuY3Rpb24gKHNpZGViYXIsIG1vZHVsZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2lkZWJhckVsZW1lbnQgPSAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWFbZGF0YS1hcmVhLWlkPVwiJyArIHNpZGViYXIgKyAnXCJdJyk7XG5cbiAgICAgICAgICAgICAgICAkLmVhY2gobW9kdWxlcy5tb2R1bGVzLCBmdW5jdGlvbiAoa2V5LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhpZGRlbiA9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmNvbXBhYmlsaXR5ID0gKHR5cGVvZiBkYXRhLnNpZGViYXJfaW5jb21wYWJpbGl0eSAhPSAndW5kZWZpbmVkJyAmJiAhJC5pc0VtcHR5T2JqZWN0KGRhdGEuc2lkZWJhcl9pbmNvbXBhYmlsaXR5KSkgPyBKU09OLnN0cmluZ2lmeShkYXRhLnNpZGViYXJfaW5jb21wYWJpbGl0eSkgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNb2R1bGUoc2lkZWJhckVsZW1lbnQsIGRhdGEucG9zdF90eXBlLCBkYXRhLnBvc3RfdHlwZV9uYW1lLCBkYXRhLnBvc3RfdGl0bGUsIGRhdGEuSUQsIGRhdGEuaGlkZGVuLCBkYXRhLmNvbHVtbldpZHRoLCBkYXRhLmlzRGVwcmVjYXRlZCwgaW5jb21wYWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgICAgIHNpZGViYXJFbGVtZW50LnJlbW92ZUNsYXNzKCdtb2R1bGFyaXR5LXNwaW5uZXInKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdENvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWEnKS5yZW1vdmVDbGFzcygnbW9kdWxhcml0eS1zcGlubmVyJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgJ2pzb24nKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZWRpdGluZyBtb2R1bGVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFuL3N0cmluZ31cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmlzRWRpdGluZ01vZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGVkaXRpbmdNb2R1bGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHRoaWNrYm94IHVybCB0byBvcGVuIGEgdGhpY2tib3ggaW4gY29ycmVjdCBtb2RlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBhY3Rpb24gU2hvdWxkIGJlIFwiYWRkXCIgb3IgXCJlZGl0XCJcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGRhdGEgICBTaG91bGQgY29udGFpbiBhZGRpdGlvbmFsIGRhdGEgKGZvciBub3cgc3VwcG9ydHMgXCJwb3N0SWRcIiBhbmQgXCJwb3N0VHlwZVwiKVxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgIFRoaWNrYm94IHVybFxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUuZ2V0VGhpY2tCb3hVcmwgPSBmdW5jdGlvbiAoYWN0aW9uLCBkYXRhKSB7XG4gICAgICAgIHZhciBiYXNlID0gJyc7XG4gICAgICAgIHZhciBxdWVyeXN0cmluZyA9IHt9O1xuXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgIGJhc2UgPSAncG9zdC1uZXcucGhwJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgYmFzZSA9ICdwb3N0LnBocCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRhdGEucG9zdElkID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBxdWVyeXN0cmluZy5wb3N0ID0gZGF0YS5wb3N0SWQ7XG4gICAgICAgICAgICBxdWVyeXN0cmluZy5hY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRhdGEucG9zdFR5cGUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHF1ZXJ5c3RyaW5nLnBvc3RfdHlwZSA9IGRhdGEucG9zdFR5cGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWRtaW5fdXJsICsgYmFzZSArICc/JyArICQucGFyYW0ocXVlcnlzdHJpbmcpICsgJyYnICsgJC5wYXJhbSh0aGlja2JveE9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBNb2R1bGUucHJvdG90eXBlLmdldEltcG9ydFVybCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBiYXNlID0gJ2VkaXQucGhwJztcbiAgICAgICAgdmFyIHF1ZXJ5c3RyaW5nID0ge307XG5cbiAgICAgICAgcXVlcnlzdHJpbmcucG9zdF90eXBlID0gZGF0YS5wb3N0VHlwZTtcblxuICAgICAgICByZXR1cm4gYWRtaW5fdXJsICsgYmFzZSArICc/JyArICQucGFyYW0ocXVlcnlzdHJpbmcpICsgJyYnICsgJC5wYXJhbSh0aGlja2JveE9wdGlvbnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbW9kdWxlIFwicm93XCIgdG8gdGhlIHRhcmdldCBwbGFjZWhvbGRlclxuICAgICAqIEBwYXJhbSB7c2VsZWN0b3J9IHRhcmdldCAgIFRoZSB0YXJnZXQgc2VsZWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlSWQgICBUaGUgbW9kdWxlIGlkIHNsdWdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlTmFtZSBUaGUgbW9kdWxlIG5hbWVcbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmFkZE1vZHVsZSA9IGZ1bmN0aW9uICh0YXJnZXQsIG1vZHVsZUlkLCBtb2R1bGVOYW1lLCBtb2R1bGVUaXRsZSwgcG9zdElkLCBoaWRkZW4sIGNvbHVtbldpZHRoLCBpc0RlcHJlY2F0ZWQsIGluY29tcGFiaWxpdHkpIHtcbiAgICAgICAgbW9kdWxlVGl0bGUgPSAodHlwZW9mIG1vZHVsZVRpdGxlICE9ICd1bmRlZmluZWQnKSA/ICc6ICcgKyBtb2R1bGVUaXRsZSA6ICcnO1xuICAgICAgICBwb3N0SWQgPSAodHlwZW9mIHBvc3RJZCAhPSAndW5kZWZpbmVkJykgPyBwb3N0SWQgOiAnJztcbiAgICAgICAgY29sdW1uV2lkdGggPSAodHlwZW9mIGNvbHVtbldpZHRoICE9ICd1bmRlZmluZWQnKSA/IGNvbHVtbldpZHRoIDogJyc7XG4gICAgICAgIGRlcHJlY2F0ZWQgPSAoaXNEZXByZWNhdGVkID09PSB0cnVlKSA/ICc8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktZGVwcmVjYXRlZFwiIHN0eWxlPVwiY29sb3I6I2ZmMDAwMDtcIj4oJyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmRlcHJlY2F0ZWQgKyAnKTwvc3Bhbj4nIDogJyc7XG4gICAgICAgIGluY29tcGFiaWxpdHkgPSAodHlwZW9mIGluY29tcGFiaWxpdHkgIT0gJ3VuZGVmaW5lZCcpID8gaW5jb21wYWJpbGl0eSA6ICcnO1xuXG4gICAgICAgIC8vIEdldCB0aGlja2JveCB1cmxcbiAgICAgICAgdmFyIHRoaWNrYm94VXJsID0gdGhpcy5nZXRUaGlja0JveFVybCgnYWRkJywge1xuICAgICAgICAgICAgcG9zdFR5cGU6IG1vZHVsZUlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCB0aGlja2JveCBhY3Rpb25cbiAgICAgICAgVGhpY2tib3gucG9zdEFjdGlvbiA9ICdhZGQnO1xuXG4gICAgICAgIGlmIChwb3N0SWQpIHtcbiAgICAgICAgICAgIHRoaWNrYm94VXJsID0gdGhpcy5nZXRUaGlja0JveFVybCgnZWRpdCcsIHtcbiAgICAgICAgICAgICAgICBwb3N0SWQ6IHBvc3RJZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgaW1wb3J0IHVybFxuICAgICAgICB2YXIgaW1wb3J0VXJsID0gdGhpcy5nZXRJbXBvcnRVcmwoe1xuICAgICAgICAgICAgcG9zdFR5cGU6IG1vZHVsZUlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrL3VuY2hlY2sgaGlkZGVuIGNoZWNrYm94XG4gICAgICAgIHZhciBpc0hpZGRlbiA9ICcnO1xuICAgICAgICBpZiAoaGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpc0hpZGRlbiA9ICdjaGVja2VkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaWRlYmFySWQgPSAkKHRhcmdldCkuZGF0YSgnYXJlYS1pZCcpO1xuICAgICAgICB2YXIgaXRlbVJvd0lkID0gSGVscGVycy51dWlkKCk7XG5cbiAgICAgICAgdmFyIGh0bWwgPSAnPGxpIGlkPVwicG9zdC0nICsgcG9zdElkICsgJ1wiIGRhdGEtbW9kdWxlLWlkPVwiJyArIG1vZHVsZUlkICsgJ1wiIGRhdGEtbW9kdWxlLXN0b3JlZC13aWR0aD1cIicgKyBjb2x1bW5XaWR0aCArICdcIiBkYXRhLXNpZGViYXItaW5jb21wYWJpbGl0eT1cXCcnICsgaW5jb21wYWJpbGl0eSArICdcXCc+XFxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbGluZS13cmFwcGVyXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2R1bGFyaXR5LXNvcnRhYmxlLWhhbmRsZVwiPjwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLW5hbWVcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgJyArIG1vZHVsZU5hbWUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKyBkZXByZWNhdGVkICsgJ1xcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLXRpdGxlXCI+JyArIG1vZHVsZVRpdGxlICsgJzwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtaGlkZVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtoaWRkZW5dXCIgdmFsdWU9XCJoaWRkZW5cIiAnICsgaXNIaWRkZW4gKyAnIC8+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2hpZGUgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibW9kdWxhcml0eS1tb2R1bGUtY29sdW1uc1wiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+JyArIG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLndpZHRoICsgJzo8L2xhYmVsPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtjb2x1bW5XaWR0aF1cIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS53aWR0aE9wdGlvbnMgKyAnXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vZHVsYXJpdHktbW9kdWxlLWFjdGlvbnNcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyB0aGlja2JveFVybCArICdcIiBkYXRhLW1vZHVsYXJpdHktbW9kYWwgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LW9wZW5cIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ2VkaXQgKyAnPC9zcGFuPjwvYT5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicgKyBpbXBvcnRVcmwgKyAnXCIgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLXRoaWNrYm94LWltcG9ydFwiPjxzcGFuPicgKyBtb2R1bGFyaXR5QWRtaW5MYW5ndWFnZS5sYW5naW1wb3J0ICsgJzwvc3Bhbj48L2E+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcmVtb3ZlXCIgY2xhc3M9XCJtb2R1bGFyaXR5LW1vZHVsZS1yZW1vdmVcIj48c3Bhbj4nICsgbW9kdWxhcml0eUFkbWluTGFuZ3VhZ2UubGFuZ3JlbW92ZSArICc8L3NwYW4+PC9hPlxcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJtb2R1bGFyaXR5X21vZHVsZXNbJyArIHNpZGViYXJJZCArICddWycgKyBpdGVtUm93SWQgKyAnXVtwb3N0aWRdXCIgY2xhc3M9XCJtb2R1bGFyaXR5LWpzLW1vZHVsZS1pZFwiIHZhbHVlPVwiJyArIHBvc3RJZCArICdcIiByZXF1aXJlZD5cXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXFxuICAgICAgICAgICAgPC9saT4nO1xuXG4gICAgICAgIC8vU3RvcmVcbiAgICAgICAgJCh0YXJnZXQpLmFwcGVuZChodG1sKTtcblxuICAgICAgICAvL1VwZGF0ZSB3aWR0aCBzZWxlY3RvclxuICAgICAgICAkKCcubW9kdWxhcml0eS1zaWRlYmFyLWFyZWEgPiBsaScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgICQoJy5tb2R1bGFyaXR5LW1vZHVsZS1jb2x1bW5zIHNlbGVjdCcsICQoaXRlbSkpLnZhbCgkKGl0ZW0pLmF0dHIoJ2RhdGEtbW9kdWxlLXN0b3JlZC13aWR0aCcpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9SZWZyZXNoXG4gICAgICAgICQoJy5tb2R1bGFyaXR5LWpzLXNvcnRhYmxlJykuc29ydGFibGUoJ3JlZnJlc2gnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIG1vZHVsZSBcInJvd1wiIGFmdGVyIGVkaXRpbmcgdGhlIG1vZHVsZSBwb3N0XG4gICAgICogQHBhcmFtICB7RE9NfSBtb2R1bGUgICAgTW9kdWxlIGRvbSBlbGVtZW50XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBkYXRhICAgVGhlIGRhdGFcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIE1vZHVsZS5wcm90b3R5cGUudXBkYXRlTW9kdWxlID0gZnVuY3Rpb24gKG1vZHVsZSwgZGF0YSkge1xuICAgICAgICAvLyBIcmVmXG4gICAgICAgIG1vZHVsZS5maW5kKCdhLm1vZHVsYXJpdHktanMtdGhpY2tib3gtb3BlbicpLmF0dHIoJ2hyZWYnLCB0aGlzLmdldFRoaWNrQm94VXJsKCdlZGl0Jywge1xuICAgICAgICAgICAgcG9zdElkOiBkYXRhLnBvc3RfaWRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFBvc3QgaWQgaW5wdXRcbiAgICAgICAgbW9kdWxlLmZpbmQoJ2lucHV0Lm1vZHVsYXJpdHktanMtbW9kdWxlLWlkJykudmFsKGRhdGEucG9zdF9pZCkuY2hhbmdlKCk7XG5cbiAgICAgICAgLy8gUG9zdCB0aXRsZVxuICAgICAgICBtb2R1bGUuZmluZCgnLm1vZHVsYXJpdHktbW9kdWxlLXRpdGxlJykudGV4dCgnOiAnICsgZGF0YS50aXRsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBtb2R1bGUgXCJyb3dcIiBmcm9tIHRoZSBwbGFjZWhvbGRlclxuICAgICAqIEBwYXJhbSAge0RPTSBFbGVtZW50fSBtb2R1bGUgVGhlICh0byBiZSByZW1vdmVkKSBtb2R1bGUncyBkb20gZWxlbWVudFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgTW9kdWxlLnByb3RvdHlwZS5yZW1vdmVNb2R1bGUgPSBmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAgIGlmIChjb25maXJtKG1vZHVsYXJpdHlBZG1pbkxhbmd1YWdlLmFjdGlvblJlbW92ZSkpIHtcbiAgICAgICAgICAgIG1vZHVsZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgZXZlbnRzXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBNb2R1bGUucHJvdG90eXBlLmhhbmRsZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBUcmFzaCBpY29uXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1tb2R1bGUtcmVtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVNb2R1bGUodGFyZ2V0KTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvL0ltcG9ydFxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1vZHVsYXJpdHktanMtdGhpY2tib3gtaW1wb3J0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpO1xuICAgICAgICAgICAgZWRpdGluZ01vZHVsZSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG5cbiAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnaW1wb3J0JztcbiAgICAgICAgICAgIE1vZGFsLm9wZW4oJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVkaXRcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2R1bGFyaXR5LWpzLXRoaWNrYm94LW9wZW4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgZWwgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBpZiAoZWwuYXR0cignaHJlZicpLmluZGV4T2YoJ3Bvc3QucGhwJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgTW9kYWwub3BlbigkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IE1vZHVsZSgpO1xuXG59KShqUXVlcnkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgkKSB7XG5cbiAgICBmdW5jdGlvbiBBdXRvc2F2ZSgpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy90aGlzLmhhbmRsZUV2ZW50cygpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIEF1dG9zYXZlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICQoJyNtb2R1bGFyaXR5LW9wdGlvbnMgI3B1Ymxpc2hpbmctYWN0aW9uIC5zcGlubmVyJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSAkKHNlbGVjdG9yKS5zZXJpYWxpemVPYmplY3QoKTtcbiAgICAgICAgcmVxdWVzdC5pZCA9IG1vZHVsYXJpdHlfcG9zdF9pZDtcbiAgICAgICAgcmVxdWVzdC5hY3Rpb24gPSAnc2F2ZV9tb2R1bGVzJztcblxuICAgICAgICAkLnBvc3QoYWpheHVybCwgcmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkKCcjbW9kdWxhcml0eS1vcHRpb25zICNwdWJsaXNoaW5nLWFjdGlvbiAuc3Bpbm5lcicpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgQXV0b3NhdmUoKTtcblxufSkoalF1ZXJ5KTtcbiIsImltcG9ydCBUaGlja2JveCBmcm9tICcuLi9lZGl0b3IvdGhpY2tib3guanMnO1xuaW1wb3J0IE1vZHVsZSBmcm9tICcuLi9lZGl0b3IvbW9kdWxlLmpzJztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9wcm9tcHQvbW9kYWwuanMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIGVkaXRpbmdXaWRnZXQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIFdpZGdldCgpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAvKiBJbXBvcnQgKi9cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kdWxhcml0eS1qcy10aGlja2JveC13aWRnZXQtaW1wb3J0LXdpZGdldCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgZWRpdGluZ1dpZGdldCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy53aWRnZXQtaW5zaWRlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0VXJsID0gTW9kdWxlLmdldEltcG9ydFVybCh7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RUeXBlOiAkKGUudGFyZ2V0KS5wYXJlbnRzKCcud2lkZ2V0LWluc2lkZScpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdHlwZSBzZWxlY3QnKS52YWwoKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgTW9kdWxlLmVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcud2lkZ2V0LWluc2lkZScpO1xuXG4gICAgICAgICAgICAgICAgVGhpY2tib3gucG9zdEFjdGlvbiA9ICdpbXBvcnQtd2lkZ2V0JztcbiAgICAgICAgICAgICAgICBNb2RhbC5vcGVuKGltcG9ydFVybCk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvKiBFZGl0ICovXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1vZHVsYXJpdHktanMtdGhpY2tib3gtb3Blbi13aWRnZXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHZhciBlbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuYXR0cignaHJlZicpLmluZGV4T2YoJ3Bvc3QucGhwJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBUaGlja2JveC5wb3N0QWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRpbmdNb2R1bGUgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xuXG4gICAgICAgICAgICAgICAgTW9kYWwub3BlbigkKGUudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cblxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIFdpZGdldC5wcm90b3R5cGUuaXNFZGl0aW5nV2lkZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZWRpdGluZ1dpZGdldDtcbiAgICB9O1xuXG4gICAgV2lkZ2V0LnByb3RvdHlwZS51cGRhdGVXaWRnZXQgPSBmdW5jdGlvbiAod2lkZ2V0LCBkYXRhKSB7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWlkLXNwYW4nKS5odG1sKGRhdGEucG9zdF9pZCk7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWlkJykudmFsKGRhdGEucG9zdF9pZCk7XG4gICAgICAgICQod2lkZ2V0KS5maW5kKCcubW9kdWxhcml0eS13aWRnZXQtbW9kdWxlLWVkaXQnKS5hdHRyKCdocmVmJywncG9zdC5waHA/cG9zdD0nICsgZGF0YS5wb3N0X2lkICsgJyZhY3Rpb249ZWRpdCZpc190aGlja2JveD10cnVlJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkKHdpZGdldCkuZmluZCgnLm1vZHVsYXJpdHktd2lkZ2V0LW1vZHVsZS10aXRsZS1zcGFuJykuaHRtbChkYXRhLnRpdGxlKTtcbiAgICAgICAgJCh3aWRnZXQpLmZpbmQoJy5tb2R1bGFyaXR5LXdpZGdldC1tb2R1bGUtdGl0bGUnKS52YWwoZGF0YS50aXRsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgV2lkZ2V0KCk7XG5cbn0pKGpRdWVyeSk7XG4iLCJtb2R1bGUuZXhwb3J0cyhmdW5jdGlvbiAoJCkge1xuXG4gICAgZnVuY3Rpb24gSGVscGVycygpIHtcbiAgICAgICAgJChmdW5jdGlvbigpe1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIEhlbHBlcnMucHJvdG90eXBlLnV1aWQgPSBmdW5jdGlvbiAoc2VwYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgSGVscGVycygpO1xuXG59KShqUXVlcnkpO1xuIiwiaW1wb3J0IFRoaWNrYm94IGZyb20gJy4vZWRpdG9yL3RoaWNrYm94LmpzJztcbmltcG9ydCBNb2R1bGUgZnJvbSAnLi9lZGl0b3IvbW9kdWxlLmpzJztcbmltcG9ydCBBdXRvc2F2ZSBmcm9tICcuL2VkaXRvci9hdXRvc2F2ZS5qcyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9wcm9tcHQvbW9kYWwuanMnO1xuaW1wb3J0IFdpZGdldCBmcm9tICcuL2hlbHBlcnMvd2lkZ2V0LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgkKSB7XG4gICAgLyoqXG4gICAgICogQWRkIG5ldyBwb3N0IGNhbGxiYWNrXG4gICAgICovXG4gICAgaWYgKFRoaWNrYm94LnBvc3RBY3Rpb24gPT0gJ2FkZCcgJiYgbW9kdWxhcml0eV9wb3N0X2FjdGlvbiA9PSAnJykge1xuICAgICAgICBUaGlja2JveC5tb2R1bGVQb3N0Q3JlYXRlZChtb2R1bGFyaXR5X3Bvc3RfaWQpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoVGhpY2tib3gucG9zdEFjdGlvbiA9PSAnZWRpdC1pbmxpbmUtc2F2ZWQnKSB7XG4gICAgICAgIHBhcmVudC5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRWRpdCBwb3N0IGNhbGxiYWNrXG4gICAgICovXG4gICAgaWYgKFRoaWNrYm94LnBvc3RBY3Rpb24gPT0gJ2VkaXQnICYmIG1vZHVsYXJpdHlfcG9zdF9hY3Rpb24gPT0gJycpIHtcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbignY2xpY2snLCAnI3B1Ymxpc2gnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgVGhpY2tib3gucG9zdEFjdGlvbiA9ICdhZGQnO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRWRpdCBwb3N0IGNhbGxiYWNrXG4gICAgICovXG4gICAgaWYgKFRoaWNrYm94LnBvc3RBY3Rpb24gPT0gJ2VkaXQtaW5saW5lLW5vdC1zYXZlZCcpIHtcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbignY2xpY2snLCAnI3B1Ymxpc2gnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgVGhpY2tib3gucG9zdEFjdGlvbiA9ICdlZGl0LWlubGluZS1zYXZlZCc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBJbXBvcnQgcG9zdCBtb2RpZmljYXRpb25zIGFuZCBjYWxsYmFja1xuICAgICAqL1xuICAgIGlmIChUaGlja2JveC5wb3N0QWN0aW9uID09ICdpbXBvcnQnKSB7XG4gICAgICAgICQoJy5jaGVjay1jb2x1bW4gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykucmVtb3ZlKCk7XG4gICAgICAgICQoJy53cC1saXN0LXRhYmxlJykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktd3AtbGlzdC10YWJsZScpO1xuICAgICAgICAkKCd0Ym9keSAuY2hlY2stY29sdW1uJykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktaW1wb3J0LWNvbHVtbicpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBtb2R1bGFyaXR5LWltcG9ydC1idXR0b25cIiBkYXRhLW1vZHVsYXJpdHktYWN0aW9uPVwiaW1wb3J0XCI+SW1wb3J0PC9idXR0b24+Jyk7XG4gICAgICAgICQoJyNwb3N0cy1maWx0ZXInKS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImlzX3RoaWNrYm94XCIgdmFsdWU9XCJ0cnVlXCI+Jyk7XG4gICAgICAgIFxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtbW9kdWxhcml0eS1hY3Rpb249XCJpbXBvcnRcIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcG9zdElkID0gJChlLnRhcmdldCkuY2xvc2VzdCgndHInKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgcG9zdElkID0gcG9zdElkLnNwbGl0KCctJylbMV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBNb2R1bGUuaXNFZGl0aW5nTW9kdWxlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2dldF9wb3N0JyxcbiAgICAgICAgICAgICAgICBpZDogcG9zdElkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ21vZHVsYXJpdHktbG9hZGVyLXRha2VvdmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQucG9zdChhamF4dXJsLCByZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdF9pZDogcmVzcG9uc2UuSUQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5wb3N0X3RpdGxlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBNb2R1bGUudXBkYXRlTW9kdWxlKG1vZHVsZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgQXV0b3NhdmUuc2F2ZSgnZm9ybScpO1xuICAgICAgICAgICAgICAgIE1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB9LCAnanNvbicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogSW1wb3J0IHBvc3QgbW9kaWZpY2F0aW9ucyBhbmQgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBpZiAoVGhpY2tib3gucG9zdEFjdGlvbiA9PSAnaW1wb3J0LXdpZGdldCcpIHtcbiAgICAgICAgJCgnLmNoZWNrLWNvbHVtbiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5yZW1vdmUoKTtcbiAgICAgICAgJCgnLndwLWxpc3QtdGFibGUnKS5hZGRDbGFzcygnbW9kdWxhcml0eS13cC1saXN0LXRhYmxlJyk7XG4gICAgICAgICQoJ3Rib2R5IC5jaGVjay1jb2x1bW4nKS5hZGRDbGFzcygnbW9kdWxhcml0eS1pbXBvcnQtY29sdW1uJykuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIG1vZHVsYXJpdHktaW1wb3J0LWJ1dHRvblwiIGRhdGEtbW9kdWxhcml0eS1hY3Rpb249XCJpbXBvcnRcIj5JbXBvcnQ8L2J1dHRvbj4nKTtcbiAgICAgICAgXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1tb2R1bGFyaXR5LWFjdGlvbj1cImltcG9ydFwiXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBwb3N0SWQgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCd0cicpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICBwb3N0SWQgPSBwb3N0SWQuc3BsaXQoJy0nKVsxXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHdpZGdldCA9IFdpZGdldC5pc0VkaXRpbmdXaWRnZXQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnZ2V0X3Bvc3QnLFxuICAgICAgICAgICAgICAgIGlkOiBwb3N0SWRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbW9kdWxhcml0eS1sb2FkZXItdGFrZW92ZXInKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJC5wb3N0KGFqYXh1cmwsIHJlcXVlc3QsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBwb3N0X2lkOiByZXNwb25zZS5JRCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLnBvc3RfdGl0bGVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFdpZGdldC51cGRhdGVXaWRnZXQod2lkZ2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgICBNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSwgJ2pzb24nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxufSkoalF1ZXJ5KTtcblxuXG5cbiIsImltcG9ydCBNb2R1bGVzIGZyb20gJy4vbW9kdWxlLmpzJztcbm1vZHVsZS5leHBvcnRzKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgc29ydGFibGVJbjtcblxuICAgIGZ1bmN0aW9uIERyYWdBbmREcm9wKCkge1xuICAgICAgICAkKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFnZW5vdyAhPT0gJ3VuZGVmaW5lZCcgJiYgcGFnZW5vdyA9PSAnYWRtaW5fcGFnZV9tb2R1bGFyaXR5LWVkaXRvcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIERyYWdBbmREcm9wLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldHVwRHJhZ2dhYmxlKCk7XG4gICAgICAgIHRoaXMuc2V0dXBEcm9wcGFibGUoKTtcbiAgICAgICAgdGhpcy5zZXR1cFNvcnRhYmxlKCk7XG4gICAgfTtcblxuICAgIERyYWdBbmREcm9wLnByb3RvdHlwZS5zZXR1cFNvcnRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcubW9kdWxhcml0eS1qcy1zb3J0YWJsZScpLnNvcnRhYmxlKHtcbiAgICAgICAgICAgIGhhbmRsZTogJy5tb2R1bGFyaXR5LXNvcnRhYmxlLWhhbmRsZScsXG4gICAgICAgICAgICBjb25uZWN0V2l0aDogJy5tb2R1bGFyaXR5LWpzLXNvcnRhYmxlJyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAndWktc29ydGFibGUtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgc3RhcnQ6ICBmdW5jdGlvbihlLCB1aSkge1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkVGFyZ2V0QXJlYXMgPSBqUXVlcnkodWkuaXRlbSkuYXR0cignZGF0YS1zaWRlYmFyLWluY29tcGFiaWxpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkVGFyZ2V0QXJlYXMgPSBKU09OLnBhcnNlKHZhbGlkVGFyZ2V0QXJlYXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkVGFyZ2V0QXJlYXMgJiYgdHlwZW9mIHZhbGlkVGFyZ2V0QXJlYXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIubW9kdWxhcml0eS1zaWRlYmFyLWFyZWFcIikuZWFjaChmdW5jdGlvbihpbmRleCwgc2lkZWJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdmFsaWRUYXJnZXRBcmVhcy5pbmNsdWRlcyhqUXVlcnkodGhpcykuYXR0cignZGF0YS1hcmVhLWlkJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKFwibW9kdWxhcml0eS1pbmNvbXBhdGlibGUtYXJlYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluY29tcGFiaWxpdHkgaW5mb3JtYXRpb24gbm90IGRlZmluZWQgLSBcIiArIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKGUsIHVpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNpZGViYXJJZCA9IHVpLml0ZW0ucGFyZW50cygndWwnKS5kYXRhKCdhcmVhLWlkJyk7XG4gICAgICAgICAgICAgICAgdWkuaXRlbS5maW5kKCdpbnB1dFtuYW1lXj1cIm1vZHVsYXJpdHlfbW9kdWxlc1wiXScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdOYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJykucmVwbGFjZSgvXFxbKC4qPylcXF0vaSwgJ1snICsgc2lkZWJhcklkICsgJ10nKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCduYW1lJywgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KFwiW2lkXj1tb2R1bGFyaXR5LW1iLV1cIikucmVtb3ZlQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5iaW5kKHRoaXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCBkcmFnZ2FibGUgZnVuY3Rpb25hbGxpdHlcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIERyYWdBbmREcm9wLnByb3RvdHlwZS5zZXR1cERyYWdnYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLm1vZHVsYXJpdHktanMtZHJhZ2dhYmxlJykuZHJhZ2dhYmxlKHtcbiAgICAgICAgICAgIGFwcGVuZFRvOiAnYm9keScsXG4gICAgICAgICAgICBjb250YWlubWVudDogJ2RvY3VtZW50JyxcbiAgICAgICAgICAgIHNjcm9sbDogZmFsc2UsXG4gICAgICAgICAgICBoZWxwZXI6ICdjbG9uZScsXG4gICAgICAgICAgICByZXZlcnQ6ICdpbnZhbGlkJyxcbiAgICAgICAgICAgIHJldmVydER1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICBzdGFydDogIGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWRUYXJnZXRBcmVhcyA9IGpRdWVyeSh0aGlzKS5hdHRyKCdkYXRhLXNpZGViYXItaW5jb21wYWJpbGl0eScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRUYXJnZXRBcmVhcyA9IEpTT04ucGFyc2UodmFsaWRUYXJnZXRBcmVhcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZFRhcmdldEFyZWFzICYmIHR5cGVvZiB2YWxpZFRhcmdldEFyZWFzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KFwiLm1vZHVsYXJpdHktc2lkZWJhci1hcmVhXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIHNpZGViYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXZhbGlkVGFyZ2V0QXJlYXMuaW5jbHVkZXMoalF1ZXJ5KHRoaXMpLmF0dHIoJ2RhdGEtYXJlYS1pZCcpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwibW9kdWxhcml0eS1pbmNvbXBhdGlibGUtYXJlYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcyhcIm1vZHVsYXJpdHktaW5jb21wYXRpYmxlLWFyZWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbmNvbXBhYmlsaXR5IGluZm9ybWF0aW9uIG5vdCBkZWZpbmVkIC0gXCIgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KFwiW2lkXj1tb2R1bGFyaXR5LW1iLV1cIikucmVtb3ZlQ2xhc3MoXCJtb2R1bGFyaXR5LWluY29tcGF0aWJsZS1hcmVhXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldHVwIGRyb3BwYWJsZSBmdW5jdGlvbmFsbGl0eVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgRHJhZ0FuZERyb3AucHJvdG90eXBlLnNldHVwRHJvcHBhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcubW9kdWxhcml0eS1qcy1kcm9wcGFibGUnKS5kcm9wcGFibGUoe1xuICAgICAgICAgICAgYWNjZXB0OiAnLm1vZHVsYXJpdHktanMtZHJhZ2dhYmxlJyxcbiAgICAgICAgICAgIGhvdmVyQ2xhc3M6ICdtb2R1bGFyaXR5LXN0YXRlLWRyb3BwYWJsZScsXG4gICAgICAgICAgICBkcm9wOiBmdW5jdGlvbiAoZSwgdWkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE1vZHVsZShlLCB1aSk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgfSkuYmluZCh0aGlzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBhIG1vZHVsZSB0byB0aGUgdGFyZ2V0IHdoZW4gZHJvcHBlZFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZSAgRXZlbnRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHVpIFVJXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBEcmFnQW5kRHJvcC5wcm90b3R5cGUuYXBwZW5kTW9kdWxlID0gZnVuY3Rpb24gKGUsIHVpKSB7XG4gICAgICAgIHZhciBtb2R1bGUgPSB1aS5kcmFnZ2FibGU7XG4gICAgICAgIHZhciBtb2R1bGVOYW1lID0gbW9kdWxlLmZpbmQoJy5tb2R1bGFyaXR5LW1vZHVsZS1uYW1lJykudGV4dCgpO1xuICAgICAgICB2YXIgbW9kdWxlSWQgPSBtb2R1bGUuZGF0YSgnbW9kdWxlLWlkJyk7XG4gICAgICAgIHZhciBpbmNvbXBhYmlsaXR5ID0gbW9kdWxlLmF0dHIoJ2RhdGEtc2lkZWJhci1pbmNvbXBhYmlsaXR5Jyk7XG5cbiAgICAgICAgTW9kdWxlcy5hZGRNb2R1bGUoZS50YXJnZXQsIG1vZHVsZUlkLCBtb2R1bGVOYW1lLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaW5jb21wYWJpbGl0eSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgRHJhZ0FuZERyb3AoKTtcblxufSkoalF1ZXJ5KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3JpZ2luYWxNb2R1bGUpIHtcblx0aWYgKCFvcmlnaW5hbE1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHR2YXIgbW9kdWxlID0gT2JqZWN0LmNyZWF0ZShvcmlnaW5hbE1vZHVsZSk7XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiZXhwb3J0c1wiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn07XG4iLCJpbXBvcnQgJy4vbW9kdWxhcml0eS1lZGl0b3ItbW9kYWwuanMnO1xuaW1wb3J0ICcuL2VkaXRvci9hdXRvc2F2ZSc7XG5pbXBvcnQgJy4vZWRpdG9yL2RyYWdBbmREcm9wLmpzJztcbmltcG9ydCAnLi9lZGl0b3IvbW9kdWxlLmpzJztcbmltcG9ydCBUaGlja2JveCBmcm9tICcuL2VkaXRvci90aGlja2JveC5qcyc7XG5cbmltcG9ydCAnLi9oZWxwZXJzL2hlbHBlcnMuanMnO1xuaW1wb3J0ICcuL2hlbHBlcnMvc2VyaWFsaXplT2JqZWN0LmpzJztcbmltcG9ydCAnLi9oZWxwZXJzL3dpZGdldC5qcyc7XG5cbmltcG9ydCBNb2RhbCBmcm9tICcuL3Byb21wdC9tb2RhbC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuICAgICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXS5zaWRlYmFyLWFyZWEtYWN0aXZhdG9yJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGlzQ2hlY2tlZCA9ICQodGhpcykuaXMoJzpjaGVja2VkJyk7XG4gICAgICAgIHZhciB2YWx1ZSA9ICQodGhpcykuYXR0cigndmFsdWUnKTtcblxuICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgaWYgKCFpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dC5zaWRlYmFyLWFyZWEtYWN0aXZhdG9yW3R5cGU9XCJjaGVja2JveFwiXVt2YWx1ZT1cIicgKyB2YWx1ZSArICdcIl0nKS5hdHRyKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dC5zaWRlYmFyLWFyZWEtYWN0aXZhdG9yW3R5cGU9XCJjaGVja2JveFwiXVt2YWx1ZT1cIicgKyB2YWx1ZSArICdcIl0nKS5hdHRyKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKGpRdWVyeSk7XG5cbihmdW5jdGlvbiAoJCkge1xuXG4gICAgLy8gU2hvdyBzcGlubmVyIHdoZW4gY2xpY2tpbmcgc2F2ZSBvbiBNb2R1bGFyaXR5IG9wdGlvbnMgcGFnZVxuICAgICQoJyNtb2R1bGFyaXR5LW9wdGlvbnMgI3B1Ymxpc2gnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5zcGlubmVyJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICB9KTtcblxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbWVudSBpdGVtIGluIHRoZSBNb2R1bGFyaXR5IHN1Ym1lbnUgKGFkbWluIG1lbnUpXG4gICAgJCgnYS53cC1maXJzdC1pdGVtW2hyZWY9XCJhZG1pbi5waHA/cGFnZT1tb2R1bGFyaXR5XCJdJykucGFyZW50KCdsaScpLnJlbW92ZSgpO1xuXG4gICAgLy8gVHJpZ2dlciBhdXRvc2F2ZSB3aGVuIHN3aXRjaGluZyB0YWJzXG4gICAgJCgnI21vZHVsYXJpdHktdGFicyBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHdwLmF1dG9zYXZlKSB7XG4gICAgICAgICAgICAkKHdpbmRvdykudW5iaW5kKCk7XG5cbiAgICAgICAgICAgIHdwLmF1dG9zYXZlLnNlcnZlci50cmlnZ2VyU2F2ZSgpO1xuXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5hamF4Q29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxufSkoalF1ZXJ5KTtcblxuXG4vKiBBdXRvIHNjcm9sbGluZyBjb250ZW50ICovXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XG4gICAgaWYgKCQoJyNtb2R1bGFyaXR5LW1iLW1vZHVsZXMnKS5sZW5ndGgpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9ICQoJyNtb2R1bGFyaXR5LW1iLW1vZHVsZXMnKS5vZmZzZXQoKTtcbiAgICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyA1MCA+IG9mZnNldC50b3AgJiYgISQoJyNtb2R1bGFyaXR5LW1iLW1vZHVsZXMnKS5oYXNDbGFzcygnaXMtZml4ZWQnKSkge1xuICAgICAgICAgICAgICAgICQoJyNtb2R1bGFyaXR5LW1iLW1vZHVsZXMnKS5hZGRDbGFzcygnaXMtZml4ZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgNTAgPCBvZmZzZXQudG9wICYmICQoJyNtb2R1bGFyaXR5LW1iLW1vZHVsZXMnKS5oYXNDbGFzcygnaXMtZml4ZWQnKSkge1xuICAgICAgICAgICAgICAgICQoJyNtb2R1bGFyaXR5LW1iLW1vZHVsZXMnKS5yZW1vdmVDbGFzcygnaXMtZml4ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCgnLm1vZHVsYXJpdHktZWRpdC1tb2R1bGUgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgIFRoaWNrYm94LnBvc3RBY3Rpb24gPSAnZWRpdC1pbmxpbmUtbm90LXNhdmVkJztcbiAgICAgICBNb2RhbC5vcGVuKCQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKS5hdHRyKCdocmVmJykpO1xuICAgIH0pO1xufSk7XG5cbi8qIFBvc3QgZmlsdGVycyBpcyB2aXNpYmxlIGluIGJhY2tlbmQgaWYgcG9zdHR5cGUgaXMgc2V0IHRvIHBvc3Qgb3IgcGFnZSAqL1xualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuICAgICQoJy5mcm9udGVuZC1maWx0ZXInKS5oaWRlKCk7XG5cbiAgICBpZiAoJCgnI21vZHVsYXJpdHktbGF0ZXN0LXBvc3QtdHlwZSBzZWxlY3QnKS52YWwoKSA9PT0gJ3Bvc3QnIHx8XG4gICAgICAgICQoJyNtb2R1bGFyaXR5LWxhdGVzdC1wb3N0LXR5cGUgc2VsZWN0JykudmFsKCkgPT09ICdwYWdlJykge1xuICAgICAgICAkKCcuZnJvbnRlbmQtZmlsdGVyJykuc2hvdygpO1xuICAgIH1cbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZScsICcjbW9kdWxhcml0eS1sYXRlc3QtcG9zdC10eXBlIHNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQoJyNtb2R1bGFyaXR5LWxhdGVzdC1wb3N0LXR5cGUgc2VsZWN0JykudmFsKCkgPT09ICdwb3N0J1xuICAgICAgICAgICAgfHwgJCgnI21vZHVsYXJpdHktbGF0ZXN0LXBvc3QtdHlwZSBzZWxlY3QnKS52YWwoKSA9PT0gJ3BhZ2UnKSB7XG4gICAgICAgICAgICAkKCcuZnJvbnRlbmQtZmlsdGVyJykuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLmZyb250ZW5kLWZpbHRlcicpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH0pLnRyaWdnZXIoJ2NoYW5nZScpO1xufSk7IiwiZXhwb3J0IGRlZmF1bHQgalF1ZXJ5LmZuLnNlcmlhbGl6ZU9iamVjdCA9IGZ1bmN0aW9uKClcbntcbiAgICB2YXIgbyA9IHt9O1xuICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpO1xuICAgIGpRdWVyeS5lYWNoKGEsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHtcbiAgICAgICAgICAgICAgICBvW3RoaXMubmFtZV0gPSBbb1t0aGlzLm5hbWVdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWUgfHwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZSB8fCAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBvO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=